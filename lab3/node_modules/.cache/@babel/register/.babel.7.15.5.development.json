{
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/lab2/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/lab2\",\"filename\":\"/home/vinah331/Desktop/tdp013/lab2/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/lab2\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab2/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/lab2",
      "filename": "/home/vinah331/Desktop/tdp013/lab2/app.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/lab2",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/lab2/app.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/lab2/app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/lab2/",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "var createError = require('http-errors');\n\nvar express = require('express');\n\nvar path = require('path');\n\nvar cookieParser = require('cookie-parser');\n\nvar logger = require('morgan');\n\nvar indexRouter = require('./routes/index');\n\nvar usersRouter = require('./routes/users');\n\nvar app = express(); // view engine setup\n\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\napp.use('/', indexRouter);\napp.use('/users', usersRouter); // catch 404 and forward to error handler //använd inte!\n// app.use(function(req, res, next) {\n//   next(createError(404));\n// });\n// error handler\n// app.use(function(err, req, res, next) {\n//   // set locals, only providing error in development\n//   res.locals.message = err.message;\n//   res.locals.error = req.app.get('env') === 'development' ? err : {};\n//   // render the error page\n//   res.status(err.status || 500);\n//   res.render('error');\n// });\n\nconst {\n  MongoClient\n} = require('mongodb');\n\nlet url = \"mongodb://localhost:27017/\";\n\nfunction startServer(port) {\n  let server = app.listen(8888, () => {\n    let host = server.address().address;\n    let port = server.address().port;\n    console.log(`Lyssnar på http://${host}:${port}`);\n  });\n  return server;\n}\n\nfunction clearDatabase() {\n  MongoClient.dropDatabase();\n}\n/*\nlet server = app.listen(8888, () => {\n  let host = server.address().address\n  let port = server.address().port\n  console.log(`Lyssnar på http://${host}:${port}`)\n })*/\n\n\nstartServer();\nmodule.exports = startServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJjcmVhdGVFcnJvciIsInJlcXVpcmUiLCJleHByZXNzIiwicGF0aCIsImNvb2tpZVBhcnNlciIsImxvZ2dlciIsImluZGV4Um91dGVyIiwidXNlcnNSb3V0ZXIiLCJhcHAiLCJzZXQiLCJqb2luIiwiX19kaXJuYW1lIiwidXNlIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInN0YXRpYyIsIk1vbmdvQ2xpZW50IiwidXJsIiwic3RhcnRTZXJ2ZXIiLCJwb3J0Iiwic2VydmVyIiwibGlzdGVuIiwiaG9zdCIsImFkZHJlc3MiLCJjb25zb2xlIiwibG9nIiwiY2xlYXJEYXRhYmFzZSIsImRyb3BEYXRhYmFzZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLFdBQVcsR0FBR0MsT0FBTyxDQUFDLGFBQUQsQ0FBekI7O0FBQ0EsSUFBSUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFDQSxJQUFJRSxJQUFJLEdBQUdGLE9BQU8sQ0FBQyxNQUFELENBQWxCOztBQUNBLElBQUlHLFlBQVksR0FBR0gsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSUksTUFBTSxHQUFHSixPQUFPLENBQUMsUUFBRCxDQUFwQjs7QUFFQSxJQUFJSyxXQUFXLEdBQUdMLE9BQU8sQ0FBQyxnQkFBRCxDQUF6Qjs7QUFDQSxJQUFJTSxXQUFXLEdBQUdOLE9BQU8sQ0FBQyxnQkFBRCxDQUF6Qjs7QUFFQSxJQUFJTyxHQUFHLEdBQUdOLE9BQU8sRUFBakIsQyxDQUVBOztBQUNBTSxHQUFHLENBQUNDLEdBQUosQ0FBUSxPQUFSLEVBQWlCTixJQUFJLENBQUNPLElBQUwsQ0FBVUMsU0FBVixFQUFxQixPQUFyQixDQUFqQjtBQUNBSCxHQUFHLENBQUNDLEdBQUosQ0FBUSxhQUFSLEVBQXVCLE1BQXZCO0FBRUFELEdBQUcsQ0FBQ0ksR0FBSixDQUFRUCxNQUFNLENBQUMsS0FBRCxDQUFkO0FBQ0FHLEdBQUcsQ0FBQ0ksR0FBSixDQUFRVixPQUFPLENBQUNXLElBQVIsRUFBUjtBQUNBTCxHQUFHLENBQUNJLEdBQUosQ0FBUVYsT0FBTyxDQUFDWSxVQUFSLENBQW1CO0FBQUVDLEVBQUFBLFFBQVEsRUFBRTtBQUFaLENBQW5CLENBQVI7QUFDQVAsR0FBRyxDQUFDSSxHQUFKLENBQVFSLFlBQVksRUFBcEI7QUFDQUksR0FBRyxDQUFDSSxHQUFKLENBQVFWLE9BQU8sQ0FBQ2MsTUFBUixDQUFlYixJQUFJLENBQUNPLElBQUwsQ0FBVUMsU0FBVixFQUFxQixRQUFyQixDQUFmLENBQVI7QUFFQUgsR0FBRyxDQUFDSSxHQUFKLENBQVEsR0FBUixFQUFhTixXQUFiO0FBQ0FFLEdBQUcsQ0FBQ0ksR0FBSixDQUFRLFFBQVIsRUFBa0JMLFdBQWxCLEUsQ0FHQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQSxNQUFNO0FBQUNVLEVBQUFBO0FBQUQsSUFBZ0JoQixPQUFPLENBQUMsU0FBRCxDQUE3Qjs7QUFDQSxJQUFJaUIsR0FBRyxHQUFHLDRCQUFWOztBQUdBLFNBQVNDLFdBQVQsQ0FBcUJDLElBQXJCLEVBQTJCO0FBQ3pCLE1BQUlDLE1BQU0sR0FBR2IsR0FBRyxDQUFDYyxNQUFKLENBQVcsSUFBWCxFQUFpQixNQUFNO0FBQ2xDLFFBQUlDLElBQUksR0FBR0YsTUFBTSxDQUFDRyxPQUFQLEdBQWlCQSxPQUE1QjtBQUNBLFFBQUlKLElBQUksR0FBR0MsTUFBTSxDQUFDRyxPQUFQLEdBQWlCSixJQUE1QjtBQUNBSyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBYSxxQkFBb0JILElBQUssSUFBR0gsSUFBSyxFQUE5QztBQUNBLEdBSlcsQ0FBYjtBQUtBLFNBQU9DLE1BQVA7QUFDRDs7QUFFRCxTQUFTTSxhQUFULEdBQXlCO0FBQ3ZCVixFQUFBQSxXQUFXLENBQUNXLFlBQVo7QUFDRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUNULFdBQVc7QUFFWFUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCWCxXQUFqQiIsInNvdXJjZVJvb3QiOiIvaG9tZS92aW5haDMzMS9EZXNrdG9wL3RkcDAxMy9sYWIyLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBjcmVhdGVFcnJvciA9IHJlcXVpcmUoJ2h0dHAtZXJyb3JzJyk7XG52YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xudmFyIGNvb2tpZVBhcnNlciA9IHJlcXVpcmUoJ2Nvb2tpZS1wYXJzZXInKTtcbnZhciBsb2dnZXIgPSByZXF1aXJlKCdtb3JnYW4nKTtcblxudmFyIGluZGV4Um91dGVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvaW5kZXgnKTtcbnZhciB1c2Vyc1JvdXRlciA9IHJlcXVpcmUoJy4vcm91dGVzL3VzZXJzJyk7XG5cbnZhciBhcHAgPSBleHByZXNzKCk7XG5cbi8vIHZpZXcgZW5naW5lIHNldHVwXG5hcHAuc2V0KCd2aWV3cycsIHBhdGguam9pbihfX2Rpcm5hbWUsICd2aWV3cycpKTtcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2phZGUnKTtcblxuYXBwLnVzZShsb2dnZXIoJ2RldicpKTtcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xuYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICdwdWJsaWMnKSkpO1xuXG5hcHAudXNlKCcvJywgaW5kZXhSb3V0ZXIpO1xuYXBwLnVzZSgnL3VzZXJzJywgdXNlcnNSb3V0ZXIpO1xuXG5cbi8vIGNhdGNoIDQwNCBhbmQgZm9yd2FyZCB0byBlcnJvciBoYW5kbGVyIC8vYW52w6RuZCBpbnRlIVxuLy8gYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuLy8gICBuZXh0KGNyZWF0ZUVycm9yKDQwNCkpO1xuLy8gfSk7XG5cbi8vIGVycm9yIGhhbmRsZXJcbi8vIGFwcC51c2UoZnVuY3Rpb24oZXJyLCByZXEsIHJlcywgbmV4dCkge1xuLy8gICAvLyBzZXQgbG9jYWxzLCBvbmx5IHByb3ZpZGluZyBlcnJvciBpbiBkZXZlbG9wbWVudFxuLy8gICByZXMubG9jYWxzLm1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcbi8vICAgcmVzLmxvY2Fscy5lcnJvciA9IHJlcS5hcHAuZ2V0KCdlbnYnKSA9PT0gJ2RldmVsb3BtZW50JyA/IGVyciA6IHt9O1xuXG4vLyAgIC8vIHJlbmRlciB0aGUgZXJyb3IgcGFnZVxuLy8gICByZXMuc3RhdHVzKGVyci5zdGF0dXMgfHwgNTAwKTtcbi8vICAgcmVzLnJlbmRlcignZXJyb3InKTtcbi8vIH0pO1xuXG5cbmNvbnN0IHtNb25nb0NsaWVudH0gPSByZXF1aXJlKCdtb25nb2RiJyk7XG5sZXQgdXJsID0gXCJtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L1wiO1xuXG5cbmZ1bmN0aW9uIHN0YXJ0U2VydmVyKHBvcnQpIHtcbiAgbGV0IHNlcnZlciA9IGFwcC5saXN0ZW4oODg4OCwgKCkgPT4ge1xuICAgIGxldCBob3N0ID0gc2VydmVyLmFkZHJlc3MoKS5hZGRyZXNzXG4gICAgbGV0IHBvcnQgPSBzZXJ2ZXIuYWRkcmVzcygpLnBvcnRcbiAgICBjb25zb2xlLmxvZyhgTHlzc25hciBww6UgaHR0cDovLyR7aG9zdH06JHtwb3J0fWApXG4gICB9KVxuICByZXR1cm4oc2VydmVyKVxufVxuXG5mdW5jdGlvbiBjbGVhckRhdGFiYXNlKCkge1xuICBNb25nb0NsaWVudC5kcm9wRGF0YWJhc2UoKTtcbn1cbi8qXG5sZXQgc2VydmVyID0gYXBwLmxpc3Rlbig4ODg4LCAoKSA9PiB7XG4gIGxldCBob3N0ID0gc2VydmVyLmFkZHJlc3MoKS5hZGRyZXNzXG4gIGxldCBwb3J0ID0gc2VydmVyLmFkZHJlc3MoKS5wb3J0XG4gIGNvbnNvbGUubG9nKGBMeXNzbmFyIHDDpSBodHRwOi8vJHtob3N0fToke3BvcnR9YClcbiB9KSovXG5cbiBzdGFydFNlcnZlcigpXG5cbiBtb2R1bGUuZXhwb3J0cyA9IHN0YXJ0U2VydmVyOyJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "createError",
        "require",
        "express",
        "path",
        "cookieParser",
        "logger",
        "indexRouter",
        "usersRouter",
        "app",
        "set",
        "join",
        "__dirname",
        "use",
        "json",
        "urlencoded",
        "extended",
        "static",
        "MongoClient",
        "url",
        "startServer",
        "port",
        "server",
        "listen",
        "host",
        "address",
        "console",
        "log",
        "clearDatabase",
        "dropDatabase",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIG,YAAY,GAAGH,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAII,MAAM,GAAGJ,OAAO,CAAC,QAAD,CAApB;;AAEA,IAAIK,WAAW,GAAGL,OAAO,CAAC,gBAAD,CAAzB;;AACA,IAAIM,WAAW,GAAGN,OAAO,CAAC,gBAAD,CAAzB;;AAEA,IAAIO,GAAG,GAAGN,OAAO,EAAjB,C,CAEA;;AACAM,GAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiBN,IAAI,CAACO,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAjB;AACAH,GAAG,CAACC,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;AAEAD,GAAG,CAACI,GAAJ,CAAQP,MAAM,CAAC,KAAD,CAAd;AACAG,GAAG,CAACI,GAAJ,CAAQV,OAAO,CAACW,IAAR,EAAR;AACAL,GAAG,CAACI,GAAJ,CAAQV,OAAO,CAACY,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAP,GAAG,CAACI,GAAJ,CAAQR,YAAY,EAApB;AACAI,GAAG,CAACI,GAAJ,CAAQV,OAAO,CAACc,MAAR,CAAeb,IAAI,CAACO,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAR;AAEAH,GAAG,CAACI,GAAJ,CAAQ,GAAR,EAAaN,WAAb;AACAE,GAAG,CAACI,GAAJ,CAAQ,QAAR,EAAkBL,WAAlB,E,CAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAGA,MAAM;AAACU,EAAAA;AAAD,IAAgBhB,OAAO,CAAC,SAAD,CAA7B;;AACA,IAAIiB,GAAG,GAAG,4BAAV;;AAGA,SAASC,WAAT,CAAqBC,IAArB,EAA2B;AACzB,MAAIC,MAAM,GAAGb,GAAG,CAACc,MAAJ,CAAW,IAAX,EAAiB,MAAM;AAClC,QAAIC,IAAI,GAAGF,MAAM,CAACG,OAAP,GAAiBA,OAA5B;AACA,QAAIJ,IAAI,GAAGC,MAAM,CAACG,OAAP,GAAiBJ,IAA5B;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAa,qBAAoBH,IAAK,IAAGH,IAAK,EAA9C;AACA,GAJW,CAAb;AAKA,SAAOC,MAAP;AACD;;AAED,SAASM,aAAT,GAAyB;AACvBV,EAAAA,WAAW,CAACW,YAAZ;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAECT,WAAW;AAEXU,MAAM,CAACC,OAAP,GAAiBX,WAAjB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab2/",
      "sourcesContent": [
        "var createError = require('http-errors');\nvar express = require('express');\nvar path = require('path');\nvar cookieParser = require('cookie-parser');\nvar logger = require('morgan');\n\nvar indexRouter = require('./routes/index');\nvar usersRouter = require('./routes/users');\n\nvar app = express();\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\n\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.use('/', indexRouter);\napp.use('/users', usersRouter);\n\n\n// catch 404 and forward to error handler //använd inte!\n// app.use(function(req, res, next) {\n//   next(createError(404));\n// });\n\n// error handler\n// app.use(function(err, req, res, next) {\n//   // set locals, only providing error in development\n//   res.locals.message = err.message;\n//   res.locals.error = req.app.get('env') === 'development' ? err : {};\n\n//   // render the error page\n//   res.status(err.status || 500);\n//   res.render('error');\n// });\n\n\nconst {MongoClient} = require('mongodb');\nlet url = \"mongodb://localhost:27017/\";\n\n\nfunction startServer(port) {\n  let server = app.listen(8888, () => {\n    let host = server.address().address\n    let port = server.address().port\n    console.log(`Lyssnar på http://${host}:${port}`)\n   })\n  return(server)\n}\n\nfunction clearDatabase() {\n  MongoClient.dropDatabase();\n}\n/*\nlet server = app.listen(8888, () => {\n  let host = server.address().address\n  let port = server.address().port\n  console.log(`Lyssnar på http://${host}:${port}`)\n })*/\n\n startServer()\n\n module.exports = startServer;"
      ]
    },
    "sourceType": "module",
    "mtime": 1632555136045
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/lab2/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/lab2\",\"filename\":\"/home/vinah331/Desktop/tdp013/lab2/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/lab2\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab2/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/lab2",
      "filename": "/home/vinah331/Desktop/tdp013/lab2/routes/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/lab2",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/lab2/routes/index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/lab2/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/lab2/routes/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nconst app = express();\nvar router = express.Router();\n\nconst {\n  MongoClient\n} = require('mongodb');\n\nlet sanitize = require('mongo-sanitize');\n\nlet url = \"mongodb://localhost:27017/\";\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\nrouter.all('/messages', function (req, res, next) {\n  if (req.method == \"POST\" || req.method == \"GET\") {\n    //Kolla om get har en body?\n    if (req.method == \"GET\" && req.body) {\n      res.sendStatus(405);\n    }\n\n    next();\n  } else {\n    //console.log(req.method)\n    res.sendStatus(405);\n  }\n});\nrouter.all('/messages/:id', function (req, res, next) {\n  //console.log(\"1\")\n  if (req.method == \"PATCH\" || req.method == \"GET\") {\n    next();\n  } else {\n    res.sendStatus(405);\n  }\n}); //------------------------------------------------------------------\n//Save one\n\nrouter.post('/messages', (req, res) => {\n  if (validateMsg(req.body)) {\n    msg = sanitize(req.body);\n    const regex = new RegExp(/<script>/); //injection?\n\n    if (!regex.test(msg)) {\n      //console.log(req.body)\n      MongoClient.connect(url, (err, db) => {\n        let dbo = db.db(\"tdp013\");\n        dbo.collection('messages').insertOne(msg, function (err, result) {\n          if (err) {} else {\n            db.close();\n            res.sendStatus(200);\n          }\n        });\n      });\n    } else {\n      res.sendStatus(500);\n    }\n  } else {\n    res.sendStatus(500);\n  }\n});\n\nfunction validateMsg(body) {\n  if (body.msg.length === 0 || body.msg.length > 140) {\n    return false;\n  }\n\n  if (!(typeof body.id == \"number\")) {\n    return false;\n  }\n\n  if (typeof body.state !== \"boolean\") {\n    return false;\n  }\n\n  return true;\n} //------------------------------------------------------------------\n//Mark read\n\n\nrouter.patch('/messages/:id', (req, res) => {\n  let msgId = sanitize(req.params.id); //console.log(\"in patch function with value \" + msgId)\n\n  const regex = new RegExp(/\\D+/);\n\n  if (regex.test(msgId)) {\n    res.sendStatus(400);\n  } else {\n    MongoClient.connect(url, (err, db) => {\n      let dbo = db.db(\"tdp013\");\n      let myquery = {\n        id: msgId\n      };\n      dbo.collection(\"messages\").findOne(myquery, function (err, result) {\n        if (err) {\n          res.sendStatus(500);\n        } else if (result != null) {\n          //If we find a result\n          let newvalues = {\n            $set: {\n              state: !result.state\n            }\n          };\n          dbo.collection(\"messages\").updateOne(myquery, newvalues, function (err, result2) {\n            if (err) {\n              db.close();\n              res.sendStatus(500);\n            } else {\n              db.close();\n              res.sendStatus(200);\n            }\n          });\n        } else {\n          //If we dont find a result\n          res.sendStatus(500);\n          db.close();\n        }\n      });\n    });\n  }\n}); //------------------------------------------------------------------\n//Get all\n\nrouter.get('/messages', (req, res) => {\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tdp013\");\n    dbo.collection('messages').find({}).toArray(function (err, result) {\n      db.close();\n\n      if (err) {//console.log(err)\n      } else if (result != null) {\n        //console.log(result)\n        res.send(result);\n      } else {\n        res.sendStatus(500);\n      }\n    });\n  }); //res.send()\n}); //------------------------------------------------------------------\n// Get one\n\nrouter.get('/messages/:id', (req, res) => {\n  let msgId = sanitize(req.params.id);\n  const regex = new RegExp(/\\D+/);\n\n  if (regex.test(msgId)) {\n    res.sendStatus(400);\n  } else {\n    MongoClient.connect(url, (err, db) => {\n      let dbo = db.db(\"tdp013\");\n      let myquery = {\n        id: msgId\n      };\n      dbo.collection(\"messages\").findOne(myquery, function (err, result) {\n        db.close();\n\n        if (err) {//console.log(err)\n        } else if (result != null) {\n          res.send(result); //.json(result)\n        } else {\n          res.sendStatus(500);\n        }\n      });\n    });\n  }\n});\napp.use(function (req, res) {\n  //console.log(\"found it\")\n  res.send(\"Sorry can't find that!\", 404);\n});\nmodule.exports = router;\n/*använd asynkrona anrop för att hämta och lagra data. \nKan ta in en resolve och reject funktion. \nMed detta kan vi skicka rätt felmeddelanden.\nen backend fil som hanterar logik\nen testfil som representerar klient-logiken \n(alltså om vi klickar på en knapp kommer meddelande x\nskickas t.ex)*/\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiYXBwIiwicm91dGVyIiwiUm91dGVyIiwiTW9uZ29DbGllbnQiLCJzYW5pdGl6ZSIsInVybCIsInVzZSIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJhbGwiLCJyZXEiLCJyZXMiLCJuZXh0IiwibWV0aG9kIiwiYm9keSIsInNlbmRTdGF0dXMiLCJwb3N0IiwidmFsaWRhdGVNc2ciLCJtc2ciLCJyZWdleCIsIlJlZ0V4cCIsInRlc3QiLCJjb25uZWN0IiwiZXJyIiwiZGIiLCJkYm8iLCJjb2xsZWN0aW9uIiwiaW5zZXJ0T25lIiwicmVzdWx0IiwiY2xvc2UiLCJsZW5ndGgiLCJpZCIsInN0YXRlIiwicGF0Y2giLCJtc2dJZCIsInBhcmFtcyIsIm15cXVlcnkiLCJmaW5kT25lIiwibmV3dmFsdWVzIiwiJHNldCIsInVwZGF0ZU9uZSIsInJlc3VsdDIiLCJnZXQiLCJmaW5kIiwidG9BcnJheSIsInNlbmQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUNBLE1BQU1DLEdBQUcsR0FBR0YsT0FBTyxFQUFuQjtBQUNBLElBQUlHLE1BQU0sR0FBR0gsT0FBTyxDQUFDSSxNQUFSLEVBQWI7O0FBQ0EsTUFBTTtBQUFDQyxFQUFBQTtBQUFELElBQWdCSixPQUFPLENBQUMsU0FBRCxDQUE3Qjs7QUFDQSxJQUFJSyxRQUFRLEdBQUdMLE9BQU8sQ0FBQyxnQkFBRCxDQUF0Qjs7QUFDQSxJQUFJTSxHQUFHLEdBQUcsNEJBQVY7QUFFQUwsR0FBRyxDQUFDTSxHQUFKLENBQVFSLE9BQU8sQ0FBQ1MsSUFBUixFQUFSO0FBQ0FQLEdBQUcsQ0FBQ00sR0FBSixDQUFRUixPQUFPLENBQUNVLFVBQVIsQ0FBbUI7QUFBRUMsRUFBQUEsUUFBUSxFQUFFO0FBQVosQ0FBbkIsQ0FBUjtBQUdBUixNQUFNLENB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QUNELENBSEQ7QUFNQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCL0MsTUFBakI7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIvaG9tZS92aW5haDMzMS9EZXNrdG9wL3RkcDAxMy9sYWIyL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbnZhciByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuY29uc3Qge01vbmdvQ2xpZW50fSA9IHJlcXVpcmUoJ21vbmdvZGInKTtcbmxldCBzYW5pdGl6ZSA9IHJlcXVpcmUoJ21vbmdvLXNhbml0aXplJyk7XG5sZXQgdXJsID0gXCJtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L1wiO1xuXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcblxuXG5yb3V0ZXIuYWxsKCcvbWVzc2FnZXMnLCBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICBpZihyZXEubWV0aG9kID09IFwiUE9TVFwiIHx8IHJlcS5tZXRob2QgPT0gXCJHRVRcIikge1xuICAgIC8vS29sbGEgb20gZ2V0IGhhciBlbiBib2R5P1xuICAgIGlmIChyZXEubWV0aG9kID09IFwiR0VUXCIgJiYgcmVxLmJvZHkpIHtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNDA1KVxuICAgIH1cbiAgICBuZXh0KCk7XG4gIH0gZWxzZSB7XG4gICAgLy9jb25zb2xlLmxvZyhyZXEubWV0aG9kKVxuICAgIHJlcy5zZW5kU3RhdHVzKDQwNSlcbiAgfVxufSlcblxucm91dGVyLmFsbCgnL21lc3NhZ2VzLzppZCcsIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIC8vY29uc29sZS5sb2coXCIxXCIpXG4gIGlmKHJlcS5tZXRob2QgPT0gXCJQQVRDSFwiIHx8IHJlcS5tZXRob2QgPT0gXCJHRVRcIikge1xuICAgIG5leHQoKTtcbiAgfSBlbHNlIHtcbiAgICByZXMuc2VuZFN0YXR1cyg0MDUpXG4gIH1cbn0pXG5cblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vU2F2ZSBvbmVcblxucm91dGVyLnBvc3QoJy9tZXNzYWdlcycsIChyZXEsIHJlcykgPT4ge1xuICBpZiAodmFsaWRhdGVNc2cocmVxLmJvZHkpKSB7XG4gICAgbXNnID0gc2FuaXRpemUocmVxLmJvZHkpXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKC88c2NyaXB0Pi8pICAvL2luamVjdGlvbj9cbiAgICBpZiAoIXJlZ2V4LnRlc3QobXNnKSkge1xuICAgICAgLy9jb25zb2xlLmxvZyhyZXEuYm9keSlcbiAgICAgIE1vbmdvQ2xpZW50LmNvbm5lY3QodXJsLCAoZXJyLCBkYikgPT4ge1xuICAgICAgICBsZXQgZGJvID0gZGIuZGIoXCJ0ZHAwMTNcIik7XG4gICAgICAgIGRiby5jb2xsZWN0aW9uKCdtZXNzYWdlcycpLmluc2VydE9uZShtc2csIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgaWYgKGVycikge31cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICByZXMuc2VuZFN0YXR1cygyMDApXG4gICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gIH1cbiAgXG59KVxuXG5mdW5jdGlvbiB2YWxpZGF0ZU1zZyhib2R5KSB7XG5cbiAgaWYgKGJvZHkubXNnLmxlbmd0aCA9PT0gMCB8fCBib2R5Lm1zZy5sZW5ndGggPiAxNDApIHsgcmV0dXJuIGZhbHNlIH1cbiAgaWYgKCEodHlwZW9mKGJvZHkuaWQpID09IFwibnVtYmVyXCIpKSAgICAgICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIGZhbHNlIH1cbiAgaWYgKHR5cGVvZihib2R5LnN0YXRlKSAhPT0gXCJib29sZWFuXCIpICAgICAgICAgICAgICAgICB7IHJldHVybiBmYWxzZSB9XG4gIHJldHVybiB0cnVlXG59XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vL01hcmsgcmVhZFxucm91dGVyLnBhdGNoKCgnL21lc3NhZ2VzLzppZCcpLCAocmVxLCByZXMpID0+IHtcblxuICBsZXQgbXNnSWQgPSBzYW5pdGl6ZShyZXEucGFyYW1zLmlkKVxuICAvL2NvbnNvbGUubG9nKFwiaW4gcGF0Y2ggZnVuY3Rpb24gd2l0aCB2YWx1ZSBcIiArIG1zZ0lkKVxuICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoL1xcRCsvKVxuXG4gIGlmIChyZWdleC50ZXN0KG1zZ0lkKSkge1xuICAgIHJlcy5zZW5kU3RhdHVzKDQwMClcblxuICB9IGVsc2Uge1xuICAgIE1vbmdvQ2xpZW50LmNvbm5lY3QodXJsLCAoZXJyLCBkYikgPT4ge1xuICAgICAgbGV0IGRibyA9IGRiLmRiKFwidGRwMDEzXCIpO1xuICAgICAgbGV0IG15cXVlcnkgPSB7IGlkOiBtc2dJZCB9O1xuICAgICAgXG4gICAgICBkYm8uY29sbGVjdGlvbihcIm1lc3NhZ2VzXCIpLmZpbmRPbmUobXlxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgfSBcbiAgICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICAvL0lmIHdlIGZpbmQgYSByZXN1bHRcbiAgICAgICAgICBsZXQgbmV3dmFsdWVzID0geyAkc2V0OiB7c3RhdGU6ICEocmVzdWx0LnN0YXRlKX0gfTtcbiAgICAgICAgICBcbiAgICAgICAgICBkYm8uY29sbGVjdGlvbihcIm1lc3NhZ2VzXCIpLnVwZGF0ZU9uZShteXF1ZXJ5LCBuZXd2YWx1ZXMsIGZ1bmN0aW9uKGVyciwgcmVzdWx0Mikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoMjAwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvL0lmIHdlIGRvbnQgZmluZCBhIHJlc3VsdFxuICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgIH0pO1xuICB9XG59KVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9HZXQgYWxsXG5yb3V0ZXIuZ2V0KCgnL21lc3NhZ2VzJyksIChyZXEsIHJlcykgPT4ge1xuXG4gIE1vbmdvQ2xpZW50LmNvbm5lY3QodXJsLCAoZXJyLCBkYikgPT4ge1xuICAgIGxldCBkYm8gPSBkYi5kYihcInRkcDAxM1wiKTtcblxuICAgIGRiby5jb2xsZWN0aW9uKCdtZXNzYWdlcycpLmZpbmQoe30pLnRvQXJyYXkoZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGRiLmNsb3NlKCk7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXN1bHQpXG4gICAgICAgIHJlcy5zZW5kKHJlc3VsdClcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgfSlcbiAgLy9yZXMuc2VuZCgpXG59KVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gR2V0IG9uZVxucm91dGVyLmdldCgoJy9tZXNzYWdlcy86aWQnKSwgKHJlcSwgcmVzKSA9PiB7XG4gIGxldCBtc2dJZCA9IHNhbml0aXplKHJlcS5wYXJhbXMuaWQpXG4gIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCgvXFxEKy8pXG4gIGlmIChyZWdleC50ZXN0KG1zZ0lkKSkge1xuICAgIHJlcy5zZW5kU3RhdHVzKDQwMClcbiAgfSBlbHNlIHtcblxuICAgIE1vbmdvQ2xpZW50LmNvbm5lY3QodXJsLCAoZXJyLCBkYikgPT4ge1xuICAgICAgbGV0IGRibyA9IGRiLmRiKFwidGRwMDEzXCIpO1xuICAgICAgbGV0IG15cXVlcnkgPSB7IGlkOiBtc2dJZCB9O1xuXG4gICAgICBkYm8uY29sbGVjdGlvbihcIm1lc3NhZ2VzXCIpLmZpbmRPbmUobXlxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIC8vY29uc29sZS5sb2coZXJyKVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgcmVzLnNlbmQocmVzdWx0KS8vLmpzb24ocmVzdWx0KVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn0pXG5cbmFwcC51c2UoZnVuY3Rpb24gKHJlcSwgcmVzKSB7XG4gIC8vY29uc29sZS5sb2coXCJmb3VuZCBpdFwiKVxuICByZXMuc2VuZChcIlNvcnJ5IGNhbid0IGZpbmQgdGhhdCFcIiwgNDA0KVxufSlcblxuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcblxuXG4vKmFudsOkbmQgYXN5bmtyb25hIGFucm9wIGbDtnIgYXR0IGjDpG10YSBvY2ggbGFncmEgZGF0YS4gXG5LYW4gdGEgaW4gZW4gcmVzb2x2ZSBvY2ggcmVqZWN0IGZ1bmt0aW9uLiBcbk1lZCBkZXR0YSBrYW4gdmkgc2tpY2thIHLDpHR0IGZlbG1lZGRlbGFuZGVuLlxuZW4gYmFja2VuZCBmaWwgc29tIGhhbnRlcmFyIGxvZ2lrXG5lbiB0ZXN0ZmlsIHNvbSByZXByZXNlbnRlcmFyIGtsaWVudC1sb2dpa2VuIFxuKGFsbHRzw6Ugb20gdmkga2xpY2thciBww6UgZW4ga25hcHAga29tbWVyIG1lZGRlbGFuZGUgeFxuc2tpY2thcyB0LmV4KSovXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "express",
        "require",
        "app",
        "router",
        "Router",
        "MongoClient",
        "sanitize",
        "url",
        "use",
        "json",
        "urlencoded",
        "extended",
        "all",
        "req",
        "res",
        "next",
        "method",
        "body",
        "sendStatus",
        "post",
        "validateMsg",
        "msg",
        "regex",
        "RegExp",
        "test",
        "connect",
        "err",
        "db",
        "dbo",
        "collection",
        "insertOne",
        "result",
        "close",
        "length",
        "id",
        "state",
        "patch",
        "msgId",
        "params",
        "myquery",
        "findOne",
        "newvalues",
        "$set",
        "updateOne",
        "result2",
        "get",
        "find",
        "toArray",
        "send",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab2/routes/",
      "sourcesContent": [
        "var express = require('express');\nconst app = express();\nvar router = express.Router();\nconst {MongoClient} = require('mongodb');\nlet sanitize = require('mongo-sanitize');\nlet url = \"mongodb://localhost:27017/\";\n\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n\nrouter.all('/messages', function(req, res, next) {\n  if(req.method == \"POST\" || req.method == \"GET\") {\n    //Kolla om get har en body?\n    if (req.method == \"GET\" && req.body) {\n        res.sendStatus(405)\n    }\n    next();\n  } else {\n    //console.log(req.method)\n    res.sendStatus(405)\n  }\n})\n\nrouter.all('/messages/:id', function(req, res, next) {\n  //console.log(\"1\")\n  if(req.method == \"PATCH\" || req.method == \"GET\") {\n    next();\n  } else {\n    res.sendStatus(405)\n  }\n})\n\n\n//------------------------------------------------------------------\n//Save one\n\nrouter.post('/messages', (req, res) => {\n  if (validateMsg(req.body)) {\n    msg = sanitize(req.body)\n    const regex = new RegExp(/<script>/)  //injection?\n    if (!regex.test(msg)) {\n      //console.log(req.body)\n      MongoClient.connect(url, (err, db) => {\n        let dbo = db.db(\"tdp013\");\n        dbo.collection('messages').insertOne(msg, function(err, result) {\n          if (err) {}\n          else {\n            db.close();\n            res.sendStatus(200)\n          }\n\n        });\n      });\n    }\n    else {\n      res.sendStatus(500)\n    }\n  } else {\n    res.sendStatus(500)\n  }\n  \n})\n\nfunction validateMsg(body) {\n\n  if (body.msg.length === 0 || body.msg.length > 140) { return false }\n  if (!(typeof(body.id) == \"number\"))                        { return false }\n  if (typeof(body.state) !== \"boolean\")                 { return false }\n  return true\n}\n\n//------------------------------------------------------------------\n//Mark read\nrouter.patch(('/messages/:id'), (req, res) => {\n\n  let msgId = sanitize(req.params.id)\n  //console.log(\"in patch function with value \" + msgId)\n  const regex = new RegExp(/\\D+/)\n\n  if (regex.test(msgId)) {\n    res.sendStatus(400)\n\n  } else {\n    MongoClient.connect(url, (err, db) => {\n      let dbo = db.db(\"tdp013\");\n      let myquery = { id: msgId };\n      \n      dbo.collection(\"messages\").findOne(myquery, function(err, result) {\n        if (err) {\n          res.sendStatus(500)\n        } \n        else if (result != null) {\n          //If we find a result\n          let newvalues = { $set: {state: !(result.state)} };\n          \n          dbo.collection(\"messages\").updateOne(myquery, newvalues, function(err, result2) {\n            if (err) {\n              db.close();\n              res.sendStatus(500)\n            }\n            else {\n              db.close();\n              res.sendStatus(200)\n            }\n          });\n        } \n        else {\n          //If we dont find a result\n          res.sendStatus(500)\n          db.close();\n        }\n      });\n      \n    });\n  }\n})\n\n//------------------------------------------------------------------\n//Get all\nrouter.get(('/messages'), (req, res) => {\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tdp013\");\n\n    dbo.collection('messages').find({}).toArray(function(err, result) {\n      db.close();\n      if (err) {\n        //console.log(err)\n      }\n      else if (result != null) {\n        //console.log(result)\n        res.send(result)\n      }\n      else {\n        res.sendStatus(500)\n      }\n    })\n    \n  })\n  //res.send()\n})\n\n//------------------------------------------------------------------\n// Get one\nrouter.get(('/messages/:id'), (req, res) => {\n  let msgId = sanitize(req.params.id)\n  const regex = new RegExp(/\\D+/)\n  if (regex.test(msgId)) {\n    res.sendStatus(400)\n  } else {\n\n    MongoClient.connect(url, (err, db) => {\n      let dbo = db.db(\"tdp013\");\n      let myquery = { id: msgId };\n\n      dbo.collection(\"messages\").findOne(myquery, function(err, result) {\n        db.close();\n        if (err) {\n          //console.log(err)\n        }\n        else if (result != null) {\n          res.send(result)//.json(result)\n        }\n        else {\n          res.sendStatus(500)\n        }\n      });\n    });\n  }\n})\n\napp.use(function (req, res) {\n  //console.log(\"found it\")\n  res.send(\"Sorry can't find that!\", 404)\n})\n\n\nmodule.exports = router;\n\n\n/*använd asynkrona anrop för att hämta och lagra data. \nKan ta in en resolve och reject funktion. \nMed detta kan vi skicka rätt felmeddelanden.\nen backend fil som hanterar logik\nen testfil som representerar klient-logiken \n(alltså om vi klickar på en knapp kommer meddelande x\nskickas t.ex)*/\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1632488276883
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/lab2/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/lab2\",\"filename\":\"/home/vinah331/Desktop/tdp013/lab2/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/lab2\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab2/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/lab2",
      "filename": "/home/vinah331/Desktop/tdp013/lab2/routes/users.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/lab2",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/lab2/routes/users.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/lab2/routes/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/lab2/routes/",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nvar router = express.Router();\n/* GET users listing. */\n\nrouter.get('/', function (req, res, next) {\n  res.send('respond with a resource');\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInNlbmQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUNBLElBQUlDLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFSLEVBQWI7QUFFQTs7QUFDQUQsTUFBTSxDQUFDRSxHQUFQLENBQVcsR0FBWCxFQUFnQixVQUFTQyxHQUFULEVBQWNDLEdBQWQsRUFBbUJDLElBQW5CLEVBQXlCO0FBQ3ZDRCxFQUFBQSxHQUFHLENBQUNFLElBQUosQ0FBUyx5QkFBVDtBQUNELENBRkQ7QUFJQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCUixNQUFqQiIsInNvdXJjZVJvb3QiOiIvaG9tZS92aW5haDMzMS9EZXNrdG9wL3RkcDAxMy9sYWIyL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbnZhciByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4vKiBHRVQgdXNlcnMgbGlzdGluZy4gKi9cbnJvdXRlci5nZXQoJy8nLCBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICByZXMuc2VuZCgncmVzcG9uZCB3aXRoIGEgcmVzb3VyY2UnKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "express",
        "require",
        "router",
        "Router",
        "get",
        "req",
        "res",
        "next",
        "send",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb;AAEA;;AACAD,MAAM,CAACE,GAAP,CAAW,GAAX,EAAgB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACvCD,EAAAA,GAAG,CAACE,IAAJ,CAAS,yBAAT;AACD,CAFD;AAIAC,MAAM,CAACC,OAAP,GAAiBR,MAAjB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab2/routes/",
      "sourcesContent": [
        "var express = require('express');\nvar router = express.Router();\n\n/* GET users listing. */\nrouter.get('/', function(req, res, next) {\n  res.send('respond with a resource');\n});\n\nmodule.exports = router;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1631534435311
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/lab3/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/lab3\",\"filename\":\"/home/vinah331/Desktop/tdp013/lab3/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/lab3\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/lab3",
      "filename": "/home/vinah331/Desktop/tdp013/lab3/app.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/lab3",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/lab3/app.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/lab3/app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "var createError = require('http-errors');\n\nvar express = require('express');\n\nvar path = require('path');\n\nvar cookieParser = require('cookie-parser');\n\nvar logger = require('morgan');\n\nvar indexRouter = require('./routes/index');\n\nvar usersRouter = require('./routes/users');\n\nvar app = express();\n\nconst corsMiddleware = require('./cors');\n\napp.options('*', corsMiddleware);\napp.use(corsMiddleware); // view engine setup\n\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\napp.use('/', indexRouter);\napp.use('/users', usersRouter); // catch 404 and forward to error handler //använd inte!\n// app.use(function(req, res, next) {\n//   next(createError(404));\n// });\n// error handler\n// app.use(function(err, req, res, next) {\n//   // set locals, only providing error in development\n//   res.locals.message = err.message;\n//   res.locals.error = req.app.get('env') === 'development' ? err : {};\n//   // render the error page\n//   res.status(err.status || 500);\n//   res.render('error');\n// });\n\nconst {\n  MongoClient\n} = require('mongodb');\n\nlet url = \"mongodb://localhost:27017/\";\n\nfunction startServer(port) {\n  let server = app.listen(8888, () => {\n    let host = server.address().address;\n    let port = server.address().port;\n    console.log(`Lyssnar på http://${host}:${port}`);\n  });\n  return server;\n}\n\nfunction clearDatabase() {\n  MongoClient.dropDatabase();\n}\n/*\nlet server = app.listen(8888, () => {\n  let host = server.address().address\n  let port = server.address().port\n  console.log(`Lyssnar på http://${host}:${port}`)\n })*/\n\n\nstartServer();\nmodule.exports = startServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJjcmVhdGVFcnJvciIsInJlcXVpcmUiLCJleHByZXNzIiwicGF0aCIsImNvb2tpZVBhcnNlciIsImxvZ2dlciIsImluZGV4Um91dGVyIiwidXNlcnNSb3V0ZXIiLCJhcHAiLCJjb3JzTWlkZGxld2FyZSIsIm9wdGlvbnMiLCJ1c2UiLCJzZXQiLCJqb2luIiwiX19kaXJuYW1lIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInN0YXRpYyIsIk1vbmdvQ2xpZW50IiwidXJsIiwic3RhcnRTZXJ2ZXIiLCJwb3J0Iiwic2VydmVyIiwibGlzdGVuIiwiaG9zdCIsImFkZHJlc3MiLCJjb25zb2xlIiwibG9nIiwiY2xlYXJEYXRhYmFzZSIsImRyb3BEYXRhYmFzZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLFdBQVcsR0FBR0MsT0FBTyxDQUFDLGFBQUQsQ0FBekI7O0FBQ0EsSUFBSUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFDQSxJQUFJRSxJQUFJLEdBQUdGLE9BQU8sQ0FBQyxNQUFELENBQWxCOztBQUNBLElBQUlHLFlBQVksR0FBR0gsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSUksTUFBTSxHQUFHSixPQUFPLENBQUMsUUFBRCxDQUFwQjs7QUFFQSxJQUFJSyxXQUFXLEdBQUdMLE9BQU8sQ0FBQyxnQkFBRCxDQUF6Qjs7QUFDQSxJQUFJTSxXQUFXLEdBQUdOLE9BQU8sQ0FBQyxnQkFBRCxDQUF6Qjs7QUFFQSxJQUFJTyxHQUFHLEdBQUdOLE9BQU8sRUFBakI7O0FBQ0EsTUFBTU8sY0FBYyxHQUFHUixPQUFPLENBQUMsUUFBRCxDQUE5Qjs7QUFDQU8sR0FBRyxDQUFDRSxPQUFKLENBQVksR0FBWixFQUFpQkQsY0FBakI7QUFDQUQsR0FBRyxDQUFDRyxHQUFKLENBQVFGLGNBQVIsRSxDQUVBOztBQUNBRCxHQUFHLENBQUNJLEdBQUosQ0FBUSxPQUFSLEVBQWlCVCxJQUFJLENBQUNVLElBQUwsQ0FBVUMsU0FBVixFQUFxQixPQUFyQixDQUFqQjtBQUNBTixHQUFHLENBQUNJLEdBQUosQ0FBUSxhQUFSLEVBQXVCLE1BQXZCO0FBRUFKLEdBQUcsQ0FBQ0csR0FBSixDQUFRTixNQUFNLENBQUMsS0FBRCxDQUFkO0FBQ0FHLEdBQUcsQ0FBQ0csR0FBSixDQUFRVCxPQUFPLENBQUNhLElBQVIsRUFBUjtBQUNBUCxHQUFHLENBQUNHLEdBQUosQ0FBUVQsT0FBTyxDQUFDYyxVQUFSLENBQW1CO0FBQUVDLEVBQUFBLFFBQVEsRUFBRTtBQUFaLENBQW5CLENBQVI7QUFDQVQsR0FBRyxDQUFDRyxHQUFKLENBQVFQLFlBQVksRUFBcEI7QUFDQUksR0FBRyxDQUFDRyxHQUFKLENBQVFULE9BQU8sQ0FBQ2dCLE1BQVIsQ0FBZWYsSUFBSSxDQUFDVSxJQUFMLENBQVVDLFNBQVYsRUFBcUIsUUFBckIsQ0FBZixDQUFSO0FBRUFOLEdBQUcsQ0FBQ0csR0FBSixDQUFRLEdBQVIsRUFBYUwsV0FBYjtBQUNBRSxHQUFHLENBQUNHLEdBQUosQ0FBUSxRQUFSLEVBQWtCSixXQUFsQixFLENBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBR0EsTUFBTTtBQUFDWSxFQUFBQTtBQUFELElBQWdCbEIsT0FBTyxDQUFDLFNBQUQsQ0FBN0I7O0FBQ0EsSUFBSW1CLEdBQUcsR0FBRyw0QkFBVjs7QUFHQSxTQUFTQyxXQUFULENBQXFCQyxJQUFyQixFQUEyQjtBQUN6QixNQUFJQyxNQUFNLEdBQUdmLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBVyxJQUFYLEVBQWlCLE1BQU07QUFDbEMsUUFBSUMsSUFBSSxHQUFHRixNQUFNLENBQUNHLE9BQVAsR0FBaUJBLE9BQTVCO0FBQ0EsUUFBSUosSUFBSSxHQUFHQyxNQUFNLENBQUNHLE9BQVAsR0FBaUJKLElBQTVCO0FBQ0FLLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFhLHFCQUFvQkgsSUFBSyxJQUFHSCxJQUFLLEVBQTlDO0FBQ0EsR0FKVyxDQUFiO0FBS0EsU0FBT0MsTUFBUDtBQUNEOztBQUVELFNBQVNNLGFBQVQsR0FBeUI7QUFDdkJWLEVBQUFBLFdBQVcsQ0FBQ1csWUFBWjtBQUNEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQ1QsV0FBVztBQUVYVSxNQUFNLENBQUNDLE9BQVAsR0FBaUJYLFdBQWpCIiwic291cmNlUm9vdCI6Ii9ob21lL3ZpbmFoMzMxL0Rlc2t0b3AvdGRwMDEzL2xhYjMvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnaHR0cC1lcnJvcnMnKTtcbnZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgY29va2llUGFyc2VyID0gcmVxdWlyZSgnY29va2llLXBhcnNlcicpO1xudmFyIGxvZ2dlciA9IHJlcXVpcmUoJ21vcmdhbicpO1xuXG52YXIgaW5kZXhSb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcy9pbmRleCcpO1xudmFyIHVzZXJzUm91dGVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvdXNlcnMnKTtcblxudmFyIGFwcCA9IGV4cHJlc3MoKTtcbmNvbnN0IGNvcnNNaWRkbGV3YXJlID0gcmVxdWlyZSgnLi9jb3JzJyk7XG5hcHAub3B0aW9ucygnKicsIGNvcnNNaWRkbGV3YXJlKTtcbmFwcC51c2UoY29yc01pZGRsZXdhcmUpO1xuXG4vLyB2aWV3IGVuZ2luZSBzZXR1cFxuYXBwLnNldCgndmlld3MnLCBwYXRoLmpvaW4oX19kaXJuYW1lLCAndmlld3MnKSk7XG5hcHAuc2V0KCd2aWV3IGVuZ2luZScsICdqYWRlJyk7XG5cbmFwcC51c2UobG9nZ2VyKCdkZXYnKSk7XG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcbmFwcC51c2UoY29va2llUGFyc2VyKCkpO1xuYXBwLnVzZShleHByZXNzLnN0YXRpYyhwYXRoLmpvaW4oX19kaXJuYW1lLCAncHVibGljJykpKTtcblxuYXBwLnVzZSgnLycsIGluZGV4Um91dGVyKTtcbmFwcC51c2UoJy91c2VycycsIHVzZXJzUm91dGVyKTtcblxuXG4vLyBjYXRjaCA0MDQgYW5kIGZvcndhcmQgdG8gZXJyb3IgaGFuZGxlciAvL2FudsOkbmQgaW50ZSFcbi8vIGFwcC51c2UoZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcbi8vICAgbmV4dChjcmVhdGVFcnJvcig0MDQpKTtcbi8vIH0pO1xuXG4vLyBlcnJvciBoYW5kbGVyXG4vLyBhcHAudXNlKGZ1bmN0aW9uKGVyciwgcmVxLCByZXMsIG5leHQpIHtcbi8vICAgLy8gc2V0IGxvY2Fscywgb25seSBwcm92aWRpbmcgZXJyb3IgaW4gZGV2ZWxvcG1lbnRcbi8vICAgcmVzLmxvY2Fscy5tZXNzYWdlID0gZXJyLm1lc3NhZ2U7XG4vLyAgIHJlcy5sb2NhbHMuZXJyb3IgPSByZXEuYXBwLmdldCgnZW52JykgPT09ICdkZXZlbG9wbWVudCcgPyBlcnIgOiB7fTtcblxuLy8gICAvLyByZW5kZXIgdGhlIGVycm9yIHBhZ2Vcbi8vICAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzIHx8IDUwMCk7XG4vLyAgIHJlcy5yZW5kZXIoJ2Vycm9yJyk7XG4vLyB9KTtcblxuXG5jb25zdCB7TW9uZ29DbGllbnR9ID0gcmVxdWlyZSgnbW9uZ29kYicpO1xubGV0IHVybCA9IFwibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9cIjtcblxuXG5mdW5jdGlvbiBzdGFydFNlcnZlcihwb3J0KSB7XG4gIGxldCBzZXJ2ZXIgPSBhcHAubGlzdGVuKDg4ODgsICgpID0+IHtcbiAgICBsZXQgaG9zdCA9IHNlcnZlci5hZGRyZXNzKCkuYWRkcmVzc1xuICAgIGxldCBwb3J0ID0gc2VydmVyLmFkZHJlc3MoKS5wb3J0XG4gICAgY29uc29sZS5sb2coYEx5c3NuYXIgcMOlIGh0dHA6Ly8ke2hvc3R9OiR7cG9ydH1gKVxuICAgfSlcbiAgcmV0dXJuKHNlcnZlcilcbn1cblxuZnVuY3Rpb24gY2xlYXJEYXRhYmFzZSgpIHtcbiAgTW9uZ29DbGllbnQuZHJvcERhdGFiYXNlKCk7XG59XG4vKlxubGV0IHNlcnZlciA9IGFwcC5saXN0ZW4oODg4OCwgKCkgPT4ge1xuICBsZXQgaG9zdCA9IHNlcnZlci5hZGRyZXNzKCkuYWRkcmVzc1xuICBsZXQgcG9ydCA9IHNlcnZlci5hZGRyZXNzKCkucG9ydFxuICBjb25zb2xlLmxvZyhgTHlzc25hciBww6UgaHR0cDovLyR7aG9zdH06JHtwb3J0fWApXG4gfSkqL1xuXG4gc3RhcnRTZXJ2ZXIoKVxuXG4gbW9kdWxlLmV4cG9ydHMgPSBzdGFydFNlcnZlcjsiXX0=",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "createError",
        "require",
        "express",
        "path",
        "cookieParser",
        "logger",
        "indexRouter",
        "usersRouter",
        "app",
        "corsMiddleware",
        "options",
        "use",
        "set",
        "join",
        "__dirname",
        "json",
        "urlencoded",
        "extended",
        "static",
        "MongoClient",
        "url",
        "startServer",
        "port",
        "server",
        "listen",
        "host",
        "address",
        "console",
        "log",
        "clearDatabase",
        "dropDatabase",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIG,YAAY,GAAGH,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAII,MAAM,GAAGJ,OAAO,CAAC,QAAD,CAApB;;AAEA,IAAIK,WAAW,GAAGL,OAAO,CAAC,gBAAD,CAAzB;;AACA,IAAIM,WAAW,GAAGN,OAAO,CAAC,gBAAD,CAAzB;;AAEA,IAAIO,GAAG,GAAGN,OAAO,EAAjB;;AACA,MAAMO,cAAc,GAAGR,OAAO,CAAC,QAAD,CAA9B;;AACAO,GAAG,CAACE,OAAJ,CAAY,GAAZ,EAAiBD,cAAjB;AACAD,GAAG,CAACG,GAAJ,CAAQF,cAAR,E,CAEA;;AACAD,GAAG,CAACI,GAAJ,CAAQ,OAAR,EAAiBT,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAjB;AACAN,GAAG,CAACI,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;AAEAJ,GAAG,CAACG,GAAJ,CAAQN,MAAM,CAAC,KAAD,CAAd;AACAG,GAAG,CAACG,GAAJ,CAAQT,OAAO,CAACa,IAAR,EAAR;AACAP,GAAG,CAACG,GAAJ,CAAQT,OAAO,CAACc,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAT,GAAG,CAACG,GAAJ,CAAQP,YAAY,EAApB;AACAI,GAAG,CAACG,GAAJ,CAAQT,OAAO,CAACgB,MAAR,CAAef,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAR;AAEAN,GAAG,CAACG,GAAJ,CAAQ,GAAR,EAAaL,WAAb;AACAE,GAAG,CAACG,GAAJ,CAAQ,QAAR,EAAkBJ,WAAlB,E,CAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAGA,MAAM;AAACY,EAAAA;AAAD,IAAgBlB,OAAO,CAAC,SAAD,CAA7B;;AACA,IAAImB,GAAG,GAAG,4BAAV;;AAGA,SAASC,WAAT,CAAqBC,IAArB,EAA2B;AACzB,MAAIC,MAAM,GAAGf,GAAG,CAACgB,MAAJ,CAAW,IAAX,EAAiB,MAAM;AAClC,QAAIC,IAAI,GAAGF,MAAM,CAACG,OAAP,GAAiBA,OAA5B;AACA,QAAIJ,IAAI,GAAGC,MAAM,CAACG,OAAP,GAAiBJ,IAA5B;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAa,qBAAoBH,IAAK,IAAGH,IAAK,EAA9C;AACA,GAJW,CAAb;AAKA,SAAOC,MAAP;AACD;;AAED,SAASM,aAAT,GAAyB;AACvBV,EAAAA,WAAW,CAACW,YAAZ;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAECT,WAAW;AAEXU,MAAM,CAACC,OAAP,GAAiBX,WAAjB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/",
      "sourcesContent": [
        "var createError = require('http-errors');\nvar express = require('express');\nvar path = require('path');\nvar cookieParser = require('cookie-parser');\nvar logger = require('morgan');\n\nvar indexRouter = require('./routes/index');\nvar usersRouter = require('./routes/users');\n\nvar app = express();\nconst corsMiddleware = require('./cors');\napp.options('*', corsMiddleware);\napp.use(corsMiddleware);\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\n\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.use('/', indexRouter);\napp.use('/users', usersRouter);\n\n\n// catch 404 and forward to error handler //använd inte!\n// app.use(function(req, res, next) {\n//   next(createError(404));\n// });\n\n// error handler\n// app.use(function(err, req, res, next) {\n//   // set locals, only providing error in development\n//   res.locals.message = err.message;\n//   res.locals.error = req.app.get('env') === 'development' ? err : {};\n\n//   // render the error page\n//   res.status(err.status || 500);\n//   res.render('error');\n// });\n\n\nconst {MongoClient} = require('mongodb');\nlet url = \"mongodb://localhost:27017/\";\n\n\nfunction startServer(port) {\n  let server = app.listen(8888, () => {\n    let host = server.address().address\n    let port = server.address().port\n    console.log(`Lyssnar på http://${host}:${port}`)\n   })\n  return(server)\n}\n\nfunction clearDatabase() {\n  MongoClient.dropDatabase();\n}\n/*\nlet server = app.listen(8888, () => {\n  let host = server.address().address\n  let port = server.address().port\n  console.log(`Lyssnar på http://${host}:${port}`)\n })*/\n\n startServer()\n\n module.exports = startServer;"
      ]
    },
    "sourceType": "module",
    "mtime": 1632659653734
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/lab3/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/lab3\",\"filename\":\"/home/vinah331/Desktop/tdp013/lab3/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/lab3\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/lab3",
      "filename": "/home/vinah331/Desktop/tdp013/lab3/routes/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/lab3",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/lab3/routes/index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/lab3/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/routes/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nconst app = express();\nvar router = express.Router();\n\nconst {\n  MongoClient\n} = require('mongodb');\n\nlet sanitize = require('mongo-sanitize');\n\nlet url = \"mongodb://localhost:27017/\";\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\nrouter.all('/messages', function (req, res, next) {\n  console.log(req.body);\n\n  if (req.method == \"POST\" || req.method == \"GET\") {\n    //Kolla om get har en body?\n    if (req.method == \"GET\" && req.body == {}) {\n      //Hur funkar det här???\n      console.log(\"failed get all\");\n      res.sendStatus(405);\n    }\n\n    next();\n  } else {\n    //console.log(req.method)\n    console.log(\"another failed get all\");\n    res.sendStatus(405);\n  }\n});\nrouter.all('/messages/:id', function (req, res, next) {\n  //console.log(\"1\")\n  if (req.method == \"PATCH\" || req.method == \"GET\") {\n    next();\n  } else {\n    res.sendStatus(405);\n  }\n}); //------------------------------------------------------------------\n//Save one\n\nrouter.post('/messages', (req, res) => {\n  console.log(req.body);\n\n  if (validateMsg(req.body)) {\n    msg = sanitize(req.body);\n    const regex = new RegExp(/<script>/); //injection?\n\n    if (!regex.test(msg)) {\n      MongoClient.connect(url, (err, db) => {\n        let dbo = db.db(\"tdp013\");\n        dbo.collection('messages').insertOne(msg, function (err, result) {\n          if (err) {\n            throw err;\n          } else {\n            db.close();\n            res.sendStatus(200);\n          }\n        });\n      });\n    } else {\n      res.sendStatus(500);\n    }\n  } else {\n    res.sendStatus(500);\n  }\n});\n\nfunction validateMsg(body) {\n  if (body.msg.length === 0 || body.msg.length > 140) {\n    return false;\n  }\n\n  if (!(typeof body.id === \"string\")) {\n    return false;\n  }\n\n  if (typeof body.state !== \"boolean\") {\n    return false;\n  }\n\n  return true;\n} //------------------------------------------------------------------\n//Mark read\n\n\nrouter.patch('/messages/:id', (req, res) => {\n  console.log(\"HERE\");\n  let msgId = sanitize(req.params.id); //console.log(\"in patch function with value \" + msgId)\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tdp013\");\n    let myquery = {\n      id: msgId\n    };\n    dbo.collection(\"messages\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        //If we find a result\n        let newvalues = {\n          $set: {\n            state: !result.state\n          }\n        };\n        dbo.collection(\"messages\").updateOne(myquery, newvalues, function (err, result2) {\n          if (err) {\n            db.close();\n            res.sendStatus(500);\n          } else {\n            db.close();\n            res.sendStatus(200);\n          }\n        });\n      } else {\n        //If we dont find a result\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); //------------------------------------------------------------------\n//Get all\n\nrouter.get('/messages', (req, res) => {\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tdp013\");\n    dbo.collection('messages').find().toArray(function (err, result) {\n      db.close();\n\n      if (err) {//console.log(err)\n      } else if (result != null) {\n        console.log(result);\n        res.send(result);\n      } else {\n        res.sendStatus(500);\n      }\n    });\n  });\n}); //------------------------------------------------------------------\n// Get one\n\nrouter.get('/messages/:id', (req, res) => {\n  let msgId = sanitize(req.params.id);\n  console.log(\"ID: \" + msgId);\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tdp013\");\n    let myquery = {\n      id: msgId\n    };\n    dbo.collection(\"messages\").findOne(myquery, function (err, result) {\n      db.close();\n\n      if (err) {//console.log(err)\n      } else if (result != null) {\n        res.json(result); //.json(result)\n      } else {\n        res.sendStatus(500);\n      }\n    });\n  });\n});\napp.use(function (req, res) {\n  //console.log(\"found it\")\n  res.send(\"Sorry can't find that!\", 404);\n});\nmodule.exports = router;\n/*använd asynkrona anrop för att hämta och lagra data. \nKan ta in en resolve och reject funktion. \nMed detta kan vi skicka rätt felmeddelanden.\nen backend fil som hanterar logik\nen testfil som representerar klient-logiken \n(alltså om vi klickar på en knapp kommer meddelande x\nskickas t.ex)*/\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiYXBwIiwicm91dGVyIiwiUm91dGVyIiwiTW9uZ29DbGllbnQiLCJzYW5pdGl6ZSIsInVybCIsInVzZSIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJhbGwiLCJyZXEiLCJyZXMiLCJuZXh0IiwiY29uc29sZSIsImxvZyIsImJvZHkiLCJtZXRob2QiLCJzZW5kU3RhdHVzIiwicG9zdCIsInZhbGlkYXRlTXNnIiwibXNnIiwicmVnZXgiLCJSZWdFeHAiLCJ0ZXN0IiwiY29ubmVjdCIsImVyciIsImRiIiwiZGJvIiwiY29sbGVjdGlvbiIsImluc2VydE9uZSIsInJlc3VsdCIsImNsb3NlIiwibGVuZ3RoIiwiaWQiLCJzdGF0ZSIsInBhdGNoIiwibXNnSWQiLCJwYXJhbXMiLCJteXF1ZXJ5IiwiZmluZE9uZSIsIm5ld3ZhbHVlcyIsIiRzZXQiLCJ1cGRhdGVPbmUiLCJyZXN1bHQyIiwiZ2V0IiwiZmluZCIsInRvQXJyYXkiLCJzZW5kIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFDQSxNQUFNQyxHQUFHLEdBQUdGLE9BQU8sRUFBbkI7QUFDQSxJQUFJRyxNQUFNLEdBQUdILE9BQU8sQ0FBQ0ksTUFBUixFQUFiOztBQUNBLE1BQU07QUFBQ0MsRUFBQUE7QUFBRCxJQUFnQkosT0FBTyxDQUFDLFNBQUQsQ0FBN0I7O0FBQ0EsSUFBSUssUUFBUSxHQUFHTCxPQUFPLENBQUMsZ0JBQUQsQ0FBdEI7O0FBQ0EsSUFBSU0sR0FBRyxHQUFHLDRCQUFWO0FBRUFMLEdBQUcsQ0FBQ00sR0FBSixDQUFRUixPQUFPLENBQUNTLElBQVIsRUFBUjtBQUNBUCxHQUFHLENBQUNNLEdBQUosQ0FBUVIsT0FBTyxDQUFDVSxVQUFSLENBQW1CO0FBQUVDLEVBQUFBLFFBQVEsRUFBRTtBQUFaLENBQW5CLENBQVI7QUFHQVIsTUFBTSxDQUFDUyxHQUFQLENBQVcsV0FBWCxFQUF3QixVQUFTQyxHQUFULEVBQWNDLEdBQWQsRUFBbUJDLElBQW5CLEVBQXlCO0FBQy9DQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUosR0FBRyxDQUFDSyxJQUFoQjs7QUFDQSxNQUFHTCxHQUFHLENBQUNNLE1BQUosSUFBYyxNQUFkLElBQXdCTixHQUFHLENBQUNNLE1BQUosSUFBYyxLQUF6QyxFQUFnRDtBQUM5QztBQUNBLFFBQUlOLEdBQUcsQ0FBQ00sTUFBSixJQUFjLEtBQWQsSUFBdUJOLEdBQUcsQ0FBQ0ssSUFBSixJQUFZLEVBQXZDLEVBQTJDO0FBQUU7QUFDM0NGLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLGdCQUFaO0FBQ0FILE1BQUFBLEdBQUcsQ0FBQ00sVUFBSixDQUFlLEdBQWY7QUFDRDs7QUFDREwsSUFBQUEsSUFBSTtBQUNMLEdBUEQsTUFPTztBQUNMO0FBQ0FDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHdCQUFaO0FBQ0FILElBQUFBLEdBQUcsQ0FBQ00sVUFBSixDQUFlLEdBQWY7QUFDRDtBQUNGLENBZEQ7QUFnQkFqQixNQUFNLENBQUNTLEdBQVAsQ0FBVyxlQUFYLEVBQTRCLFVBQVNDLEdBQVQsRUFBY0MsR0FBZCxFQUFtQkMsSUFBbkIsRUFBeUI7QUFDbkQ7QUFDQSxNQUFHRixHQUFHLENBQUNNLE1BQUosSUFBYyxPQUFkLElBQXlCTixHQUFHLENBQUNNLE1BQUosSUFBYyxLQUExQyxFQUFpRDtBQUMvQ0osSUFBQUEsSUFBSTtBQUNMLEdBRkQsTUFFTztBQUNMRCxJQUFBQSxHQUFHLENBQUNNLFVBQUosQ0FBZSxHQUFmO0FBQ0Q7QUFDRixDQVBELEUsQ0FVQTtBQUNBOztBQUVBakIsTUFBTSxDQUFDa0IsSUFBUCxDQUFZLFdBQVosRUFBeUIsQ0FBQ1IsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDckNFLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSixHQUFHLENBQUNLLElBQWhCOztBQUNBLE1BQUlJLFdBQVcsQ0FBQ1QsR0FBRyxDQUFDSyxJQUFMLENBQWYsRUFBMkI7QUFDekJLLElBQUFBLEdBQUcsR0FBR2pCLFFBQVEsQ0FBQ08sR0FBRyxDQUFDSyxJQUFMLENBQWQ7QUFDQSxVQUFNTSxLQUFLLEdBQUcsSUFBSUMsTUFBSixDQUFXLFVBQVgsQ0FBZCxDQUZ5QixDQUVhOztBQUN0QyxRQUFJLENBQUNELEtBQUssQ0FBQ0UsSUFBTixDQUFXSCxHQUFYLENBQUwsRUFBc0I7QUFDcEJsQixNQUFBQSxXQUFXLENBQUNzQixPQUFaLENBQW9CcEIsR0FBcEIsRUFBeUIsQ0FBQ3FCLEdBQUQsRUFBTUMsRUFBTixLQUFhO0FBQ3BDLFlBQUlDLEdBQUcsR0FBR0QsRUFBRSxDQUFDQSxFQUFILENBQU0sUUFBTixDQUFWO0FBQ0FDLFFBQUFBLEdBQUcsQ0FBQ0MsVUFBSixDQUFlLFVBQWYsRUFBMkJDLFNBQTNCLENBQXFDVCxHQUFyQyxFQUEwQyxVQUFTSyxHQUFULEVBQWNLLE1BQWQsRUFBc0I7QUFDOUQsY0FBSUwsR0FBSixFQUFTO0FBQUMsa0JBQU1BLEdBQU47QUFBVSxXQUFwQixNQUNLO0FBQ0hDLFlBQUFBLEVBQUUsQ0FBQ0ssS0FBSDtBQUNBcEIsWUFBQUEsR0FBRyxDQUFDTSxVQUFKLENBQWUsR0FBZjtBQUNEO0FBRUYsU0FQRDtBQVFELE9BVkQ7QUFXRCxLQVpELE1BYUs7QUFDSE4sTUFBQUEsR0FBRyxDQUFDTSxVQUFKLENBQWUsR0FBZjtBQUNEO0FBQ0YsR0FuQkQsTUFtQk87QUFDTE4sSUFBQUEsR0FBRyxDQUFDTSxVQUFKLENBQWUsR0FBZjtBQUNEO0FBQ0YsQ0F4QkQ7O0FBMEJBLFNBQVNFLFdBQVQsQ0FBcUJKLElBQXJCLEVBQTJCO0FBQ3pCLE1BQUlBLElBQUksQ0FBQ0ssR0FBTCxDQUFTWSxNQUFULEtBQW9CLENBQXBCLElBQXlCakIsSUFBSSxDQUFDSyxHQUFMLENBQVNZLE1BQVQsR0FBa0IsR0FBL0MsRUFBb0Q7QUFBRSxXQUFPLEtBQVA7QUFBYzs7QUFDcEUsTUFBSSxFQUFFLE9BQU9qQixJQUFJLENBQUNrQixFQUFaLEtBQW9CLFFBQXRCLENBQUosRUFBNEQ7QUFBRSxXQUFPLEtBQVA7QUFBYzs7QUFDNUUsTUFBSSxPQUFPbEIsSUFBSSxDQUFDbUIsS0FBWixLQUF1QixTQUEzQixFQUFzRDtBQUFFLFdBQU8sS0FBUDtBQUFjOztBQUN0RSxTQUFPLElBQVA7QUFDRCxDLENBRUQ7QUFDQTs7O0FBQ0FsQyxNQUFNLENBQUNtQyxLQUFQLENBQWMsZUFBZCxFQUFnQyxDQUFDekIsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDNUNFLEVBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLE1BQVo7QUFDQSxNQUFJc0IsS0FBSyxHQUFHakMsUUFBUSxDQUFDTyxHQUFHLENBQUMyQixNQUFKLENBQVdKLEVBQVosQ0FBcEIsQ0FGNEMsQ0FHNUM7O0FBRUEvQixFQUFBQSxXQUFXLENBQUNzQixPQUFaLENBQW9CcEIsR0FBcEIsRUFBeUIsQ0FBQ3FCLEdBQUQsRUFBTUMsRUFBTixLQUFhO0FBQ3BDLFFBQUlDLEdBQUcsR0FBR0QsRUFBRSxDQUFDQSxFQUFILENBQU0sUUFBTixDQUFWO0FBQ0EsUUFBSVksT0FBTyxHQUFHO0FBQUVMLE1BQUFBLEVBQUUsRUFBRUc7QUFBTixLQUFkO0FBRUFULElBQUFBLEdBQUcsQ0FBQ0MsVUFBSixDQUFlLFVBQWYsRUFBMkJXLE9BQTNCLENBQW1DRCxPQUFuQyxFQUE0QyxVQUFTYixHQUFULEVBQWNLLE1BQWQsRUFBc0I7QUFDaEUsVUFBSUwsR0FBSixFQUFTO0FBQ1BkLFFBQUFBLEdBQUcsQ0FBQ00sVUFBSixDQUFlLEdBQWY7QUFDRCxPQUZELE1BR0ssSUFBSWEsTUFBTSxJQUFJLElBQWQsRUFBb0I7QUFDdkI7QUFDQSxZQUFJVSxTQUFTLEdBQUc7QUFBRUMsVUFBQUEsSUFBSSxFQUFFO0FBQUNQLFlBQUFBLEtBQUssRUFBRSxDQUFFSixNQUFNLENBQUNJO0FBQWpCO0FBQVIsU0FBaEI7QUFFQVAsUUFBQUEsR0FBRyxDQUFDQyxVQUFKLENBQWUsVUFBZixFQUEyQmMsU0FBM0IsQ0FBcUNKLE9BQXJDLEVBQThDRSxTQUE5QyxFQUF5RCxVQUFTZixHQUFULEVBQWNrQixPQUFkLEVBQXVCO0FBQzlFLGNBQUlsQixHQUFKLEVBQVM7QUFDUEMsWUFBQUEsRUFBRSxDQUFDSyxLQUFIO0FBQ0FwQixZQUFBQSxHQUFHLENBQUNNLFVBQUosQ0FBZSxHQUFmO0FBQ0QsV0FIRCxNQUlLO0FBQ0hTLFlBQUFBLEVBQUUsQ0FBQ0ssS0FBSDtBQUNBcEIsWUFBQUEsR0FBRyxDQUFDTSxVQUFKLENBQWUsR0FBZjtBQUNEO0FBQ0YsU0FURDtBQVVELE9BZEksTUFlQTtBQUNIO0FBQ0FOLFFBQUFBLEdBQUcsQ0FBQ00sVUFBSixDQUFlLEdBQWY7QUFDQVMsUUFBQUEsRUFBRSxDQUFDSyxLQUFIO0FBQ0Q7QUFDRixLQXhCRDtBQTBCRCxHQTlCRDtBQStCRCxDQXBDRCxFLENBc0NBO0FBQ0E7O0FBQ0EvQixNQUFNLENBQUM0QyxHQUFQLENBQVksV0FBWixFQUEwQixDQUFDbEMsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFFdENULEVBQUFBLFdBQVcsQ0FBQ3NCLE9BQVosQ0FBb0JwQixHQUFwQixFQUF5QixDQUFDcUIsR0FBRCxFQUFNQyxFQUFOLEtBQWE7QUFDcEMsUUFBSUMsR0FBRyxHQUFHRCxFQUFFLENBQUNBLEVBQUgsQ0FBTSxRQUFOLENBQVY7QUFFQUMsSUFBQUEsR0FBRyxDQUFDQyxVQUFKLENBQWUsVUFBZixFQUEyQmlCLElBQTNCLEdBQWtDQyxPQUFsQyxDQUEwQyxVQUFTckIsR0FBVCxFQUFjSyxNQUFkLEVBQXNCO0FBQzlESixNQUFBQSxFQUFFLENBQUNLLEtBQUg7O0FBQ0EsVUFBSU4sR0FBSixFQUFTLENBQ1A7QUFDRCxPQUZELE1BR0ssSUFBSUssTUFBTSxJQUFJLElBQWQsRUFBb0I7QUFDdkJqQixRQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWWdCLE1BQVo7QUFDQW5CLFFBQUFBLEdBQUcsQ0FBQ29DLElBQUosQ0FBU2pCLE1BQVQ7QUFDRCxPQUhJLE1BSUE7QUFDSG5CLFFBQUFBLEdBQUcsQ0FBQ00sVUFBSixDQUFlLEdBQWY7QUFDRDtBQUNGLEtBWkQ7QUFjRCxHQWpCRDtBQWtCRCxDQXBCRCxFLENBc0JBO0FBQ0E7O0FBQ0FqQixNQUFNLENBQUM0QyxHQUFQLENBQVksZUFBWixFQUE4QixDQUFDbEMsR0FBRCxFQUFNQyxHQUFOLEtBQWM7QUFDMUMsTUFBSXlCLEtBQUssR0FBR2pDLFFBQVEsQ0FBQ08sR0FBRyxDQUFDMkIsTUFBSixDQUFXSixFQUFaLENBQXBCO0FBQ0FwQixFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxTQUFTc0IsS0FBckI7QUFFQWxDLEVBQUFBLFdBQVcsQ0FBQ3NCLE9BQVosQ0FBb0JwQixHQUFwQixFQUF5QixDQUFDcUIsR0FBRCxFQUFNQyxFQUFOLEtBQWE7QUFDcEMsUUFBSUMsR0FBRyxHQUFHRCxFQUFFLENBQUNBLEVBQUgsQ0FBTSxRQUFOLENBQVY7QUFDQSxRQUFJWSxPQUFPLEdBQUc7QUFBRUwsTUFBQUEsRUFBRSxFQUFFRztBQUFOLEtBQWQ7QUFFQVQsSUFBQUEsR0FBRyxDQUFDQyxVQUFKLENBQWUsVUFBZixFQUEyQlcsT0FBM0IsQ0FBbUNELE9BQW5DLEVBQTRDLFVBQVNiLEdBQVQsRUFBY0ssTUFBZCxFQUFzQjtBQUNoRUosTUFBQUEsRUFBRSxDQUFDSyxLQUFIOztBQUNBLFVBQUlOLEdBQUosRUFBUyxDQUNQO0FBQ0QsT0FGRCxNQUdLLElBQUlLLE1BQU0sSUFBSSxJQUFkLEVBQW9CO0FBQ3ZCbkIsUUFBQUEsR0FBRyxDQUFDTCxJQUFKLENBQVN3QixNQUFULEVBRHVCLENBQ1A7QUFDakIsT0FGSSxNQUdBO0FBQ0huQixRQUFBQSxHQUFHLENBQUNNLFVBQUosQ0FBZSxHQUFmO0FBQ0Q7QUFDRixLQVhEO0FBWUQsR0FoQkQ7QUFrQkQsQ0F0QkQ7QUF3QkFsQixHQUFHLENBQUNNLEdBQUosQ0FBUSxVQUFVSyxHQUFWLEVBQWVDLEdBQWYsRUFBb0I7QUFDMUI7QUFDQUEsRUFBQUEsR0FBRyxDQUFDb0MsSUFBSixDQUFTLHdCQUFULEVBQW1DLEdBQW5DO0FBQ0QsQ0FIRDtBQU1BQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJqRCxNQUFqQjtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6Ii9ob21lL3ZpbmFoMzMxL0Rlc2t0b3AvdGRwMDEzL2xhYjMvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgYXBwID0gZXhwcmVzcygpO1xudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5jb25zdCB7TW9uZ29DbGllbnR9ID0gcmVxdWlyZSgnbW9uZ29kYicpO1xubGV0IHNhbml0aXplID0gcmVxdWlyZSgnbW9uZ28tc2FuaXRpemUnKTtcbmxldCB1cmwgPSBcIm1vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvXCI7XG5cbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xuXG5cbnJvdXRlci5hbGwoJy9tZXNzYWdlcycsIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnNvbGUubG9nKHJlcS5ib2R5KVxuICBpZihyZXEubWV0aG9kID09IFwiUE9TVFwiIHx8IHJlcS5tZXRob2QgPT0gXCJHRVRcIikge1xuICAgIC8vS29sbGEgb20gZ2V0IGhhciBlbiBib2R5P1xuICAgIGlmIChyZXEubWV0aG9kID09IFwiR0VUXCIgJiYgcmVxLmJvZHkgPT0ge30pIHsgLy9IdXIgZnVua2FyIGRldCBow6RyPz8/XG4gICAgICBjb25zb2xlLmxvZyhcImZhaWxlZCBnZXQgYWxsXCIpXG4gICAgICByZXMuc2VuZFN0YXR1cyg0MDUpXG4gICAgfVxuICAgIG5leHQoKTtcbiAgfSBlbHNlIHtcbiAgICAvL2NvbnNvbGUubG9nKHJlcS5tZXRob2QpXG4gICAgY29uc29sZS5sb2coXCJhbm90aGVyIGZhaWxlZCBnZXQgYWxsXCIpXG4gICAgcmVzLnNlbmRTdGF0dXMoNDA1KVxuICB9XG59KVxuXG5yb3V0ZXIuYWxsKCcvbWVzc2FnZXMvOmlkJywgZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcbiAgLy9jb25zb2xlLmxvZyhcIjFcIilcbiAgaWYocmVxLm1ldGhvZCA9PSBcIlBBVENIXCIgfHwgcmVxLm1ldGhvZCA9PSBcIkdFVFwiKSB7XG4gICAgbmV4dCgpO1xuICB9IGVsc2Uge1xuICAgIHJlcy5zZW5kU3RhdHVzKDQwNSlcbiAgfVxufSlcblxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy9TYXZlIG9uZVxuXG5yb3V0ZXIucG9zdCgnL21lc3NhZ2VzJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKHJlcS5ib2R5KVxuICBpZiAodmFsaWRhdGVNc2cocmVxLmJvZHkpKSB7XG4gICAgbXNnID0gc2FuaXRpemUocmVxLmJvZHkpXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKC88c2NyaXB0Pi8pICAvL2luamVjdGlvbj9cbiAgICBpZiAoIXJlZ2V4LnRlc3QobXNnKSkge1xuICAgICAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgICAgIGxldCBkYm8gPSBkYi5kYihcInRkcDAxM1wiKTtcbiAgICAgICAgZGJvLmNvbGxlY3Rpb24oJ21lc3NhZ2VzJykuaW5zZXJ0T25lKG1zZywgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7dGhyb3cgZXJyfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDIwMClcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgfVxufSlcblxuZnVuY3Rpb24gdmFsaWRhdGVNc2coYm9keSkge1xuICBpZiAoYm9keS5tc2cubGVuZ3RoID09PSAwIHx8IGJvZHkubXNnLmxlbmd0aCA+IDE0MCkgeyByZXR1cm4gZmFsc2UgfVxuICBpZiAoISh0eXBlb2YoYm9keS5pZCkgPT09IFwic3RyaW5nXCIpKSAgICAgICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIGZhbHNlIH1cbiAgaWYgKHR5cGVvZihib2R5LnN0YXRlKSAhPT0gXCJib29sZWFuXCIpICAgICAgICAgICAgICAgICB7IHJldHVybiBmYWxzZSB9XG4gIHJldHVybiB0cnVlXG59XG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vL01hcmsgcmVhZFxucm91dGVyLnBhdGNoKCgnL21lc3NhZ2VzLzppZCcpLCAocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS5sb2coXCJIRVJFXCIpXG4gIGxldCBtc2dJZCA9IHNhbml0aXplKHJlcS5wYXJhbXMuaWQpXG4gIC8vY29uc29sZS5sb2coXCJpbiBwYXRjaCBmdW5jdGlvbiB3aXRoIHZhbHVlIFwiICsgbXNnSWQpXG5cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidGRwMDEzXCIpO1xuICAgIGxldCBteXF1ZXJ5ID0geyBpZDogbXNnSWQgfTtcbiAgICBcbiAgICBkYm8uY29sbGVjdGlvbihcIm1lc3NhZ2VzXCIpLmZpbmRPbmUobXlxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgfSBcbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIC8vSWYgd2UgZmluZCBhIHJlc3VsdFxuICAgICAgICBsZXQgbmV3dmFsdWVzID0geyAkc2V0OiB7c3RhdGU6ICEocmVzdWx0LnN0YXRlKX0gfTtcbiAgICAgICAgXG4gICAgICAgIGRiby5jb2xsZWN0aW9uKFwibWVzc2FnZXNcIikudXBkYXRlT25lKG15cXVlcnksIG5ld3ZhbHVlcywgZnVuY3Rpb24oZXJyLCByZXN1bHQyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkYi5jbG9zZSgpXG4gICAgICAgICAgICByZXMuc2VuZFN0YXR1cygyMDApXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gXG4gICAgICBlbHNlIHtcbiAgICAgICAgLy9JZiB3ZSBkb250IGZpbmQgYSByZXN1bHRcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICB9KTtcbn0pXG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vL0dldCBhbGxcbnJvdXRlci5nZXQoKCcvbWVzc2FnZXMnKSwgKHJlcSwgcmVzKSA9PiB7XG5cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidGRwMDEzXCIpO1xuXG4gICAgZGJvLmNvbGxlY3Rpb24oJ21lc3NhZ2VzJykuZmluZCgpLnRvQXJyYXkoZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGRiLmNsb3NlKCk7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coZXJyKVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxuICAgICAgICByZXMuc2VuZChyZXN1bHQpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgfVxuICAgIH0pXG4gICAgXG4gIH0pXG59KVxuXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gR2V0IG9uZVxucm91dGVyLmdldCgoJy9tZXNzYWdlcy86aWQnKSwgKHJlcSwgcmVzKSA9PiB7XG4gIGxldCBtc2dJZCA9IHNhbml0aXplKHJlcS5wYXJhbXMuaWQpXG4gIGNvbnNvbGUubG9nKFwiSUQ6IFwiICsgbXNnSWQpXG5cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidGRwMDEzXCIpO1xuICAgIGxldCBteXF1ZXJ5ID0geyBpZDogbXNnSWQgfTtcblxuICAgIGRiby5jb2xsZWN0aW9uKFwibWVzc2FnZXNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgZGIuY2xvc2UoKTtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhlcnIpXG4gICAgICB9XG4gICAgICBlbHNlIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICByZXMuanNvbihyZXN1bHQpLy8uanNvbihyZXN1bHQpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxufSlcblxuYXBwLnVzZShmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgLy9jb25zb2xlLmxvZyhcImZvdW5kIGl0XCIpXG4gIHJlcy5zZW5kKFwiU29ycnkgY2FuJ3QgZmluZCB0aGF0IVwiLCA0MDQpXG59KVxuXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuXG5cbi8qYW52w6RuZCBhc3lua3JvbmEgYW5yb3AgZsO2ciBhdHQgaMOkbXRhIG9jaCBsYWdyYSBkYXRhLiBcbkthbiB0YSBpbiBlbiByZXNvbHZlIG9jaCByZWplY3QgZnVua3Rpb24uIFxuTWVkIGRldHRhIGthbiB2aSBza2lja2EgcsOkdHQgZmVsbWVkZGVsYW5kZW4uXG5lbiBiYWNrZW5kIGZpbCBzb20gaGFudGVyYXIgbG9naWtcbmVuIHRlc3RmaWwgc29tIHJlcHJlc2VudGVyYXIga2xpZW50LWxvZ2lrZW4gXG4oYWxsdHPDpSBvbSB2aSBrbGlja2FyIHDDpSBlbiBrbmFwcCBrb21tZXIgbWVkZGVsYW5kZSB4XG5za2lja2FzIHQuZXgpKi9cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "express",
        "require",
        "app",
        "router",
        "Router",
        "MongoClient",
        "sanitize",
        "url",
        "use",
        "json",
        "urlencoded",
        "extended",
        "all",
        "req",
        "res",
        "next",
        "console",
        "log",
        "body",
        "method",
        "sendStatus",
        "post",
        "validateMsg",
        "msg",
        "regex",
        "RegExp",
        "test",
        "connect",
        "err",
        "db",
        "dbo",
        "collection",
        "insertOne",
        "result",
        "close",
        "length",
        "id",
        "state",
        "patch",
        "msgId",
        "params",
        "myquery",
        "findOne",
        "newvalues",
        "$set",
        "updateOne",
        "result2",
        "get",
        "find",
        "toArray",
        "send",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,MAAMC,GAAG,GAAGF,OAAO,EAAnB;AACA,IAAIG,MAAM,GAAGH,OAAO,CAACI,MAAR,EAAb;;AACA,MAAM;AAACC,EAAAA;AAAD,IAAgBJ,OAAO,CAAC,SAAD,CAA7B;;AACA,IAAIK,QAAQ,GAAGL,OAAO,CAAC,gBAAD,CAAtB;;AACA,IAAIM,GAAG,GAAG,4BAAV;AAEAL,GAAG,CAACM,GAAJ,CAAQR,OAAO,CAACS,IAAR,EAAR;AACAP,GAAG,CAACM,GAAJ,CAAQR,OAAO,CAACU,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AAGAR,MAAM,CAACS,GAAP,CAAW,WAAX,EAAwB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC/CC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACK,IAAhB;;AACA,MAAGL,GAAG,CAACM,MAAJ,IAAc,MAAd,IAAwBN,GAAG,CAACM,MAAJ,IAAc,KAAzC,EAAgD;AAC9C;AACA,QAAIN,GAAG,CAACM,MAAJ,IAAc,KAAd,IAAuBN,GAAG,CAACK,IAAJ,IAAY,EAAvC,EAA2C;AAAE;AAC3CF,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACAH,MAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACD;;AACDL,IAAAA,IAAI;AACL,GAPD,MAOO;AACL;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAH,IAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACD;AACF,CAdD;AAgBAjB,MAAM,CAACS,GAAP,CAAW,eAAX,EAA4B,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACnD;AACA,MAAGF,GAAG,CAACM,MAAJ,IAAc,OAAd,IAAyBN,GAAG,CAACM,MAAJ,IAAc,KAA1C,EAAiD;AAC/CJ,IAAAA,IAAI;AACL,GAFD,MAEO;AACLD,IAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACD;AACF,CAPD,E,CAUA;AACA;;AAEAjB,MAAM,CAACkB,IAAP,CAAY,WAAZ,EAAyB,CAACR,GAAD,EAAMC,GAAN,KAAc;AACrCE,EAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACK,IAAhB;;AACA,MAAII,WAAW,CAACT,GAAG,CAACK,IAAL,CAAf,EAA2B;AACzBK,IAAAA,GAAG,GAAGjB,QAAQ,CAACO,GAAG,CAACK,IAAL,CAAd;AACA,UAAMM,KAAK,GAAG,IAAIC,MAAJ,CAAW,UAAX,CAAd,CAFyB,CAEa;;AACtC,QAAI,CAACD,KAAK,CAACE,IAAN,CAAWH,GAAX,CAAL,EAAsB;AACpBlB,MAAAA,WAAW,CAACsB,OAAZ,CAAoBpB,GAApB,EAAyB,CAACqB,GAAD,EAAMC,EAAN,KAAa;AACpC,YAAIC,GAAG,GAAGD,EAAE,CAACA,EAAH,CAAM,QAAN,CAAV;AACAC,QAAAA,GAAG,CAACC,UAAJ,CAAe,UAAf,EAA2BC,SAA3B,CAAqCT,GAArC,EAA0C,UAASK,GAAT,EAAcK,MAAd,EAAsB;AAC9D,cAAIL,GAAJ,EAAS;AAAC,kBAAMA,GAAN;AAAU,WAApB,MACK;AACHC,YAAAA,EAAE,CAACK,KAAH;AACApB,YAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACD;AAEF,SAPD;AAQD,OAVD;AAWD,KAZD,MAaK;AACHN,MAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACD;AACF,GAnBD,MAmBO;AACLN,IAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACD;AACF,CAxBD;;AA0BA,SAASE,WAAT,CAAqBJ,IAArB,EAA2B;AACzB,MAAIA,IAAI,CAACK,GAAL,CAASY,MAAT,KAAoB,CAApB,IAAyBjB,IAAI,CAACK,GAAL,CAASY,MAAT,GAAkB,GAA/C,EAAoD;AAAE,WAAO,KAAP;AAAc;;AACpE,MAAI,EAAE,OAAOjB,IAAI,CAACkB,EAAZ,KAAoB,QAAtB,CAAJ,EAA4D;AAAE,WAAO,KAAP;AAAc;;AAC5E,MAAI,OAAOlB,IAAI,CAACmB,KAAZ,KAAuB,SAA3B,EAAsD;AAAE,WAAO,KAAP;AAAc;;AACtE,SAAO,IAAP;AACD,C,CAED;AACA;;;AACAlC,MAAM,CAACmC,KAAP,CAAc,eAAd,EAAgC,CAACzB,GAAD,EAAMC,GAAN,KAAc;AAC5CE,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,MAAIsB,KAAK,GAAGjC,QAAQ,CAACO,GAAG,CAAC2B,MAAJ,CAAWJ,EAAZ,CAApB,CAF4C,CAG5C;;AAEA/B,EAAAA,WAAW,CAACsB,OAAZ,CAAoBpB,GAApB,EAAyB,CAACqB,GAAD,EAAMC,EAAN,KAAa;AACpC,QAAIC,GAAG,GAAGD,EAAE,CAACA,EAAH,CAAM,QAAN,CAAV;AACA,QAAIY,OAAO,GAAG;AAAEL,MAAAA,EAAE,EAAEG;AAAN,KAAd;AAEAT,IAAAA,GAAG,CAACC,UAAJ,CAAe,UAAf,EAA2BW,OAA3B,CAAmCD,OAAnC,EAA4C,UAASb,GAAT,EAAcK,MAAd,EAAsB;AAChE,UAAIL,GAAJ,EAAS;AACPd,QAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACD,OAFD,MAGK,IAAIa,MAAM,IAAI,IAAd,EAAoB;AACvB;AACA,YAAIU,SAAS,GAAG;AAAEC,UAAAA,IAAI,EAAE;AAACP,YAAAA,KAAK,EAAE,CAAEJ,MAAM,CAACI;AAAjB;AAAR,SAAhB;AAEAP,QAAAA,GAAG,CAACC,UAAJ,CAAe,UAAf,EAA2Bc,SAA3B,CAAqCJ,OAArC,EAA8CE,SAA9C,EAAyD,UAASf,GAAT,EAAckB,OAAd,EAAuB;AAC9E,cAAIlB,GAAJ,EAAS;AACPC,YAAAA,EAAE,CAACK,KAAH;AACApB,YAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACD,WAHD,MAIK;AACHS,YAAAA,EAAE,CAACK,KAAH;AACApB,YAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACD;AACF,SATD;AAUD,OAdI,MAeA;AACH;AACAN,QAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACAS,QAAAA,EAAE,CAACK,KAAH;AACD;AACF,KAxBD;AA0BD,GA9BD;AA+BD,CApCD,E,CAsCA;AACA;;AACA/B,MAAM,CAAC4C,GAAP,CAAY,WAAZ,EAA0B,CAAClC,GAAD,EAAMC,GAAN,KAAc;AAEtCT,EAAAA,WAAW,CAACsB,OAAZ,CAAoBpB,GAApB,EAAyB,CAACqB,GAAD,EAAMC,EAAN,KAAa;AACpC,QAAIC,GAAG,GAAGD,EAAE,CAACA,EAAH,CAAM,QAAN,CAAV;AAEAC,IAAAA,GAAG,CAACC,UAAJ,CAAe,UAAf,EAA2BiB,IAA3B,GAAkCC,OAAlC,CAA0C,UAASrB,GAAT,EAAcK,MAAd,EAAsB;AAC9DJ,MAAAA,EAAE,CAACK,KAAH;;AACA,UAAIN,GAAJ,EAAS,CACP;AACD,OAFD,MAGK,IAAIK,MAAM,IAAI,IAAd,EAAoB;AACvBjB,QAAAA,OAAO,CAACC,GAAR,CAAYgB,MAAZ;AACAnB,QAAAA,GAAG,CAACoC,IAAJ,CAASjB,MAAT;AACD,OAHI,MAIA;AACHnB,QAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACD;AACF,KAZD;AAcD,GAjBD;AAkBD,CApBD,E,CAsBA;AACA;;AACAjB,MAAM,CAAC4C,GAAP,CAAY,eAAZ,EAA8B,CAAClC,GAAD,EAAMC,GAAN,KAAc;AAC1C,MAAIyB,KAAK,GAAGjC,QAAQ,CAACO,GAAG,CAAC2B,MAAJ,CAAWJ,EAAZ,CAApB;AACApB,EAAAA,OAAO,CAACC,GAAR,CAAY,SAASsB,KAArB;AAEAlC,EAAAA,WAAW,CAACsB,OAAZ,CAAoBpB,GAApB,EAAyB,CAACqB,GAAD,EAAMC,EAAN,KAAa;AACpC,QAAIC,GAAG,GAAGD,EAAE,CAACA,EAAH,CAAM,QAAN,CAAV;AACA,QAAIY,OAAO,GAAG;AAAEL,MAAAA,EAAE,EAAEG;AAAN,KAAd;AAEAT,IAAAA,GAAG,CAACC,UAAJ,CAAe,UAAf,EAA2BW,OAA3B,CAAmCD,OAAnC,EAA4C,UAASb,GAAT,EAAcK,MAAd,EAAsB;AAChEJ,MAAAA,EAAE,CAACK,KAAH;;AACA,UAAIN,GAAJ,EAAS,CACP;AACD,OAFD,MAGK,IAAIK,MAAM,IAAI,IAAd,EAAoB;AACvBnB,QAAAA,GAAG,CAACL,IAAJ,CAASwB,MAAT,EADuB,CACP;AACjB,OAFI,MAGA;AACHnB,QAAAA,GAAG,CAACM,UAAJ,CAAe,GAAf;AACD;AACF,KAXD;AAYD,GAhBD;AAkBD,CAtBD;AAwBAlB,GAAG,CAACM,GAAJ,CAAQ,UAAUK,GAAV,EAAeC,GAAf,EAAoB;AAC1B;AACAA,EAAAA,GAAG,CAACoC,IAAJ,CAAS,wBAAT,EAAmC,GAAnC;AACD,CAHD;AAMAC,MAAM,CAACC,OAAP,GAAiBjD,MAAjB;AAGA;AACA;AACA;AACA;AACA;AACA;AACA",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/routes/",
      "sourcesContent": [
        "var express = require('express');\nconst app = express();\nvar router = express.Router();\nconst {MongoClient} = require('mongodb');\nlet sanitize = require('mongo-sanitize');\nlet url = \"mongodb://localhost:27017/\";\n\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n\nrouter.all('/messages', function(req, res, next) {\n  console.log(req.body)\n  if(req.method == \"POST\" || req.method == \"GET\") {\n    //Kolla om get har en body?\n    if (req.method == \"GET\" && req.body == {}) { //Hur funkar det här???\n      console.log(\"failed get all\")\n      res.sendStatus(405)\n    }\n    next();\n  } else {\n    //console.log(req.method)\n    console.log(\"another failed get all\")\n    res.sendStatus(405)\n  }\n})\n\nrouter.all('/messages/:id', function(req, res, next) {\n  //console.log(\"1\")\n  if(req.method == \"PATCH\" || req.method == \"GET\") {\n    next();\n  } else {\n    res.sendStatus(405)\n  }\n})\n\n\n//------------------------------------------------------------------\n//Save one\n\nrouter.post('/messages', (req, res) => {\n  console.log(req.body)\n  if (validateMsg(req.body)) {\n    msg = sanitize(req.body)\n    const regex = new RegExp(/<script>/)  //injection?\n    if (!regex.test(msg)) {\n      MongoClient.connect(url, (err, db) => {\n        let dbo = db.db(\"tdp013\");\n        dbo.collection('messages').insertOne(msg, function(err, result) {\n          if (err) {throw err}\n          else {\n            db.close();\n            res.sendStatus(200)\n          }\n\n        });\n      });\n    }\n    else {\n      res.sendStatus(500)\n    }\n  } else {\n    res.sendStatus(500)\n  }\n})\n\nfunction validateMsg(body) {\n  if (body.msg.length === 0 || body.msg.length > 140) { return false }\n  if (!(typeof(body.id) === \"string\"))                        { return false }\n  if (typeof(body.state) !== \"boolean\")                 { return false }\n  return true\n}\n\n//------------------------------------------------------------------\n//Mark read\nrouter.patch(('/messages/:id'), (req, res) => {\n  console.log(\"HERE\")\n  let msgId = sanitize(req.params.id)\n  //console.log(\"in patch function with value \" + msgId)\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tdp013\");\n    let myquery = { id: msgId };\n    \n    dbo.collection(\"messages\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        //If we find a result\n        let newvalues = { $set: {state: !(result.state)} };\n        \n        dbo.collection(\"messages\").updateOne(myquery, newvalues, function(err, result2) {\n          if (err) {\n            db.close();\n            res.sendStatus(500)\n          }\n          else {\n            db.close()\n            res.sendStatus(200)\n          }\n        });\n      } \n      else {\n        //If we dont find a result\n        res.sendStatus(500)\n        db.close();\n      }\n    });\n    \n  });\n})\n\n//------------------------------------------------------------------\n//Get all\nrouter.get(('/messages'), (req, res) => {\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tdp013\");\n\n    dbo.collection('messages').find().toArray(function(err, result) {\n      db.close();\n      if (err) {\n        //console.log(err)\n      }\n      else if (result != null) {\n        console.log(result)\n        res.send(result)\n      }\n      else {\n        res.sendStatus(500)\n      }\n    })\n    \n  })\n})\n\n//------------------------------------------------------------------\n// Get one\nrouter.get(('/messages/:id'), (req, res) => {\n  let msgId = sanitize(req.params.id)\n  console.log(\"ID: \" + msgId)\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tdp013\");\n    let myquery = { id: msgId };\n\n    dbo.collection(\"messages\").findOne(myquery, function(err, result) {\n      db.close();\n      if (err) {\n        //console.log(err)\n      }\n      else if (result != null) {\n        res.json(result)//.json(result)\n      }\n      else {\n        res.sendStatus(500)\n      }\n    });\n  });\n\n})\n\napp.use(function (req, res) {\n  //console.log(\"found it\")\n  res.send(\"Sorry can't find that!\", 404)\n})\n\n\nmodule.exports = router;\n\n\n/*använd asynkrona anrop för att hämta och lagra data. \nKan ta in en resolve och reject funktion. \nMed detta kan vi skicka rätt felmeddelanden.\nen backend fil som hanterar logik\nen testfil som representerar klient-logiken \n(alltså om vi klickar på en knapp kommer meddelande x\nskickas t.ex)*/\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1632659135050
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/lab3/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/lab3\",\"filename\":\"/home/vinah331/Desktop/tdp013/lab3/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/lab3\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/lab3",
      "filename": "/home/vinah331/Desktop/tdp013/lab3/routes/users.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/lab3",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/lab3/routes/users.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/lab3/routes/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/routes/",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nvar router = express.Router();\n/* GET users listing. */\n\nrouter.get('/', function (req, res, next) {\n  res.send('respond with a resource');\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInNlbmQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUNBLElBQUlDLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFSLEVBQWI7QUFFQTs7QUFDQUQsTUFBTSxDQUFDRSxHQUFQLENBQVcsR0FBWCxFQUFnQixVQUFTQyxHQUFULEVBQWNDLEdBQWQsRUFBbUJDLElBQW5CLEVBQXlCO0FBQ3ZDRCxFQUFBQSxHQUFHLENBQUNFLElBQUosQ0FBUyx5QkFBVDtBQUNELENBRkQ7QUFJQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCUixNQUFqQiIsInNvdXJjZVJvb3QiOiIvaG9tZS92aW5haDMzMS9EZXNrdG9wL3RkcDAxMy9sYWIzL3JvdXRlcy8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbnZhciByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4vKiBHRVQgdXNlcnMgbGlzdGluZy4gKi9cbnJvdXRlci5nZXQoJy8nLCBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICByZXMuc2VuZCgncmVzcG9uZCB3aXRoIGEgcmVzb3VyY2UnKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "express",
        "require",
        "router",
        "Router",
        "get",
        "req",
        "res",
        "next",
        "send",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb;AAEA;;AACAD,MAAM,CAACE,GAAP,CAAW,GAAX,EAAgB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACvCD,EAAAA,GAAG,CAACE,IAAJ,CAAS,yBAAT;AACD,CAFD;AAIAC,MAAM,CAACC,OAAP,GAAiBR,MAAjB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/routes/",
      "sourcesContent": [
        "var express = require('express');\nvar router = express.Router();\n\n/* GET users listing. */\nrouter.get('/', function(req, res, next) {\n  res.send('respond with a resource');\n});\n\nmodule.exports = router;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1631534435311
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/lab3/cors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/lab3\",\"filename\":\"/home/vinah331/Desktop/tdp013/lab3/cors/cors.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/lab3\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/cors/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/lab3",
      "filename": "/home/vinah331/Desktop/tdp013/lab3/cors/cors.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/lab3",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/lab3/cors/cors.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/lab3/cors/cors.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/cors/",
        "sourceFileName": "cors.js"
      }
    },
    "ast": null,
    "code": "const cors = require('cors');\n\nconst corsOptions = {\n  origin: '*'\n  /*file:///home/vinah331/Desktop/tdp013/lab3/main.html'*/\n  ,\n  optionsSuccessStatus: 200,\n  methods: ['GET', 'POST', 'PATCH']\n};\nmodule.exports = cors(corsOptions);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcnMuanMiXSwibmFtZXMiOlsiY29ycyIsInJlcXVpcmUiLCJjb3JzT3B0aW9ucyIsIm9yaWdpbiIsIm9wdGlvbnNTdWNjZXNzU3RhdHVzIiwibWV0aG9kcyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBcEI7O0FBRUEsTUFBTUMsV0FBVyxHQUFHO0FBQ2hCQyxFQUFBQSxNQUFNLEVBQUU7QUFBRztBQURLO0FBRWhCQyxFQUFBQSxvQkFBb0IsRUFBRSxHQUZOO0FBR2hCQyxFQUFBQSxPQUFPLEVBQUUsQ0FBQyxLQUFELEVBQVEsTUFBUixFQUFnQixPQUFoQjtBQUhPLENBQXBCO0FBTUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlAsSUFBSSxDQUFDRSxXQUFELENBQXJCIiwic291cmNlUm9vdCI6Ii9ob21lL3ZpbmFoMzMxL0Rlc2t0b3AvdGRwMDEzL2xhYjMvY29ycy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpO1xuXG5jb25zdCBjb3JzT3B0aW9ucyA9IHtcbiAgICBvcmlnaW46ICcqJy8qZmlsZTovLy9ob21lL3ZpbmFoMzMxL0Rlc2t0b3AvdGRwMDEzL2xhYjMvbWFpbi5odG1sJyovLFxuICAgIG9wdGlvbnNTdWNjZXNzU3RhdHVzOiAyMDAsIFxuICAgIG1ldGhvZHM6IFsnR0VUJywgJ1BPU1QnLCAnUEFUQ0gnXVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb3JzKGNvcnNPcHRpb25zKVxuXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "cors.js"
      ],
      "names": [
        "cors",
        "require",
        "corsOptions",
        "origin",
        "optionsSuccessStatus",
        "methods",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AAEA,MAAMC,WAAW,GAAG;AAChBC,EAAAA,MAAM,EAAE;AAAG;AADK;AAEhBC,EAAAA,oBAAoB,EAAE,GAFN;AAGhBC,EAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,MAAR,EAAgB,OAAhB;AAHO,CAApB;AAMAC,MAAM,CAACC,OAAP,GAAiBP,IAAI,CAACE,WAAD,CAArB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/cors/",
      "sourcesContent": [
        "const cors = require('cors');\n\nconst corsOptions = {\n    origin: '*'/*file:///home/vinah331/Desktop/tdp013/lab3/main.html'*/,\n    optionsSuccessStatus: 200, \n    methods: ['GET', 'POST', 'PATCH']\n};\n\nmodule.exports = cors(corsOptions)\n\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1632565566795
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/lab3/cors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/lab3\",\"filename\":\"/home/vinah331/Desktop/tdp013/lab3/cors/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/lab3\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/cors/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/lab3",
      "filename": "/home/vinah331/Desktop/tdp013/lab3/cors/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/lab3",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/lab3/cors/index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/lab3/cors/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/cors/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "const cors = require('cors');\n\nconst corsOptions = {\n  origin: '*'\n  /*file:///home/vinah331/Desktop/tdp013/lab3/main.html'*/\n  ,\n  optionsSuccessStatus: 200,\n  methods: ['GET', 'POST', 'PATCH']\n};\nmodule.exports = cors(corsOptions);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImNvcnMiLCJyZXF1aXJlIiwiY29yc09wdGlvbnMiLCJvcmlnaW4iLCJvcHRpb25zU3VjY2Vzc1N0YXR1cyIsIm1ldGhvZHMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQUdBLE1BQU1DLFdBQVcsR0FBRztBQUNoQkMsRUFBQUEsTUFBTSxFQUFFO0FBQUc7QUFESztBQUVoQkMsRUFBQUEsb0JBQW9CLEVBQUUsR0FGTjtBQUdoQkMsRUFBQUEsT0FBTyxFQUFFLENBQUMsS0FBRCxFQUFRLE1BQVIsRUFBZ0IsT0FBaEI7QUFITyxDQUFwQjtBQU1BQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJQLElBQUksQ0FBQ0UsV0FBRCxDQUFyQiIsInNvdXJjZVJvb3QiOiIvaG9tZS92aW5haDMzMS9EZXNrdG9wL3RkcDAxMy9sYWIzL2NvcnMvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY29ycyA9IHJlcXVpcmUoJ2NvcnMnKTtcblxuXG5jb25zdCBjb3JzT3B0aW9ucyA9IHtcbiAgICBvcmlnaW46ICcqJy8qZmlsZTovLy9ob21lL3ZpbmFoMzMxL0Rlc2t0b3AvdGRwMDEzL2xhYjMvbWFpbi5odG1sJyovLFxuICAgIG9wdGlvbnNTdWNjZXNzU3RhdHVzOiAyMDAsIFxuICAgIG1ldGhvZHM6IFsnR0VUJywgJ1BPU1QnLCAnUEFUQ0gnXVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb3JzKGNvcnNPcHRpb25zKVxuXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "cors",
        "require",
        "corsOptions",
        "origin",
        "optionsSuccessStatus",
        "methods",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AAGA,MAAMC,WAAW,GAAG;AAChBC,EAAAA,MAAM,EAAE;AAAG;AADK;AAEhBC,EAAAA,oBAAoB,EAAE,GAFN;AAGhBC,EAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,MAAR,EAAgB,OAAhB;AAHO,CAApB;AAMAC,MAAM,CAACC,OAAP,GAAiBP,IAAI,CAACE,WAAD,CAArB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/lab3/cors/",
      "sourcesContent": [
        "const cors = require('cors');\n\n\nconst corsOptions = {\n    origin: '*'/*file:///home/vinah331/Desktop/tdp013/lab3/main.html'*/,\n    optionsSuccessStatus: 200, \n    methods: ['GET', 'POST', 'PATCH']\n};\n\nmodule.exports = cors(corsOptions)\n\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1632659863106
  }
}