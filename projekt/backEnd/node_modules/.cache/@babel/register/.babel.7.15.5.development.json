{
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"filename\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/app.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/projekt/backEnd/app.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "var createError = require('http-errors');\n\nvar express = require('express');\n\nvar path = require('path');\n\nvar cookieParser = require('cookie-parser');\n\nvar logger = require('morgan');\n\nconst {\n  v1: uuidv1,\n  v4: uuidv4\n} = require('uuid');\n\nvar indexRouter = require('./routes/index');\n\nvar usersRouter = require('./routes/users');\n\nvar app = express();\n\nconst corsMiddleware = require('./cors');\n\napp.options('*', corsMiddleware);\napp.use(corsMiddleware); // view engine setup\n\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\napp.use('/', indexRouter);\napp.use('/users', usersRouter); // catch 404 and forward to error handler //använd inte!\n// app.use(function(req, res, next) {\n//   next(createError(404));\n// });\n// error handler\n// app.use(function(err, req, res, next) {\n//   // set locals, only providing error in development\n//   res.locals.message = err.message;\n//   res.locals.error = req.app.get('env') === 'development' ? err : {};\n//   // render the error page\n//   res.status(err.status || 500);\n//   res.render('error');\n// });\n\nconst {\n  MongoClient\n} = require('mongodb');\n\nlet url = \"mongodb://localhost:27017/\";\n\nfunction startServer(port) {\n  let server = app.listen(3000, () => {\n    let host = server.address().address;\n    let port = server.address().port;\n    console.log(`Lyssnar på http://${host}:${port}`);\n  });\n  return server;\n}\n\nfunction clearDatabase() {\n  MongoClient.dropDatabase();\n}\n/*\nlet server = app.listen(8888, () => {\n  let host = server.address().address\n  let port = server.address().port\n  console.log(`Lyssnar på http://${host}:${port}`)\n })*/\n\n\nstartServer();\nmodule.exports = startServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJjcmVhdGVFcnJvciIsInJlcXVpcmUiLCJleHByZXNzIiwicGF0aCIsImNvb2tpZVBhcnNlciIsImxvZ2dlciIsInYxIiwidXVpZHYxIiwidjQiLCJ1dWlkdjQiLCJpbmRleFJvdXRlciIsInVzZXJzUm91dGVyIiwiYXBwIiwiY29yc01pZGRsZXdhcmUiLCJvcHRpb25zIiwidXNlIiwic2V0Iiwiam9pbiIsIl9fZGlybmFtZSIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJzdGF0aWMiLCJNb25nb0NsaWVudCIsInVybCIsInN0YXJ0U2VydmVyIiwicG9ydCIsInNlcnZlciIsImxpc3RlbiIsImhvc3QiLCJhZGRyZXNzIiwiY29uc29sZSIsImxvZyIsImNsZWFyRGF0YWJhc2UiLCJkcm9wRGF0YWJhc2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxhQUFELENBQXpCOztBQUNBLElBQUlDLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFNBQUQsQ0FBckI7O0FBQ0EsSUFBSUUsSUFBSSxHQUFHRixPQUFPLENBQUMsTUFBRCxDQUFsQjs7QUFDQSxJQUFJRyxZQUFZLEdBQUdILE9BQU8sQ0FBQyxlQUFELENBQTFCOztBQUNBLElBQUlJLE1BQU0sR0FBR0osT0FBTyxDQUFDLFFBQUQsQ0FBcEI7O0FBQ0EsTUFBTTtBQUNKSyxFQUFBQSxFQUFFLEVBQUVDLE1BREE7QUFFSkMsRUFBQUEsRUFBRSxFQUFFQztBQUZBLElBR0ZSLE9BQU8sQ0FBQyxNQUFELENBSFg7O0FBS0EsSUFBSVMsV0FBVyxHQUFHVCxPQUFPLENBQUMsZ0JBQUQsQ0FBekI7O0FBQ0EsSUFBSVUsV0FBVyxHQUFHVixPQUFPLENBQUMsZ0JBQUQsQ0FBekI7O0FBRUEsSUFBSVcsR0FBRyxHQUFHVixPQUFPLEVBQWpCOztBQUNBLE1BQU1XLGNBQWMsR0FBR1osT0FBTyxDQUFDLFFBQUQsQ0FBOUI7O0FBQ0FXLEdBQUcsQ0FBQ0UsT0FBSixDQUFZLEdBQVosRUFBaUJELGNBQWpCO0FBQ0FELEdBQUcsQ0FBQ0csR0FBSixDQUFRRixjQUFSLEUsQ0FFQTs7QUFDQUQsR0FBRyxDQUFDSSxHQUFKLENBQVEsT0FBUixFQUFpQmIsSUFBSSxDQUFDYyxJQUFMLENBQVVDLFNBQVYsRUFBcUIsT0FBckIsQ0FBakI7QUFDQU4sR0FBRyxDQUFDSSxHQUFKLENBQVEsYUFBUixFQUF1QixNQUF2QjtBQUVBSixHQUFHLENBQUNHLEdBQUosQ0FBUVYsTUFBTSxDQUFDLEtBQUQsQ0FBZDtBQUNBTyxHQUFHLENBQUNHLEdBQUosQ0FBUWIsT0FBTyxDQUFDaUIsSUFBUixFQUFSO0FBQ0FQLEdBQUcsQ0FBQ0csR0FBSixDQUFRYixPQUFPLENBQUNrQixVQUFSLENBQW1CO0FBQUVDLEVBQUFBLFFBQVEsRUFBRTtBQUFaLENBQW5CLENBQVI7QUFDQVQsR0FBRyxDQUFDRyxHQUFKLENBQVFYLFlBQVksRUFBcEI7QUFDQVEsR0FBRyxDQUFDRyxHQUFKLENBQVFiLE9BQU8sQ0FBQ29CLE1BQVIsQ0FBZW5CLElBQUksQ0FBQ2MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFFBQXJCLENBQWYsQ0FBUjtBQUVBTixHQUFHLENBQUNHLEdBQUosQ0FBUSxHQUFSLEVBQWFMLFdBQWI7QUFDQUUsR0FBRyxDQUFDRyxHQUFKLENBQVEsUUFBUixFQUFrQkosV0FBbEIsRSxDQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE1BQU07QUFBQ1ksRUFBQUE7QUFBRCxJQUFnQnRCLE9BQU8sQ0FBQyxTQUFELENBQTdCOztBQUNBLElBQUl1QixHQUFHLEdBQUcsNEJBQVY7O0FBR0EsU0FBU0MsV0FBVCxDQUFxQkMsSUFBckIsRUFBMkI7QUFDekIsTUFBSUMsTUFBTSxHQUFHZixHQUFHLENBQUNnQixNQUFKLENBQVcsSUFBWCxFQUFpQixNQUFNO0FBQ2xDLFFBQUlDLElBQUksR0FBR0YsTUFBTSxDQUFDRyxPQUFQLEdBQWlCQSxPQUE1QjtBQUNBLFFBQUlKLElBQUksR0FBR0MsTUFBTSxDQUFDRyxPQUFQLEdBQWlCSixJQUE1QjtBQUNBSyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBYSxxQkFBb0JILElBQUssSUFBR0gsSUFBSyxFQUE5QztBQUNBLEdBSlcsQ0FBYjtBQUtBLFNBQU9DLE1BQVA7QUFDRDs7QUFFRCxTQUFTTSxhQUFULEdBQXlCO0FBQ3ZCVixFQUFBQSxXQUFXLENBQUNXLFlBQVo7QUFDRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUNULFdBQVc7QUFFWFUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCWCxXQUFqQiIsInNvdXJjZVJvb3QiOiIvaG9tZS92aW5haDMzMS9EZXNrdG9wL3RkcDAxMy9wcm9qZWt0L2JhY2tFbmQvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnaHR0cC1lcnJvcnMnKTtcbnZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgY29va2llUGFyc2VyID0gcmVxdWlyZSgnY29va2llLXBhcnNlcicpO1xudmFyIGxvZ2dlciA9IHJlcXVpcmUoJ21vcmdhbicpO1xuY29uc3QgeyBcbiAgdjE6IHV1aWR2MSxcbiAgdjQ6IHV1aWR2NCxcbn0gPSByZXF1aXJlKCd1dWlkJyk7XG5cbnZhciBpbmRleFJvdXRlciA9IHJlcXVpcmUoJy4vcm91dGVzL2luZGV4Jyk7XG52YXIgdXNlcnNSb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcy91c2VycycpO1xuXG52YXIgYXBwID0gZXhwcmVzcygpO1xuY29uc3QgY29yc01pZGRsZXdhcmUgPSByZXF1aXJlKCcuL2NvcnMnKTtcbmFwcC5vcHRpb25zKCcqJywgY29yc01pZGRsZXdhcmUpO1xuYXBwLnVzZShjb3JzTWlkZGxld2FyZSk7XG5cbi8vIHZpZXcgZW5naW5lIHNldHVwXG5hcHAuc2V0KCd2aWV3cycsIHBhdGguam9pbihfX2Rpcm5hbWUsICd2aWV3cycpKTtcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2phZGUnKTtcblxuYXBwLnVzZShsb2dnZXIoJ2RldicpKTtcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xuYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICdwdWJsaWMnKSkpO1xuXG5hcHAudXNlKCcvJywgaW5kZXhSb3V0ZXIpO1xuYXBwLnVzZSgnL3VzZXJzJywgdXNlcnNSb3V0ZXIpO1xuXG5cbi8vIGNhdGNoIDQwNCBhbmQgZm9yd2FyZCB0byBlcnJvciBoYW5kbGVyIC8vYW52w6RuZCBpbnRlIVxuLy8gYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuLy8gICBuZXh0KGNyZWF0ZUVycm9yKDQwNCkpO1xuLy8gfSk7XG5cbi8vIGVycm9yIGhhbmRsZXJcbi8vIGFwcC51c2UoZnVuY3Rpb24oZXJyLCByZXEsIHJlcywgbmV4dCkge1xuLy8gICAvLyBzZXQgbG9jYWxzLCBvbmx5IHByb3ZpZGluZyBlcnJvciBpbiBkZXZlbG9wbWVudFxuLy8gICByZXMubG9jYWxzLm1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcbi8vICAgcmVzLmxvY2Fscy5lcnJvciA9IHJlcS5hcHAuZ2V0KCdlbnYnKSA9PT0gJ2RldmVsb3BtZW50JyA/IGVyciA6IHt9O1xuXG4vLyAgIC8vIHJlbmRlciB0aGUgZXJyb3IgcGFnZVxuLy8gICByZXMuc3RhdHVzKGVyci5zdGF0dXMgfHwgNTAwKTtcbi8vICAgcmVzLnJlbmRlcignZXJyb3InKTtcbi8vIH0pO1xuXG5cbmNvbnN0IHtNb25nb0NsaWVudH0gPSByZXF1aXJlKCdtb25nb2RiJyk7XG5sZXQgdXJsID0gXCJtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L1wiO1xuXG5cbmZ1bmN0aW9uIHN0YXJ0U2VydmVyKHBvcnQpIHtcbiAgbGV0IHNlcnZlciA9IGFwcC5saXN0ZW4oMzAwMCwgKCkgPT4ge1xuICAgIGxldCBob3N0ID0gc2VydmVyLmFkZHJlc3MoKS5hZGRyZXNzXG4gICAgbGV0IHBvcnQgPSBzZXJ2ZXIuYWRkcmVzcygpLnBvcnRcbiAgICBjb25zb2xlLmxvZyhgTHlzc25hciBww6UgaHR0cDovLyR7aG9zdH06JHtwb3J0fWApXG4gICB9KVxuICByZXR1cm4oc2VydmVyKVxufVxuXG5mdW5jdGlvbiBjbGVhckRhdGFiYXNlKCkge1xuICBNb25nb0NsaWVudC5kcm9wRGF0YWJhc2UoKTtcbn1cbi8qXG5sZXQgc2VydmVyID0gYXBwLmxpc3Rlbig4ODg4LCAoKSA9PiB7XG4gIGxldCBob3N0ID0gc2VydmVyLmFkZHJlc3MoKS5hZGRyZXNzXG4gIGxldCBwb3J0ID0gc2VydmVyLmFkZHJlc3MoKS5wb3J0XG4gIGNvbnNvbGUubG9nKGBMeXNzbmFyIHDDpSBodHRwOi8vJHtob3N0fToke3BvcnR9YClcbiB9KSovXG5cbiBzdGFydFNlcnZlcigpXG5cbiBtb2R1bGUuZXhwb3J0cyA9IHN0YXJ0U2VydmVyOyJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "createError",
        "require",
        "express",
        "path",
        "cookieParser",
        "logger",
        "v1",
        "uuidv1",
        "v4",
        "uuidv4",
        "indexRouter",
        "usersRouter",
        "app",
        "corsMiddleware",
        "options",
        "use",
        "set",
        "join",
        "__dirname",
        "json",
        "urlencoded",
        "extended",
        "static",
        "MongoClient",
        "url",
        "startServer",
        "port",
        "server",
        "listen",
        "host",
        "address",
        "console",
        "log",
        "clearDatabase",
        "dropDatabase",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIG,YAAY,GAAGH,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAII,MAAM,GAAGJ,OAAO,CAAC,QAAD,CAApB;;AACA,MAAM;AACJK,EAAAA,EAAE,EAAEC,MADA;AAEJC,EAAAA,EAAE,EAAEC;AAFA,IAGFR,OAAO,CAAC,MAAD,CAHX;;AAKA,IAAIS,WAAW,GAAGT,OAAO,CAAC,gBAAD,CAAzB;;AACA,IAAIU,WAAW,GAAGV,OAAO,CAAC,gBAAD,CAAzB;;AAEA,IAAIW,GAAG,GAAGV,OAAO,EAAjB;;AACA,MAAMW,cAAc,GAAGZ,OAAO,CAAC,QAAD,CAA9B;;AACAW,GAAG,CAACE,OAAJ,CAAY,GAAZ,EAAiBD,cAAjB;AACAD,GAAG,CAACG,GAAJ,CAAQF,cAAR,E,CAEA;;AACAD,GAAG,CAACI,GAAJ,CAAQ,OAAR,EAAiBb,IAAI,CAACc,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAjB;AACAN,GAAG,CAACI,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;AAEAJ,GAAG,CAACG,GAAJ,CAAQV,MAAM,CAAC,KAAD,CAAd;AACAO,GAAG,CAACG,GAAJ,CAAQb,OAAO,CAACiB,IAAR,EAAR;AACAP,GAAG,CAACG,GAAJ,CAAQb,OAAO,CAACkB,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAT,GAAG,CAACG,GAAJ,CAAQX,YAAY,EAApB;AACAQ,GAAG,CAACG,GAAJ,CAAQb,OAAO,CAACoB,MAAR,CAAenB,IAAI,CAACc,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAR;AAEAN,GAAG,CAACG,GAAJ,CAAQ,GAAR,EAAaL,WAAb;AACAE,GAAG,CAACG,GAAJ,CAAQ,QAAR,EAAkBJ,WAAlB,E,CAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAGA,MAAM;AAACY,EAAAA;AAAD,IAAgBtB,OAAO,CAAC,SAAD,CAA7B;;AACA,IAAIuB,GAAG,GAAG,4BAAV;;AAGA,SAASC,WAAT,CAAqBC,IAArB,EAA2B;AACzB,MAAIC,MAAM,GAAGf,GAAG,CAACgB,MAAJ,CAAW,IAAX,EAAiB,MAAM;AAClC,QAAIC,IAAI,GAAGF,MAAM,CAACG,OAAP,GAAiBA,OAA5B;AACA,QAAIJ,IAAI,GAAGC,MAAM,CAACG,OAAP,GAAiBJ,IAA5B;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAa,qBAAoBH,IAAK,IAAGH,IAAK,EAA9C;AACA,GAJW,CAAb;AAKA,SAAOC,MAAP;AACD;;AAED,SAASM,aAAT,GAAyB;AACvBV,EAAAA,WAAW,CAACW,YAAZ;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAECT,WAAW;AAEXU,MAAM,CAACC,OAAP,GAAiBX,WAAjB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/",
      "sourcesContent": [
        "var createError = require('http-errors');\nvar express = require('express');\nvar path = require('path');\nvar cookieParser = require('cookie-parser');\nvar logger = require('morgan');\nconst { \n  v1: uuidv1,\n  v4: uuidv4,\n} = require('uuid');\n\nvar indexRouter = require('./routes/index');\nvar usersRouter = require('./routes/users');\n\nvar app = express();\nconst corsMiddleware = require('./cors');\napp.options('*', corsMiddleware);\napp.use(corsMiddleware);\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\n\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.use('/', indexRouter);\napp.use('/users', usersRouter);\n\n\n// catch 404 and forward to error handler //använd inte!\n// app.use(function(req, res, next) {\n//   next(createError(404));\n// });\n\n// error handler\n// app.use(function(err, req, res, next) {\n//   // set locals, only providing error in development\n//   res.locals.message = err.message;\n//   res.locals.error = req.app.get('env') === 'development' ? err : {};\n\n//   // render the error page\n//   res.status(err.status || 500);\n//   res.render('error');\n// });\n\n\nconst {MongoClient} = require('mongodb');\nlet url = \"mongodb://localhost:27017/\";\n\n\nfunction startServer(port) {\n  let server = app.listen(3000, () => {\n    let host = server.address().address\n    let port = server.address().port\n    console.log(`Lyssnar på http://${host}:${port}`)\n   })\n  return(server)\n}\n\nfunction clearDatabase() {\n  MongoClient.dropDatabase();\n}\n/*\nlet server = app.listen(8888, () => {\n  let host = server.address().address\n  let port = server.address().port\n  console.log(`Lyssnar på http://${host}:${port}`)\n })*/\n\n startServer()\n\n module.exports = startServer;"
      ]
    },
    "sourceType": "module",
    "mtime": 1634039606176
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"filename\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nconst app = express();\nvar router = express.Router();\n\nconst {\n  MongoClient\n} = require('mongodb');\n\nlet sanitize = require('mongo-sanitize');\n\nconst {\n  v1: uuidv1,\n  v4: uuidv4\n} = require('uuid');\n\nlet url = \"mongodb://localhost:27017/\";\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n})); // Om användaren loggar in,\n// params = användarnamn, hashat lösenord\n// kolla om användarnamn finns, om det finns, kolla om hashat lösenord matchar\n// om det matchar, returnera ett nytt sessionID, lägg även till nytt sessionID\n// i databasen.\n// om inte finns returnera status, baserat på status skriv felmeddelane. \n// returnerna en session ID/Token\n\nrouter.post(\"/login\", (req, res) => {\n  console.log(\"entering login\");\n  let username = req.body.username;\n  let pw = req.body.password;\n  let myquery = {\n    userID: username,\n    password: pw\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        //Skapar sessionID\n        let sessionIDvalue = uuidv4();\n        let newSessionID = {\n          $set: {\n            sessionID: sessionIDvalue\n          }\n        };\n        dbo.collection(\"users\").updateOne(myquery, newSessionID, function (err, result2) {\n          if (err) {\n            db.close();\n            res.sendStatus(500);\n          } else {\n            db.close();\n            res.send({\n              sessionID: sessionIDvalue\n            });\n          }\n        });\n      } else {\n        //If we dont find a result\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om användaren registerar sig,\n// params = användarnamn, hasht lösenord\n// kolla om användarnamn finns, om det finns returna fel, annnars lägg till\n// användare.\n// returnear status (ok)\n\nrouter.post(\"/register\", (req, res) => {\n  let username = req.body.username;\n  let pw = req.body.password;\n  let myquery = {\n    userID: username\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        //Det finns redan en användare med namnet\n        res.sendStatus(500);\n        db.close();\n      } else {\n        //skapa användarobjekt\n        let id = uuidv4();\n        let newUser = {\n          userID: username,\n          password: pw,\n          wall: [],\n          friends: [],\n          requests: [],\n          sessionID: id,\n          invites: []\n        };\n        dbo.collection('users').insertOne(newUser, function (err, result) {\n          if (err) {\n            throw err;\n          } else {\n            db.close();\n            res.sendStatus(200);\n          }\n        });\n      }\n    });\n  });\n}); // Om användare loggar ut\n// params = session ID\n// ta bort session ID, returna status\n// returnarar status (ok)\n\nrouter.patch(\"/logout\", (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = {\n    sessionID: id\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        let sessionIDvalue = uuidv4();\n        let newSessionID = {\n          $set: {\n            sessionID: sessionIDvalue\n          }\n        };\n        dbo.collection(\"users\").updateOne(myquery, newSessionID, function (err, result2) {\n          if (err) {\n            db.close();\n            res.sendStatus(500);\n          } else {\n            db.close();\n            res.sendStatus(200);\n          }\n        });\n      } else {\n        //If we dont find a result\n        console.log(result);\n        res.status(500).send(\"nothing found!\");\n        db.close();\n      }\n    });\n  });\n}); // Om inloggad, vill vi ha en friendlist på sidan\n// params = session ID\n// hämtar alla vänner baserat på session ID\n// returnerar en lista på alla vänner\n\nrouter.post('/friends', (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = {\n    sessionID: id\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        console.log(\"loading friend list\");\n        res.send({\n          friends: result.friends\n        });\n        db.close();\n      } else {\n        console.log(\"no result found!\");\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om inloggad vill vi ha åtkomst till vänner profil\n// params = session ID och användarID(användar Id för vän)  \n// identifierar användarID för sessionID, kollar om användarID(för vän) har \n// användarID (från sessionID) som vän. \n// Om inte vän, returnera status\n// annars returna följande\n// returnerar namn OCH alla meddelanden som skall vara på väggen för vän\n\nrouter.post('/friends/:userID', (req, res) => {\n  console.log(\"loading messages\");\n  let user = req.params.userID;\n  let id = req.body.sessionID;\n  let myquery = {\n    sessionID: id\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n        db.close();\n      } else if (result != null) {\n        //kolla om användarIDet finns i results.friends array\n        //om det finns hämta väggen för användarIDet\n        console.log(result.userID + \" & \" + user);\n\n        if (result.userID === user) {\n          res.send({\n            wall: result.wall\n          });\n          db.close();\n        } else if (result.friends.find(element => element == user)) {\n          let userquery = {\n            userID: user\n          };\n          dbo.collection(\"users\").findOne(userquery, function (err, result) {\n            if (err) {\n              res.sendStatus(500);\n              db.close();\n            } else if (result != null) {\n              res.send({\n                wall: result.wall\n              });\n              db.close();\n            } else {\n              console.log(\"no result found!\");\n              res.sendStatus(500);\n              db.close();\n            }\n          });\n        } else {\n          console.log(\"Weird ass problem!\");\n          res.sendStatus(500);\n          db.close();\n        }\n      } else {\n        console.log(\"no result found!\");\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om inloggad och är på egen profil\n// params = session ID\n// om sessionID inte matchar, returna status\n// annars returnera följande:\n// returnerar namn OCH alla meddelanden som skall vara på väggen för en själv\n\nrouter.post('/', (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = {\n    sessionID: id\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        res.send({\n          \"wall\": result.wall,\n          \"userID\": result.userID\n        }).status(200);\n      } else {\n        console.log(\"no result found!\");\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om sökning sker med specifikt namn\n// params = sträng\n// matcha mot strängen + regex som tillåter sökningen att var inkomplett (t.ex. \n// Ro ska matcha mot Robin). Matchning baseras på användarID\n// retunerar alla användare som matchar strängen + regex\n\nrouter.get('/search/:id', (req, res) => {\n  let id = req.params.id;\n  let myquery = {\n    userID: {\n      $regex: id\n    }\n  }; //behöver mer specifikt uttryck\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").find(myquery).toArray(function (err, result) {\n      // console.log(\"Results:\")\n      // console.log(result)\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        let userList = [];\n\n        for (let i = 0; i < result.length; i++) {\n          userList.push(result[i]);\n        }\n\n        res.send(userList);\n      } else {\n        console.log(\"no result found!\");\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om inloggad och vill toggla en vänförfrågning via knapptryck\n// params = session ID, användarID\n// Om ej togglad, bli togglad, lägg till användarID (för sessionID) som pending invite\n// till användarID (för vn). \n// Om togglad ta bort användar ID (från sessionID) som pending invite för användarID \n// returnar status (om ok kan knappen bli icheckad/avcheckad)\n//Kolla om redan vänner\n//Kolla om \n//Toggle friend request\n\nrouter.patch('/request/:userID', (req, res) => {\n  let user = req.params.userID;\n  let requester = req.body.sessionID;\n  let myquery = {\n    sessionID: requester\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\"); //HITTAR REQUESTER, \n\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        //Kollar om requester redan är vän med user\n        if (result.friends.find(element => element == user)) {\n          db.close();\n          res.sendStatus(500);\n        } else {\n          //kolla om user finns i requester.invites\n          let myquery = {\n            userID: user\n          };\n          let requesterUserID = result.userID;\n          dbo.collection(\"users\").findOne(myquery, function (err, foundUserResult) {\n            if (err) {\n              res.sendStatus(500);\n            } else if (foundUserResult != null) {\n              //KOD TAR BORT REQUEST FRÅN USER\n              //KOD TAR BORT INVITE FRÅN REQUESTER\n              if (foundUserResult.requests.find(element => element == requesterUserID)) {\n                //uppdatera requests och kör updateOne på user\n                foundUserResult.requests.pop(requesterUserID);\n                result.invites.pop(user);\n                let myquery = {\n                  userID: user\n                };\n                let newRequestObject = {\n                  $set: {\n                    requests: foundUserResult.requests\n                  }\n                }; //UPPDATERA USER TA BORT REQUEsT\n\n                dbo.collection(\"users\").updateOne(myquery, newRequestObject, function (err, result2) {\n                  if (err) {\n                    db.close();\n                    res.sendStatus(500);\n                  } else {\n                    //UPPDATERA SELF TA BORT INVITE\n                    let myquery = {\n                      sessionID: requester\n                    };\n                    let newInviteObject = {\n                      $set: {\n                        invites: result.invites\n                      }\n                    };\n                    dbo.collection(\"users\").updateOne(myquery, newInviteObject, function (err, result2) {\n                      if (err) {\n                        db.close();\n                        res.sendStatus(500);\n                      } else {\n                        db.close();\n                        res.sendStatus(200);\n                      }\n                    });\n                  }\n                });\n              } else {\n                //KOD LÄGGER TILL REQUEST TILL USER\n                //KOD LÄGGER TILL INVITIE TILL REQUEsTER\n                foundUserResult.requests.push(requesterUserID);\n                result.invites.push(user);\n                let myquery = {\n                  userID: user\n                };\n                let newRequestObject = {\n                  $set: {\n                    requests: foundUserResult.requests\n                  }\n                }; //UPPDATERA USER LÄGG TILL REQUEsT\n\n                dbo.collection(\"users\").updateOne(myquery, newRequestObject, function (err, result2) {\n                  if (err) {\n                    db.close();\n                    res.sendStatus(500);\n                  } else {\n                    //UPPDATERA SELF LÄGG TILLL INVITE\n                    let myquery = {\n                      sessionID: requester\n                    };\n                    let newInviteObject = {\n                      $set: {\n                        invites: result.invites\n                      }\n                    };\n                    dbo.collection(\"users\").updateOne(myquery, newInviteObject, function (err, result2) {\n                      if (err) {\n                        db.close();\n                        res.sendStatus(500);\n                      } else {\n                        db.close();\n                        res.sendStatus(200);\n                      }\n                    });\n                  }\n                });\n              }\n            } else {\n              console.log(\"no result found!\");\n              res.sendStatus(500);\n              db.close();\n            }\n          });\n        }\n      } else {\n        console.log(\"no result found 2!\");\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om inloggad och vill acceptera/neka vänförfrågan\n// params = sessionID, användarID (person som skickad förfrågan), bool\n// om true acceptera vänförfrågan och lägg till användarID i friends\n// om false neka vänförfrågan\n// ta bort pending invite från sessionID. \n// return status (ok t.ex.)\n//KOLLA OM SESSION ID FINNS\n//KOLLA OM ANVÄNDAR ID FINNS I SESSION REQUESTS\n//KOLLA OM BOOL VARIABEL ÄR SANN ELLER FALSK\n//__OM SANN AccEPTERA REQUEST; PLOCKA BORT REQUEST OCH PLACERA ANVÄNDER ID I VÄNNER (för sessionID)\n//__OM FALSK NEKA REQUEST; PLOCKA BORT REQUEST FRÅN REQUESTS (för sessionID)\n\nrouter.patch(\"/requests\", (req, res) => {\n  let id = req.body.sessionID;\n  let requester = req.body.userID;\n  let myquery = {\n    sessionID: id\n  };\n  let answer = req.body.answer;\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        console.log(\"1\");\n        res.sendStatus(500);\n      } else if (result != null) {\n        if (result.requests.find(element => element == requester)) {\n          if (answer) {\n            //ACCEPTERA\n            let sessionUserID = result.userID;\n            result.requests.pop(requester);\n            result.friends.push(requester);\n            let newValues = {\n              $set: {\n                requests: result.requests,\n                friends: result.friends\n              }\n            };\n            dbo.collection(\"users\").updateOne(myquery, newValues, function (err, result2) {\n              if (err) {\n                db.close();\n                res.sendStatus(500);\n              } else {\n                myquery = {\n                  userID: requester\n                };\n                dbo.collection(\"users\").findOne(myquery, function (err, result) {\n                  if (err) {\n                    res.sendStatus(500);\n                  } else if (result != null) {\n                    result.friends.push(sessionUserID);\n                    newValues = {\n                      $set: {\n                        friends: result.friends\n                      }\n                    };\n                    dbo.collection(\"users\").updateOne(myquery, newValues, function (err, result2) {\n                      if (err) {\n                        db.close();\n                        res.sendStatus(500);\n                      } else {\n                        res.sendStatus(200);\n                      }\n                    });\n                  }\n                });\n              }\n            });\n          } else {\n            //NEKA\n            result.requests.pop(requester);\n            let newValues = {\n              $set: {\n                requests: result.requests\n              }\n            };\n            dbo.collection(\"users\").updateOne(myquery, newValues, function (err, result2) {\n              if (err) {\n                db.close();\n                res.sendStatus(500);\n              } else {\n                db.close();\n                res.sendStatus(200);\n              }\n            });\n          }\n        } else {\n          res.status(500).send(\"nothing found!\");\n          db.close();\n        }\n      } else {\n        //If we dont find a result\n        res.status(500).send(\"nothing found!\");\n        db.close();\n      }\n    });\n  });\n});\nrouter.post('/getMyRequests', (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = {\n    sessionID: id\n  };\n  console.log(id);\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n        db.close();\n      } else if (result != null) {\n        res.send({\n          invites: result.inrequests\n        });\n        db.close();\n      } else {\n        res.status(500).send(\"nothing found!\");\n        db.close();\n      }\n    });\n  });\n});\nrouter.post('/getMySentRequests', (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = {\n    sessionID: id\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        console.log(\"Err in getMySentRequests\");\n        res.sendStatus(500);\n        db.close();\n      } else if (result != null) {\n        // console.log(result.invites)\n        console.log(\"HERE\");\n        console.log(result.invites);\n        res.send({\n          invites: result.invites\n        });\n        db.close();\n      } else {\n        console.log(\"Nothing found\");\n        res.status(500).send(\"nothing found!\");\n        db.close();\n      }\n    });\n  });\n}); //--------------------------------------------------------------------\n//Logged in and posting msg\n\nrouter.post('/addMsg/:userID', (req, res) => {\n  let msg = req.body.msg;\n  let user = req.params.userID;\n  let id = req.body.sessionID;\n  let myquery = {\n    sessionID: id\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        let sender = result.userID;\n\n        if (result.friends.find(element => element == user) || result.userID == user) {\n          console.log(\"HERE\");\n          let userquery = {\n            userID: user\n          };\n          dbo.collection(\"users\").findOne(userquery, function (err, result) {\n            if (err) {\n              res.sendStatus(500);\n            } else if (result != null) {\n              //add msg to friends wall \n              let date = new Date();\n              let msgObject = {\n                msg: msg,\n                time: date,\n                sender: sender\n              };\n              result.wall.push(msgObject);\n              let newValues = {\n                $set: {\n                  wall: result.wall\n                }\n              };\n              dbo.collection(\"users\").updateOne(userquery, newValues, function (err, result2) {\n                if (err) {\n                  db.close();\n                  res.sendStatus(500);\n                } else {\n                  res.send({\n                    \"msg\": msgObject\n                  }).status(200);\n                }\n              });\n            } else {\n              console.log(\"no result found!\");\n              res.sendStatus(500);\n              db.close();\n            }\n          });\n        }\n      }\n    });\n  });\n});\n\nfunction validateMsg(msg) {\n  if (msg.length === 0 || msg.length > 140) {\n    return false;\n  } // if (!(typeof(body.id) === \"string\"))                        { return false }\n  // if (typeof(body.state) !== \"boolean\")                 { return false }\n\n\n  return true;\n}\n\napp.use(function (req, res) {\n  //console.log(\"found it\")\n  res.send(\"Sorry can't find that!\", 404);\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiYXBwIiwicm91dGVyIiwiUm91dGVyIiwiTW9uZ29DbGllbnQiLCJzYW5pdGl6ZSIsInYxIiwidXVpZHYxIiwidjQiLCJ1dWlkdjQiLCJ1cmwiLCJ1c2UiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwicG9zdCIsInJlcSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJ1c2VybmFtZSIsImJvZHkiLCJwdyIsInBhc3N3b3JkIiwibXlxdWVyeSIsInVzZXJJRCIsImNvbm5lY3QiLCJlcnIiLCJkYiIsImRibyIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwicmVzdWx0Iiwic2VuZFN0YXR1cyIsInNlc3Npb25JRHZhbHVlIiwibmV3U2Vzc2lvbklEIiwiJHNldCIsInNlc3Npb25JRCIsInVwZGF0ZU9uZSIsInJlc3VsdDIiLCJjbG9zZSIsInNlbmQiLCJpZCIsIm5ld1VzZXIiLCJ3YWxsIiwiZnJpZW5kcyIsInJlcXVlc3RzIiwiaW52aXRlcyIsImluc2VydE9uZSIsInBhdGNoIiwic3RhdHVzIiwidXNlciIsInBhcmFtcyIsImZpbmQiLCJlbGVtZW50IiwidXNlcnF1ZXJ5IiwiZ2V0IiwiJHJlZ2V4IiwidG9BcnJheSIsInVzZXJMaXN0IiwiaSIsImxlbmd0aCIsInB1c2giLCJyZXF1ZXN0ZXIiLCJyZXF1ZXN0ZXJVc2VySUQiLCJmb3VuZFVzZXJSZXN1bHQiLCJwb3AiLCJuZXdSZXF1ZXN0T2JqZWN0IiwibmV3SW52aXRlT2JqZWN0IiwiYW5zd2VyIiwic2Vzc2lvblVzZXJJRCIsIm5ld1ZhbHVlcyIsImlucmVxdWVzdHMiLCJtc2ciLCJzZW5kZXIiLCJkYXRlIiwiRGF0ZSIsIm1zZ09iamVjdCIsInRpbWUiLCJ2YWxpZGF0ZU1zZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQUQsQ0FBckI7O0FBQ0Es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Q0FBUyx3QkFBVCxFQUFtQyxHQUFuQztBQUNELENBSEQ7QUFNQXVDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQi9FLE1BQWpCIiwic291cmNlUm9vdCI6Ii9ob21lL3ZpbmFoMzMxL0Rlc2t0b3AvdGRwMDEzL3Byb2pla3QvYmFja0VuZC9yb3V0ZXMvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG52YXIgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbmNvbnN0IHtNb25nb0NsaWVudH0gPSByZXF1aXJlKCdtb25nb2RiJyk7XG5sZXQgc2FuaXRpemUgPSByZXF1aXJlKCdtb25nby1zYW5pdGl6ZScpO1xuY29uc3QgeyBcbiAgdjE6IHV1aWR2MSxcbiAgdjQ6IHV1aWR2NCxcbn0gPSByZXF1aXJlKCd1dWlkJyk7XG5sZXQgdXJsID0gXCJtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L1wiXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcblxuXG4vLyBPbSBhbnbDpG5kYXJlbiBsb2dnYXIgaW4sXG4vLyBwYXJhbXMgPSBhbnbDpG5kYXJuYW1uLCBoYXNoYXQgbMO2c2Vub3JkXG4vLyBrb2xsYSBvbSBhbnbDpG5kYXJuYW1uIGZpbm5zLCBvbSBkZXQgZmlubnMsIGtvbGxhIG9tIGhhc2hhdCBsw7ZzZW5vcmQgbWF0Y2hhclxuLy8gb20gZGV0IG1hdGNoYXIsIHJldHVybmVyYSBldHQgbnl0dCBzZXNzaW9uSUQsIGzDpGdnIMOkdmVuIHRpbGwgbnl0dCBzZXNzaW9uSURcbi8vIGkgZGF0YWJhc2VuLlxuLy8gb20gaW50ZSBmaW5ucyByZXR1cm5lcmEgc3RhdHVzLCBiYXNlcmF0IHDDpSBzdGF0dXMgc2tyaXYgZmVsbWVkZGVsYW5lLiBcbi8vIHJldHVybmVybmEgZW4gc2Vzc2lvbiBJRC9Ub2tlblxuXG5yb3V0ZXIucG9zdChcIi9sb2dpblwiLCAocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS5sb2coXCJlbnRlcmluZyBsb2dpblwiKVxuICBsZXQgdXNlcm5hbWUgPSByZXEuYm9keS51c2VybmFtZTtcbiAgbGV0IHB3ID0gcmVxLmJvZHkucGFzc3dvcmQ7XG4gIGxldCBteXF1ZXJ5ID0geyB1c2VySUQ6IHVzZXJuYW1lLCBwYXNzd29yZDogcHd9XG5cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidHZpdHRlclwiKTtcbiAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmRPbmUobXlxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuXG4gICAgICB9IFxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgXG4gICAgICAgIC8vU2thcGFyIHNlc3Npb25JRFxuICAgICAgICBsZXQgc2Vzc2lvbklEdmFsdWUgPSB1dWlkdjQoKTtcbiAgICAgICAgbGV0IG5ld1Nlc3Npb25JRCA9IHsgJHNldDoge3Nlc3Npb25JRDogc2Vzc2lvbklEdmFsdWV9IH07XG4gICAgICAgIFxuICAgICAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLnVwZGF0ZU9uZShteXF1ZXJ5LCBuZXdTZXNzaW9uSUQsIGZ1bmN0aW9uKGVyciwgcmVzdWx0Mikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGIuY2xvc2UoKVxuICAgICAgICAgICAgcmVzLnNlbmQoe3Nlc3Npb25JRDogc2Vzc2lvbklEdmFsdWV9KVxuICBcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBcbiAgICAgIGVsc2Uge1xuICAgICAgICAvL0lmIHdlIGRvbnQgZmluZCBhIHJlc3VsdFxuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgIGRiLmNsb3NlKCk7XG5cbiAgICAgIH1cbiAgICB9KVxuICB9KVxufSlcblxuXG4vLyBPbSBhbnbDpG5kYXJlbiByZWdpc3RlcmFyIHNpZyxcbi8vIHBhcmFtcyA9IGFudsOkbmRhcm5hbW4sIGhhc2h0IGzDtnNlbm9yZFxuLy8ga29sbGEgb20gYW52w6RuZGFybmFtbiBmaW5ucywgb20gZGV0IGZpbm5zIHJldHVybmEgZmVsLCBhbm5uYXJzIGzDpGdnIHRpbGxcbi8vIGFudsOkbmRhcmUuXG4vLyByZXR1cm5lYXIgc3RhdHVzIChvaylcbnJvdXRlci5wb3N0KFwiL3JlZ2lzdGVyXCIsIChyZXEsIHJlcykgPT4ge1xuXG4gIGxldCB1c2VybmFtZSA9IHJlcS5ib2R5LnVzZXJuYW1lO1xuICBsZXQgcHcgPSByZXEuYm9keS5wYXNzd29yZDtcbiAgbGV0IG15cXVlcnkgPSB7IHVzZXJJRDogdXNlcm5hbWV9XG5cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidHZpdHRlclwiKTtcbiAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmRPbmUobXlxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgfSBcbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIC8vRGV0IGZpbm5zIHJlZGFuIGVuIGFudsOkbmRhcmUgbWVkIG5hbW5ldFxuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICB9IFxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vc2thcGEgYW52w6RuZGFyb2JqZWt0XG4gICAgICAgIGxldCBpZCA9IHV1aWR2NCgpO1xuICAgICAgICBsZXQgbmV3VXNlciA9IHt1c2VySUQ6IHVzZXJuYW1lLCBwYXNzd29yZDogcHcsIHdhbGw6IFtdLCBmcmllbmRzOiBbXSwgcmVxdWVzdHM6IFtdLCBzZXNzaW9uSUQ6IGlkLCBpbnZpdGVzOiBbXX1cbiAgICAgICAgZGJvLmNvbGxlY3Rpb24oJ3VzZXJzJykuaW5zZXJ0T25lKG5ld1VzZXIsIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgaWYgKGVycikge3Rocm93IGVycn1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICByZXMuc2VuZFN0YXR1cygyMDApXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufSlcblxuLy8gT20gYW52w6RuZGFyZSBsb2dnYXIgdXRcbi8vIHBhcmFtcyA9IHNlc3Npb24gSURcbi8vIHRhIGJvcnQgc2Vzc2lvbiBJRCwgcmV0dXJuYSBzdGF0dXNcbi8vIHJldHVybmFyYXIgc3RhdHVzIChvaylcbnJvdXRlci5wYXRjaChcIi9sb2dvdXRcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGxldCBpZCA9IHJlcS5ib2R5LnNlc3Npb25JRDtcbiAgbGV0IG15cXVlcnkgPSB7IHNlc3Npb25JRDogaWR9XG5cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidHZpdHRlclwiKTtcbiAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmRPbmUobXlxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgfSBcbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIGxldCBzZXNzaW9uSUR2YWx1ZSA9IHV1aWR2NCgpO1xuICAgICAgICBsZXQgbmV3U2Vzc2lvbklEID0geyAkc2V0OiB7c2Vzc2lvbklEOiBzZXNzaW9uSUR2YWx1ZX0gfTtcbiAgICAgICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS51cGRhdGVPbmUobXlxdWVyeSwgbmV3U2Vzc2lvbklELCBmdW5jdGlvbihlcnIsIHJlc3VsdDIpIHtcbiAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRiLmNsb3NlKClcbiAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDIwMClcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICB9IFxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vSWYgd2UgZG9udCBmaW5kIGEgcmVzdWx0XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJub3RoaW5nIGZvdW5kIVwiKVxuICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIH0pXG59KVxuXG5cbi8vIE9tIGlubG9nZ2FkLCB2aWxsIHZpIGhhIGVuIGZyaWVuZGxpc3QgcMOlIHNpZGFuXG4vLyBwYXJhbXMgPSBzZXNzaW9uIElEXG4vLyBow6RtdGFyIGFsbGEgdsOkbm5lciBiYXNlcmF0IHDDpSBzZXNzaW9uIElEXG4vLyByZXR1cm5lcmFyIGVuIGxpc3RhIHDDpSBhbGxhIHbDpG5uZXJcblxucm91dGVyLnBvc3QoKCcvZnJpZW5kcycpLCAocmVxLCByZXMpID0+IHtcbiAgbGV0IGlkID0gcmVxLmJvZHkuc2Vzc2lvbklEO1xuICBsZXQgbXlxdWVyeSA9IHsgc2Vzc2lvbklEOiBpZH1cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidHZpdHRlclwiKTtcbiAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmRPbmUobXlxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgfSBcbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibG9hZGluZyBmcmllbmQgbGlzdFwiKVxuICAgICAgICByZXMuc2VuZCh7ZnJpZW5kczogcmVzdWx0LmZyaWVuZHN9KVxuICAgICAgICBkYi5jbG9zZSgpO1xuXG4gICAgICB9IFxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibm8gcmVzdWx0IGZvdW5kIVwiKVxuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn0pXG5cblxuLy8gT20gaW5sb2dnYWQgdmlsbCB2aSBoYSDDpXRrb21zdCB0aWxsIHbDpG5uZXIgcHJvZmlsXG4vLyBwYXJhbXMgPSBzZXNzaW9uIElEIG9jaCBhbnbDpG5kYXJJRChhbnbDpG5kYXIgSWQgZsO2ciB2w6RuKSAgXG4vLyBpZGVudGlmaWVyYXIgYW52w6RuZGFySUQgZsO2ciBzZXNzaW9uSUQsIGtvbGxhciBvbSBhbnbDpG5kYXJJRChmw7ZyIHbDpG4pIGhhciBcbi8vIGFudsOkbmRhcklEIChmcsOlbiBzZXNzaW9uSUQpIHNvbSB2w6RuLiBcbi8vIE9tIGludGUgdsOkbiwgcmV0dXJuZXJhIHN0YXR1c1xuLy8gYW5uYXJzIHJldHVybmEgZsO2bGphbmRlXG4vLyByZXR1cm5lcmFyIG5hbW4gT0NIIGFsbGEgbWVkZGVsYW5kZW4gc29tIHNrYWxsIHZhcmEgcMOlIHbDpGdnZW4gZsO2ciB2w6RuXG5cbnJvdXRlci5wb3N0KCgnL2ZyaWVuZHMvOnVzZXJJRCcpLCAocmVxLCByZXMpID0+IHtcbiAgY29uc29sZS5sb2coXCJsb2FkaW5nIG1lc3NhZ2VzXCIpXG5cbiAgbGV0IHVzZXIgPSByZXEucGFyYW1zLnVzZXJJRDtcbiAgbGV0IGlkID0gcmVxLmJvZHkuc2Vzc2lvbklEO1xuICBsZXQgbXlxdWVyeSA9IHsgc2Vzc2lvbklEOiBpZH1cblxuICBNb25nb0NsaWVudC5jb25uZWN0KHVybCwgKGVyciwgZGIpID0+IHtcbiAgICBsZXQgZGJvID0gZGIuZGIoXCJ0dml0dGVyXCIpO1xuICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICB9IFxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgLy9rb2xsYSBvbSBhbnbDpG5kYXJJRGV0IGZpbm5zIGkgcmVzdWx0cy5mcmllbmRzIGFycmF5XG4gICAgICAgIC8vb20gZGV0IGZpbm5zIGjDpG10YSB2w6RnZ2VuIGbDtnIgYW52w6RuZGFySURldFxuICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQudXNlcklEICsgXCIgJiBcIiArIHVzZXIpXG5cbiAgICAgICAgaWYocmVzdWx0LnVzZXJJRCA9PT0gdXNlcikge1xuICAgICAgICAgICAgcmVzLnNlbmQoe3dhbGw6IHJlc3VsdC53YWxsfSlcbiAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgfSBcblxuXG4gICAgICAgIGVsc2UgaWYocmVzdWx0LmZyaWVuZHMuZmluZChlbGVtZW50ID0+IGVsZW1lbnQgPT0gdXNlcikpIHtcbiAgICAgICAgICBsZXQgdXNlcnF1ZXJ5ID0geyB1c2VySUQ6IHVzZXJ9XG4gICAgICAgICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKHVzZXJxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIHJlcy5zZW5kKHt3YWxsOiByZXN1bHQud2FsbH0pXG4gICAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibm8gcmVzdWx0IGZvdW5kIVwiKVxuICAgICAgICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIldlaXJkIGFzcyBwcm9ibGVtIVwiKVxuICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9IFxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibm8gcmVzdWx0IGZvdW5kIVwiKVxuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSlcbiAgICBcbiAgfSlcbn0pXG5cblxuLy8gT20gaW5sb2dnYWQgb2NoIMOkciBww6UgZWdlbiBwcm9maWxcbi8vIHBhcmFtcyA9IHNlc3Npb24gSURcbi8vIG9tIHNlc3Npb25JRCBpbnRlIG1hdGNoYXIsIHJldHVybmEgc3RhdHVzXG4vLyBhbm5hcnMgcmV0dXJuZXJhIGbDtmxqYW5kZTpcbi8vIHJldHVybmVyYXIgbmFtbiBPQ0ggYWxsYSBtZWRkZWxhbmRlbiBzb20gc2thbGwgdmFyYSBww6UgdsOkZ2dlbiBmw7ZyIGVuIHNqw6Rsdlxucm91dGVyLnBvc3QoKCcvJyksIChyZXEsIHJlcykgPT4ge1xuXG4gIGxldCBpZCA9IHJlcS5ib2R5LnNlc3Npb25JRDtcbiAgbGV0IG15cXVlcnkgPSB7IHNlc3Npb25JRDogaWR9XG5cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidHZpdHRlclwiKTtcbiAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmRPbmUobXlxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgfSBcbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIHJlcy5zZW5kKHsgXCJ3YWxsXCIgOiByZXN1bHQud2FsbCwgXCJ1c2VySURcIiA6IHJlc3VsdC51c2VySUR9KS5zdGF0dXMoMjAwKVxuICAgICAgfSBcbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIm5vIHJlc3VsdCBmb3VuZCFcIilcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIH0pXG59KVxuXG4vLyBPbSBzw7ZrbmluZyBza2VyIG1lZCBzcGVjaWZpa3QgbmFtblxuLy8gcGFyYW1zID0gc3Ryw6RuZ1xuLy8gbWF0Y2hhIG1vdCBzdHLDpG5nZW4gKyByZWdleCBzb20gdGlsbMOldGVyIHPDtmtuaW5nZW4gYXR0IHZhciBpbmtvbXBsZXR0ICh0LmV4LiBcbi8vIFJvIHNrYSBtYXRjaGEgbW90IFJvYmluKS4gTWF0Y2huaW5nIGJhc2VyYXMgcMOlIGFudsOkbmRhcklEXG4vLyByZXR1bmVyYXIgYWxsYSBhbnbDpG5kYXJlIHNvbSBtYXRjaGFyIHN0csOkbmdlbiArIHJlZ2V4XG5yb3V0ZXIuZ2V0KCgnL3NlYXJjaC86aWQnKSwgKHJlcSwgcmVzKSA9PiB7XG5cbiAgbGV0IGlkID0gcmVxLnBhcmFtcy5pZDtcbiAgbGV0IG15cXVlcnkgPSB7IHVzZXJJRDogeyRyZWdleDogaWR9fSAvL2JlaMO2dmVyIG1lciBzcGVjaWZpa3QgdXR0cnlja1xuXG4gIE1vbmdvQ2xpZW50LmNvbm5lY3QodXJsLCAoZXJyLCBkYikgPT4ge1xuICAgIGxldCBkYm8gPSBkYi5kYihcInR2aXR0ZXJcIik7XG4gICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kKG15cXVlcnkpLnRvQXJyYXkoZnVuY3Rpb24gKGVyciwgcmVzdWx0KSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIlJlc3VsdHM6XCIpXG4gICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpXG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgIH0gXG4gICAgICBlbHNlIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICBsZXQgdXNlckxpc3QgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB1c2VyTGlzdC5wdXNoKHJlc3VsdFtpXSlcbiAgICAgICAgfVxuICAgICAgICByZXMuc2VuZCh1c2VyTGlzdCk7XG4gICAgICB9IFxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibm8gcmVzdWx0IGZvdW5kIVwiKVxuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn0pXG5cblxuXG4vLyBPbSBpbmxvZ2dhZCBvY2ggdmlsbCB0b2dnbGEgZW4gdsOkbmbDtnJmcsOlZ25pbmcgdmlhIGtuYXBwdHJ5Y2tcbi8vIHBhcmFtcyA9IHNlc3Npb24gSUQsIGFudsOkbmRhcklEXG4vLyBPbSBlaiB0b2dnbGFkLCBibGkgdG9nZ2xhZCwgbMOkZ2cgdGlsbCBhbnbDpG5kYXJJRCAoZsO2ciBzZXNzaW9uSUQpIHNvbSBwZW5kaW5nIGludml0ZVxuLy8gdGlsbCBhbnbDpG5kYXJJRCAoZsO2ciB2bikuIFxuLy8gT20gdG9nZ2xhZCB0YSBib3J0IGFudsOkbmRhciBJRCAoZnLDpW4gc2Vzc2lvbklEKSBzb20gcGVuZGluZyBpbnZpdGUgZsO2ciBhbnbDpG5kYXJJRCBcbi8vIHJldHVybmFyIHN0YXR1cyAob20gb2sga2FuIGtuYXBwZW4gYmxpIGljaGVja2FkL2F2Y2hlY2thZClcblxuLy9Lb2xsYSBvbSByZWRhbiB2w6RubmVyXG4vL0tvbGxhIG9tIFxuLy9Ub2dnbGUgZnJpZW5kIHJlcXVlc3RcbnJvdXRlci5wYXRjaCgoJy9yZXF1ZXN0Lzp1c2VySUQnKSwgKHJlcSwgcmVzKSA9PiB7XG5cbiAgbGV0IHVzZXIgPSByZXEucGFyYW1zLnVzZXJJRDtcbiAgbGV0IHJlcXVlc3RlciA9IHJlcS5ib2R5LnNlc3Npb25JRDtcbiAgbGV0IG15cXVlcnkgPSB7IHNlc3Npb25JRDogcmVxdWVzdGVyIH07XG5cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidHZpdHRlclwiKTtcbiAgICBcbiAgICAvL0hJVFRBUiBSRVFVRVNURVIsIFxuICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICB9IFxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgLy9Lb2xsYXIgb20gcmVxdWVzdGVyIHJlZGFuIMOkciB2w6RuIG1lZCB1c2VyXG4gICAgICAgIGlmKHJlc3VsdC5mcmllbmRzLmZpbmQoZWxlbWVudCA9PiBlbGVtZW50ID09IHVzZXIpKSB7XG4gICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8va29sbGEgb20gdXNlciBmaW5ucyBpIHJlcXVlc3Rlci5pbnZpdGVzXG4gICAgICAgICAgbGV0IG15cXVlcnkgPSB7IHVzZXJJRDogdXNlciB9O1xuICAgICAgICAgIGxldCByZXF1ZXN0ZXJVc2VySUQgPSByZXN1bHQudXNlcklEO1xuICAgICAgICAgIFxuICAgICAgICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIGZvdW5kVXNlclJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgZWxzZSBpZiAoZm91bmRVc2VyUmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vS09EIFRBUiBCT1JUIFJFUVVFU1QgRlLDhU4gVVNFUlxuICAgICAgICAgICAgICAvL0tPRCBUQVIgQk9SVCBJTlZJVEUgRlLDhU4gUkVRVUVTVEVSXG4gICAgICAgICAgICAgIGlmKGZvdW5kVXNlclJlc3VsdC5yZXF1ZXN0cy5maW5kKGVsZW1lbnQgPT4gZWxlbWVudCA9PSByZXF1ZXN0ZXJVc2VySUQpKSB7XG4gICAgICAgICAgICAgICAgLy91cHBkYXRlcmEgcmVxdWVzdHMgb2NoIGvDtnIgdXBkYXRlT25lIHDDpSB1c2VyXG4gICAgICAgICAgICAgICAgZm91bmRVc2VyUmVzdWx0LnJlcXVlc3RzLnBvcChyZXF1ZXN0ZXJVc2VySUQpO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5pbnZpdGVzLnBvcCh1c2VyKTtcbiAgICAgICAgICAgICAgICBsZXQgbXlxdWVyeSA9IHsgdXNlcklEOiB1c2VyIH07XG4gICAgICAgICAgICAgICAgbGV0IG5ld1JlcXVlc3RPYmplY3QgPSB7ICRzZXQ6IHtyZXF1ZXN0czogZm91bmRVc2VyUmVzdWx0LnJlcXVlc3RzfSB9O1xuICAgICAgICAgICAgICAgIC8vVVBQREFURVJBIFVTRVIgVEEgQk9SVCBSRVFVRXNUXG4gICAgICAgICAgICAgICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS51cGRhdGVPbmUobXlxdWVyeSwgbmV3UmVxdWVzdE9iamVjdCwgZnVuY3Rpb24oZXJyLCByZXN1bHQyKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL1VQUERBVEVSQSBTRUxGIFRBIEJPUlQgSU5WSVRFXG4gICAgICAgICAgICAgICAgICAgIGxldCBteXF1ZXJ5ID0geyBzZXNzaW9uSUQ6IHJlcXVlc3RlciB9O1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3SW52aXRlT2JqZWN0ID0geyAkc2V0OiB7aW52aXRlczogcmVzdWx0Lmludml0ZXN9fTtcbiAgICAgICAgICAgICAgICAgICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS51cGRhdGVPbmUobXlxdWVyeSwgbmV3SW52aXRlT2JqZWN0LCBmdW5jdGlvbihlcnIsIHJlc3VsdDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNsb3NlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDIwMClcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vS09EIEzDhEdHRVIgVElMTCBSRVFVRVNUIFRJTEwgVVNFUlxuICAgICAgICAgICAgICAgIC8vS09EIEzDhEdHRVIgVElMTCBJTlZJVElFIFRJTEwgUkVRVUVzVEVSXG4gICAgICAgICAgICAgICAgZm91bmRVc2VyUmVzdWx0LnJlcXVlc3RzLnB1c2gocmVxdWVzdGVyVXNlcklEKTtcbiAgICAgICAgICAgICAgICByZXN1bHQuaW52aXRlcy5wdXNoKHVzZXIpO1xuICAgICAgICAgICAgICAgIGxldCBteXF1ZXJ5ID0geyB1c2VySUQ6IHVzZXIgfTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgbmV3UmVxdWVzdE9iamVjdCA9IHsgJHNldDoge3JlcXVlc3RzOiBmb3VuZFVzZXJSZXN1bHQucmVxdWVzdHN9IH07XG4gICAgICAgICAgICAgICAgLy9VUFBEQVRFUkEgVVNFUiBMw4RHRyBUSUxMIFJFUVVFc1RcbiAgICAgICAgICAgICAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLnVwZGF0ZU9uZShteXF1ZXJ5LCBuZXdSZXF1ZXN0T2JqZWN0LCBmdW5jdGlvbihlcnIsIHJlc3VsdDIpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vVVBQREFURVJBIFNFTEYgTMOER0cgVElMTEwgSU5WSVRFXG4gICAgICAgICAgICAgICAgICAgIGxldCBteXF1ZXJ5ID0geyBzZXNzaW9uSUQ6IHJlcXVlc3RlciB9O1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3SW52aXRlT2JqZWN0ID0geyAkc2V0OiB7aW52aXRlczogcmVzdWx0Lmludml0ZXN9fTtcbiAgICAgICAgICAgICAgICAgICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS51cGRhdGVPbmUobXlxdWVyeSwgbmV3SW52aXRlT2JqZWN0LCBmdW5jdGlvbihlcnIsIHJlc3VsdDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNsb3NlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDIwMClcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJubyByZXN1bHQgZm91bmQhXCIpXG4gICAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibm8gcmVzdWx0IGZvdW5kIDIhXCIpXG4gICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgIH1cblxuICAgIH0pO1xuICAgIFxuICB9KVxuXG59KVxuLy8gT20gaW5sb2dnYWQgb2NoIHZpbGwgYWNjZXB0ZXJhL25la2EgdsOkbmbDtnJmcsOlZ2FuXG4vLyBwYXJhbXMgPSBzZXNzaW9uSUQsIGFudsOkbmRhcklEIChwZXJzb24gc29tIHNraWNrYWQgZsO2cmZyw6VnYW4pLCBib29sXG4vLyBvbSB0cnVlIGFjY2VwdGVyYSB2w6RuZsO2cmZyw6VnYW4gb2NoIGzDpGdnIHRpbGwgYW52w6RuZGFySUQgaSBmcmllbmRzXG4vLyBvbSBmYWxzZSBuZWthIHbDpG5mw7ZyZnLDpWdhblxuLy8gdGEgYm9ydCBwZW5kaW5nIGludml0ZSBmcsOlbiBzZXNzaW9uSUQuIFxuLy8gcmV0dXJuIHN0YXR1cyAob2sgdC5leC4pXG5cbi8vS09MTEEgT00gU0VTU0lPTiBJRCBGSU5OU1xuLy9LT0xMQSBPTSBBTlbDhE5EQVIgSUQgRklOTlMgSSBTRVNTSU9OIFJFUVVFU1RTXG4vL0tPTExBIE9NIEJPT0wgVkFSSUFCRUwgw4RSIFNBTk4gRUxMRVIgRkFMU0tcbi8vX19PTSBTQU5OIEFjY0VQVEVSQSBSRVFVRVNUOyBQTE9DS0EgQk9SVCBSRVFVRVNUIE9DSCBQTEFDRVJBIEFOVsOETkRFUiBJRCBJIFbDhE5ORVIgKGbDtnIgc2Vzc2lvbklEKVxuLy9fX09NIEZBTFNLIE5FS0EgUkVRVUVTVDsgUExPQ0tBIEJPUlQgUkVRVUVTVCBGUsOFTiBSRVFVRVNUUyAoZsO2ciBzZXNzaW9uSUQpXG5yb3V0ZXIucGF0Y2goXCIvcmVxdWVzdHNcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGxldCBpZCA9IHJlcS5ib2R5LnNlc3Npb25JRDtcbiAgbGV0IHJlcXVlc3RlciA9IHJlcS5ib2R5LnVzZXJJRDtcbiAgbGV0IG15cXVlcnkgPSB7IHNlc3Npb25JRDogaWR9XG4gIGxldCBhbnN3ZXIgPSByZXEuYm9keS5hbnN3ZXI7XG5cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidHZpdHRlclwiKTtcbiAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmRPbmUobXlxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCIxXCIpXG4gICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgIH0gXG4gICAgICBlbHNlIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICBpZihyZXN1bHQucmVxdWVzdHMuZmluZChlbGVtZW50ID0+IGVsZW1lbnQgPT0gcmVxdWVzdGVyKSkge1xuICAgICAgICAgIGlmIChhbnN3ZXIpIHtcbiAgICAgICAgICAgIC8vQUNDRVBURVJBXG4gICAgICAgICAgICBsZXQgc2Vzc2lvblVzZXJJRCA9IHJlc3VsdC51c2VySUQ7XG4gICAgICAgICAgICByZXN1bHQucmVxdWVzdHMucG9wKHJlcXVlc3RlcilcbiAgICAgICAgICAgIHJlc3VsdC5mcmllbmRzLnB1c2gocmVxdWVzdGVyKVxuICAgICAgICAgICAgbGV0IG5ld1ZhbHVlcyA9IHsgJHNldDoge3JlcXVlc3RzOiByZXN1bHQucmVxdWVzdHMsIGZyaWVuZHM6IHJlc3VsdC5mcmllbmRzfSB9O1xuICAgICAgICAgICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS51cGRhdGVPbmUobXlxdWVyeSwgbmV3VmFsdWVzLCBmdW5jdGlvbihlcnIsIHJlc3VsdDIpIHtcbiAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG15cXVlcnkgPSB7IHVzZXJJRDogcmVxdWVzdGVyfVxuICAgICAgICAgICAgICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHsgXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5mcmllbmRzLnB1c2goc2Vzc2lvblVzZXJJRClcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVzID0geyAkc2V0OiB7ZnJpZW5kczogcmVzdWx0LmZyaWVuZHN9IH07XG4gICAgICAgICAgICAgICAgICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikudXBkYXRlT25lKG15cXVlcnksIG5ld1ZhbHVlcywgZnVuY3Rpb24oZXJyLCByZXN1bHQyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2VuZFN0YXR1cygyMDApXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vTkVLQVxuICAgICAgICAgICAgcmVzdWx0LnJlcXVlc3RzLnBvcChyZXF1ZXN0ZXIpXG4gICAgICAgICAgICBsZXQgbmV3VmFsdWVzID0geyAkc2V0OiB7cmVxdWVzdHM6IHJlc3VsdC5yZXF1ZXN0c30gfTtcbiAgICAgICAgICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikudXBkYXRlT25lKG15cXVlcnksIG5ld1ZhbHVlcywgZnVuY3Rpb24oZXJyLCByZXN1bHQyKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYi5jbG9zZSgpXG4gICAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoMjAwKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJub3RoaW5nIGZvdW5kIVwiKVxuICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH0gXG4gICAgICBlbHNlIHtcbiAgICAgICAgLy9JZiB3ZSBkb250IGZpbmQgYSByZXN1bHRcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJub3RoaW5nIGZvdW5kIVwiKVxuICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIH0pXG59KVxuXG5yb3V0ZXIucG9zdCgnL2dldE15UmVxdWVzdHMnLCAocmVxLCByZXMpID0+IHtcblxuICBsZXQgaWQgPSByZXEuYm9keS5zZXNzaW9uSUQ7XG4gIGxldCBteXF1ZXJ5ID0ge3Nlc3Npb25JRDogaWR9XG5cbiAgY29uc29sZS5sb2coaWQpXG5cblxuICBNb25nb0NsaWVudC5jb25uZWN0KHVybCwgKGVyciwgZGIpID0+IHtcbiAgICBsZXQgZGJvID0gZGIuZGIoXCJ0dml0dGVyXCIpO1xuICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICB9IFxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHsgXG4gICAgICAgIHJlcy5zZW5kKHtpbnZpdGVzOiByZXN1bHQuaW5yZXF1ZXN0c30pXG4gICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoXCJub3RoaW5nIGZvdW5kIVwiKVxuICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIH0pXG5cbn0pXG5cbnJvdXRlci5wb3N0KCcvZ2V0TXlTZW50UmVxdWVzdHMnLCAocmVxLCByZXMpID0+IHtcblxuICBsZXQgaWQgPSByZXEuYm9keS5zZXNzaW9uSUQ7XG4gIGxldCBteXF1ZXJ5ID0ge3Nlc3Npb25JRDogaWR9XG5cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidHZpdHRlclwiKTtcbiAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmRPbmUobXlxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFcnIgaW4gZ2V0TXlTZW50UmVxdWVzdHNcIilcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgfSBcbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdC5pbnZpdGVzKVxuICAgICAgICBjb25zb2xlLmxvZyhcIkhFUkVcIilcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0Lmludml0ZXMpXG4gICAgICAgIHJlcy5zZW5kKHtpbnZpdGVzOiByZXN1bHQuaW52aXRlc30pXG4gICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJOb3RoaW5nIGZvdW5kXCIpXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKFwibm90aGluZyBmb3VuZCFcIilcbiAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KVxuICB9KVxuXG59KVxuXG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vTG9nZ2VkIGluIGFuZCBwb3N0aW5nIG1zZ1xucm91dGVyLnBvc3QoJy9hZGRNc2cvOnVzZXJJRCcsIChyZXEsIHJlcykgPT4ge1xuXG4gIGxldCBtc2cgPSByZXEuYm9keS5tc2c7XG4gIGxldCB1c2VyID0gcmVxLnBhcmFtcy51c2VySUQ7XG4gIGxldCBpZCA9IHJlcS5ib2R5LnNlc3Npb25JRDtcbiAgbGV0IG15cXVlcnkgPSB7c2Vzc2lvbklEOiBpZH1cblxuICBNb25nb0NsaWVudC5jb25uZWN0KHVybCwgKGVyciwgZGIpID0+IHtcbiAgICBsZXQgZGJvID0gZGIuZGIoXCJ0dml0dGVyXCIpO1xuICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICB9IFxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHsgXG4gICAgICAgIGxldCBzZW5kZXIgPSByZXN1bHQudXNlcklEO1xuICAgICAgICBpZihyZXN1bHQuZnJpZW5kcy5maW5kKGVsZW1lbnQgPT4gZWxlbWVudCA9PSB1c2VyKSB8fCByZXN1bHQudXNlcklEID09IHVzZXIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkhFUkVcIilcbiAgICAgICAgICBsZXQgdXNlcnF1ZXJ5ID0geyB1c2VySUQ6IHVzZXJ9XG4gICAgICAgICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKHVzZXJxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIC8vYWRkIG1zZyB0byBmcmllbmRzIHdhbGwgXG4gICAgICAgICAgICAgIGxldCBkYXRlID0gIG5ldyBEYXRlKCkgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgbGV0IG1zZ09iamVjdCA9IHttc2c6IG1zZywgdGltZTogZGF0ZSwgc2VuZGVyOiBzZW5kZXJ9O1xuICAgICAgICAgICAgICByZXN1bHQud2FsbC5wdXNoKG1zZ09iamVjdClcbiAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlcyA9IHsgJHNldDoge3dhbGw6IHJlc3VsdC53YWxsfSB9O1xuICAgICAgICAgICAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLnVwZGF0ZU9uZSh1c2VycXVlcnksIG5ld1ZhbHVlcywgZnVuY3Rpb24oZXJyLCByZXN1bHQyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoe1wibXNnXCIgOiBtc2dPYmplY3R9KS5zdGF0dXMoMjAwKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJubyByZXN1bHQgZm91bmQhXCIpXG4gICAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn0pXG5cbmZ1bmN0aW9uIHZhbGlkYXRlTXNnKG1zZykge1xuICBpZiAobXNnLmxlbmd0aCA9PT0gMCB8fCBtc2cubGVuZ3RoID4gMTQwKSB7IHJldHVybiBmYWxzZSB9XG4gIC8vIGlmICghKHR5cGVvZihib2R5LmlkKSA9PT0gXCJzdHJpbmdcIikpICAgICAgICAgICAgICAgICAgICAgICAgeyByZXR1cm4gZmFsc2UgfVxuICAvLyBpZiAodHlwZW9mKGJvZHkuc3RhdGUpICE9PSBcImJvb2xlYW5cIikgICAgICAgICAgICAgICAgIHsgcmV0dXJuIGZhbHNlIH1cbiAgcmV0dXJuIHRydWVcbn1cblxuYXBwLnVzZShmdW5jdGlvbiAocmVxLCByZXMpIHtcbiAgLy9jb25zb2xlLmxvZyhcImZvdW5kIGl0XCIpXG4gIHJlcy5zZW5kKFwiU29ycnkgY2FuJ3QgZmluZCB0aGF0IVwiLCA0MDQpXG59KVxuXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuXG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "express",
        "require",
        "app",
        "router",
        "Router",
        "MongoClient",
        "sanitize",
        "v1",
        "uuidv1",
        "v4",
        "uuidv4",
        "url",
        "use",
        "json",
        "urlencoded",
        "extended",
        "post",
        "req",
        "res",
        "console",
        "log",
        "username",
        "body",
        "pw",
        "password",
        "myquery",
        "userID",
        "connect",
        "err",
        "db",
        "dbo",
        "collection",
        "findOne",
        "result",
        "sendStatus",
        "sessionIDvalue",
        "newSessionID",
        "$set",
        "sessionID",
        "updateOne",
        "result2",
        "close",
        "send",
        "id",
        "newUser",
        "wall",
        "friends",
        "requests",
        "invites",
        "insertOne",
        "patch",
        "status",
        "user",
        "params",
        "find",
        "element",
        "userquery",
        "get",
        "$regex",
        "toArray",
        "userList",
        "i",
        "length",
        "push",
        "requester",
        "requesterUserID",
        "foundUserResult",
        "pop",
        "newRequestObject",
        "newInviteObject",
        "answer",
        "sessionUserID",
        "newValues",
        "inrequests",
        "msg",
        "sender",
        "date",
        "Date",
        "msgObject",
        "time",
        "validateMsg",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
      "sourcesContent": [
        "var express = require('express');\nconst app = express();\nvar router = express.Router();\nconst {MongoClient} = require('mongodb');\nlet sanitize = require('mongo-sanitize');\nconst { \n  v1: uuidv1,\n  v4: uuidv4,\n} = require('uuid');\nlet url = \"mongodb://localhost:27017/\"\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n\n// Om användaren loggar in,\n// params = användarnamn, hashat lösenord\n// kolla om användarnamn finns, om det finns, kolla om hashat lösenord matchar\n// om det matchar, returnera ett nytt sessionID, lägg även till nytt sessionID\n// i databasen.\n// om inte finns returnera status, baserat på status skriv felmeddelane. \n// returnerna en session ID/Token\n\nrouter.post(\"/login\", (req, res) => {\n  console.log(\"entering login\")\n  let username = req.body.username;\n  let pw = req.body.password;\n  let myquery = { userID: username, password: pw}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n\n      } \n      else if (result != null) {\n        \n        //Skapar sessionID\n        let sessionIDvalue = uuidv4();\n        let newSessionID = { $set: {sessionID: sessionIDvalue} };\n        \n        dbo.collection(\"users\").updateOne(myquery, newSessionID, function(err, result2) {\n          if (err) {\n            db.close();\n            res.sendStatus(500)\n \n          }\n          else {\n            db.close()\n            res.send({sessionID: sessionIDvalue})\n  \n          }\n        });\n      } \n      else {\n        //If we dont find a result\n        res.sendStatus(500)\n        db.close();\n\n      }\n    })\n  })\n})\n\n\n// Om användaren registerar sig,\n// params = användarnamn, hasht lösenord\n// kolla om användarnamn finns, om det finns returna fel, annnars lägg till\n// användare.\n// returnear status (ok)\nrouter.post(\"/register\", (req, res) => {\n\n  let username = req.body.username;\n  let pw = req.body.password;\n  let myquery = { userID: username}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        //Det finns redan en användare med namnet\n        res.sendStatus(500)\n        db.close();\n      } \n      else {\n        //skapa användarobjekt\n        let id = uuidv4();\n        let newUser = {userID: username, password: pw, wall: [], friends: [], requests: [], sessionID: id, invites: []}\n        dbo.collection('users').insertOne(newUser, function(err, result) {\n          if (err) {throw err}\n          else {\n            db.close();\n            res.sendStatus(200)\n          }\n        });\n      }\n    })\n  })\n})\n\n// Om användare loggar ut\n// params = session ID\n// ta bort session ID, returna status\n// returnarar status (ok)\nrouter.patch(\"/logout\", (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = { sessionID: id}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        let sessionIDvalue = uuidv4();\n        let newSessionID = { $set: {sessionID: sessionIDvalue} };\n        dbo.collection(\"users\").updateOne(myquery, newSessionID, function(err, result2) {\n          if (err) {\n            db.close();\n            res.sendStatus(500)\n          }\n          else {\n            db.close()\n            res.sendStatus(200)\n          }\n        });\n\n      } \n      else {\n        //If we dont find a result\n        console.log(result)\n        res.status(500).send(\"nothing found!\")\n        db.close();\n      }\n    })\n  })\n})\n\n\n// Om inloggad, vill vi ha en friendlist på sidan\n// params = session ID\n// hämtar alla vänner baserat på session ID\n// returnerar en lista på alla vänner\n\nrouter.post(('/friends'), (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = { sessionID: id}\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        console.log(\"loading friend list\")\n        res.send({friends: result.friends})\n        db.close();\n\n      } \n      else {\n        console.log(\"no result found!\")\n        res.sendStatus(500)\n        db.close();\n      }\n    })\n  })\n})\n\n\n// Om inloggad vill vi ha åtkomst till vänner profil\n// params = session ID och användarID(användar Id för vän)  \n// identifierar användarID för sessionID, kollar om användarID(för vän) har \n// användarID (från sessionID) som vän. \n// Om inte vän, returnera status\n// annars returna följande\n// returnerar namn OCH alla meddelanden som skall vara på väggen för vän\n\nrouter.post(('/friends/:userID'), (req, res) => {\n  console.log(\"loading messages\")\n\n  let user = req.params.userID;\n  let id = req.body.sessionID;\n  let myquery = { sessionID: id}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n        db.close();\n      } \n      else if (result != null) {\n        //kolla om användarIDet finns i results.friends array\n        //om det finns hämta väggen för användarIDet\n        console.log(result.userID + \" & \" + user)\n\n        if(result.userID === user) {\n            res.send({wall: result.wall})\n            db.close();\n          } \n\n\n        else if(result.friends.find(element => element == user)) {\n          let userquery = { userID: user}\n          dbo.collection(\"users\").findOne(userquery, function(err, result) {\n            if (err) {\n              res.sendStatus(500)\n              db.close();\n            } \n            else if (result != null) {\n              res.send({wall: result.wall})\n              db.close();\n            } \n            else {\n              console.log(\"no result found!\")\n              res.sendStatus(500)\n              db.close();\n            }\n          })\n        }\n        else {\n          console.log(\"Weird ass problem!\")\n          res.sendStatus(500)\n          db.close();\n        }\n      } \n      else {\n        console.log(\"no result found!\")\n        res.sendStatus(500)\n        db.close();\n      }\n    })\n    \n  })\n})\n\n\n// Om inloggad och är på egen profil\n// params = session ID\n// om sessionID inte matchar, returna status\n// annars returnera följande:\n// returnerar namn OCH alla meddelanden som skall vara på väggen för en själv\nrouter.post(('/'), (req, res) => {\n\n  let id = req.body.sessionID;\n  let myquery = { sessionID: id}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        res.send({ \"wall\" : result.wall, \"userID\" : result.userID}).status(200)\n      } \n      else {\n        console.log(\"no result found!\")\n        res.sendStatus(500)\n        db.close();\n      }\n    })\n  })\n})\n\n// Om sökning sker med specifikt namn\n// params = sträng\n// matcha mot strängen + regex som tillåter sökningen att var inkomplett (t.ex. \n// Ro ska matcha mot Robin). Matchning baseras på användarID\n// retunerar alla användare som matchar strängen + regex\nrouter.get(('/search/:id'), (req, res) => {\n\n  let id = req.params.id;\n  let myquery = { userID: {$regex: id}} //behöver mer specifikt uttryck\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").find(myquery).toArray(function (err, result) {\n      // console.log(\"Results:\")\n      // console.log(result)\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        let userList = [];\n        for (let i = 0; i < result.length; i++) {\n          userList.push(result[i])\n        }\n        res.send(userList);\n      } \n      else {\n        console.log(\"no result found!\")\n        res.sendStatus(500)\n        db.close();\n      }\n    })\n  })\n})\n\n\n\n// Om inloggad och vill toggla en vänförfrågning via knapptryck\n// params = session ID, användarID\n// Om ej togglad, bli togglad, lägg till användarID (för sessionID) som pending invite\n// till användarID (för vn). \n// Om togglad ta bort användar ID (från sessionID) som pending invite för användarID \n// returnar status (om ok kan knappen bli icheckad/avcheckad)\n\n//Kolla om redan vänner\n//Kolla om \n//Toggle friend request\nrouter.patch(('/request/:userID'), (req, res) => {\n\n  let user = req.params.userID;\n  let requester = req.body.sessionID;\n  let myquery = { sessionID: requester };\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    \n    //HITTAR REQUESTER, \n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        //Kollar om requester redan är vän med user\n        if(result.friends.find(element => element == user)) {\n          db.close();\n          res.sendStatus(500);\n        }\n        else {\n          //kolla om user finns i requester.invites\n          let myquery = { userID: user };\n          let requesterUserID = result.userID;\n          \n          dbo.collection(\"users\").findOne(myquery, function(err, foundUserResult) {\n            if (err) {\n              res.sendStatus(500)\n            } \n            else if (foundUserResult != null) {\n              \n              //KOD TAR BORT REQUEST FRÅN USER\n              //KOD TAR BORT INVITE FRÅN REQUESTER\n              if(foundUserResult.requests.find(element => element == requesterUserID)) {\n                //uppdatera requests och kör updateOne på user\n                foundUserResult.requests.pop(requesterUserID);\n                result.invites.pop(user);\n                let myquery = { userID: user };\n                let newRequestObject = { $set: {requests: foundUserResult.requests} };\n                //UPPDATERA USER TA BORT REQUEsT\n                dbo.collection(\"users\").updateOne(myquery, newRequestObject, function(err, result2) {\n                  if (err) {\n                    db.close();\n                    res.sendStatus(500)\n                  }\n                  else {\n                    //UPPDATERA SELF TA BORT INVITE\n                    let myquery = { sessionID: requester };\n                    let newInviteObject = { $set: {invites: result.invites}};\n                    dbo.collection(\"users\").updateOne(myquery, newInviteObject, function(err, result2) {\n                      if (err) {\n                        db.close();\n                        res.sendStatus(500)\n                      }\n                      else {\n                        db.close()\n                        res.sendStatus(200)\n                      }\n                    });\n                  }\n                });\n              }\n              else {\n                //KOD LÄGGER TILL REQUEST TILL USER\n                //KOD LÄGGER TILL INVITIE TILL REQUEsTER\n                foundUserResult.requests.push(requesterUserID);\n                result.invites.push(user);\n                let myquery = { userID: user };\n                \n                let newRequestObject = { $set: {requests: foundUserResult.requests} };\n                //UPPDATERA USER LÄGG TILL REQUEsT\n                dbo.collection(\"users\").updateOne(myquery, newRequestObject, function(err, result2) {\n                  if (err) {\n                    db.close();\n                    res.sendStatus(500)\n                  }\n                  else {\n                    //UPPDATERA SELF LÄGG TILLL INVITE\n                    let myquery = { sessionID: requester };\n                    let newInviteObject = { $set: {invites: result.invites}};\n                    dbo.collection(\"users\").updateOne(myquery, newInviteObject, function(err, result2) {\n                      if (err) {\n                        db.close();\n                        res.sendStatus(500)\n                      }\n                      else {\n                        db.close()\n                        res.sendStatus(200)\n                      }\n                    });\n                  }\n                });\n              }\n            }\n            else {\n              console.log(\"no result found!\")\n              res.sendStatus(500)\n              db.close();\n            }\n          });\n        }\n      }\n      else {\n        console.log(\"no result found 2!\")\n        res.sendStatus(500)\n        db.close();\n      }\n\n    });\n    \n  })\n\n})\n// Om inloggad och vill acceptera/neka vänförfrågan\n// params = sessionID, användarID (person som skickad förfrågan), bool\n// om true acceptera vänförfrågan och lägg till användarID i friends\n// om false neka vänförfrågan\n// ta bort pending invite från sessionID. \n// return status (ok t.ex.)\n\n//KOLLA OM SESSION ID FINNS\n//KOLLA OM ANVÄNDAR ID FINNS I SESSION REQUESTS\n//KOLLA OM BOOL VARIABEL ÄR SANN ELLER FALSK\n//__OM SANN AccEPTERA REQUEST; PLOCKA BORT REQUEST OCH PLACERA ANVÄNDER ID I VÄNNER (för sessionID)\n//__OM FALSK NEKA REQUEST; PLOCKA BORT REQUEST FRÅN REQUESTS (för sessionID)\nrouter.patch(\"/requests\", (req, res) => {\n  let id = req.body.sessionID;\n  let requester = req.body.userID;\n  let myquery = { sessionID: id}\n  let answer = req.body.answer;\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        console.log(\"1\")\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        if(result.requests.find(element => element == requester)) {\n          if (answer) {\n            //ACCEPTERA\n            let sessionUserID = result.userID;\n            result.requests.pop(requester)\n            result.friends.push(requester)\n            let newValues = { $set: {requests: result.requests, friends: result.friends} };\n            dbo.collection(\"users\").updateOne(myquery, newValues, function(err, result2) {\n              if (err) {\n                db.close();\n                res.sendStatus(500)\n              }\n              else {\n                myquery = { userID: requester}\n                dbo.collection(\"users\").findOne(myquery, function(err, result) {\n                  if (err) {\n                    res.sendStatus(500)\n                  } \n                  else if (result != null) { \n                    result.friends.push(sessionUserID)\n                    newValues = { $set: {friends: result.friends} };\n                    dbo.collection(\"users\").updateOne(myquery, newValues, function(err, result2) {\n                      if (err) {\n                        db.close();\n                        res.sendStatus(500)\n                      }\n                      else {\n                        res.sendStatus(200)\n                      }\n                    });\n                  }\n                })\n              }\n            });\n            \n          }\n          else {\n            //NEKA\n            result.requests.pop(requester)\n            let newValues = { $set: {requests: result.requests} };\n            dbo.collection(\"users\").updateOne(myquery, newValues, function(err, result2) {\n              if (err) {\n                db.close();\n                res.sendStatus(500)\n              }\n              else {\n                db.close()\n                res.sendStatus(200)\n              }\n            });\n          }\n        }\n        else {\n          res.status(500).send(\"nothing found!\")\n          db.close();\n        }\n      } \n      else {\n        //If we dont find a result\n        res.status(500).send(\"nothing found!\")\n        db.close();\n      }\n    })\n  })\n})\n\nrouter.post('/getMyRequests', (req, res) => {\n\n  let id = req.body.sessionID;\n  let myquery = {sessionID: id}\n\n  console.log(id)\n\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n        db.close();\n      } \n      else if (result != null) { \n        res.send({invites: result.inrequests})\n        db.close();\n      }\n      else {\n        res.status(500).send(\"nothing found!\")\n        db.close();\n      }\n    })\n  })\n\n})\n\nrouter.post('/getMySentRequests', (req, res) => {\n\n  let id = req.body.sessionID;\n  let myquery = {sessionID: id}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        console.log(\"Err in getMySentRequests\")\n        res.sendStatus(500)\n        db.close();\n      } \n      else if (result != null) {\n        // console.log(result.invites)\n        console.log(\"HERE\")\n        console.log(result.invites)\n        res.send({invites: result.invites})\n        db.close();\n      }\n      else {\n        console.log(\"Nothing found\")\n        res.status(500).send(\"nothing found!\")\n        db.close();\n      }\n    })\n  })\n\n})\n\n\n//--------------------------------------------------------------------\n//Logged in and posting msg\nrouter.post('/addMsg/:userID', (req, res) => {\n\n  let msg = req.body.msg;\n  let user = req.params.userID;\n  let id = req.body.sessionID;\n  let myquery = {sessionID: id}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) { \n        let sender = result.userID;\n        if(result.friends.find(element => element == user) || result.userID == user) {\n          console.log(\"HERE\")\n          let userquery = { userID: user}\n          dbo.collection(\"users\").findOne(userquery, function(err, result) {\n            if (err) {\n              res.sendStatus(500)\n            } \n            else if (result != null) {\n              //add msg to friends wall \n              let date =  new Date()               \n              let msgObject = {msg: msg, time: date, sender: sender};\n              result.wall.push(msgObject)\n              let newValues = { $set: {wall: result.wall} };\n              dbo.collection(\"users\").updateOne(userquery, newValues, function(err, result2) {\n                if (err) {\n                  db.close();\n                  res.sendStatus(500)\n                } else {\n                  res.send({\"msg\" : msgObject}).status(200)\n                }\n              })\n            } \n            else {\n              console.log(\"no result found!\")\n              res.sendStatus(500)\n              db.close();\n            }\n          })\n        }\n      }\n    })\n  })\n})\n\nfunction validateMsg(msg) {\n  if (msg.length === 0 || msg.length > 140) { return false }\n  // if (!(typeof(body.id) === \"string\"))                        { return false }\n  // if (typeof(body.state) !== \"boolean\")                 { return false }\n  return true\n}\n\napp.use(function (req, res) {\n  //console.log(\"found it\")\n  res.send(\"Sorry can't find that!\", 404)\n})\n\n\nmodule.exports = router;\n\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1634629371846
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"filename\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/users.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/users.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nvar router = express.Router();\n/* GET users listing. */\n\nrouter.get('/', function (req, res, next) {\n  res.send('respond with a resource');\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInNlbmQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUNBLElBQUlDLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFSLEVBQWI7QUFFQTs7QUFDQUQsTUFBTSxDQUFDRSxHQUFQLENBQVcsR0FBWCxFQUFnQixVQUFTQyxHQUFULEVBQWNDLEdBQWQsRUFBbUJDLElBQW5CLEVBQXlCO0FBQ3ZDRCxFQUFBQSxHQUFHLENBQUNFLElBQUosQ0FBUyx5QkFBVDtBQUNELENBRkQ7QUFJQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCUixNQUFqQiIsInNvdXJjZVJvb3QiOiIvaG9tZS92aW5haDMzMS9EZXNrdG9wL3RkcDAxMy9wcm9qZWt0L2JhY2tFbmQvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8qIEdFVCB1c2VycyBsaXN0aW5nLiAqL1xucm91dGVyLmdldCgnLycsIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIHJlcy5zZW5kKCdyZXNwb25kIHdpdGggYSByZXNvdXJjZScpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "express",
        "require",
        "router",
        "Router",
        "get",
        "req",
        "res",
        "next",
        "send",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb;AAEA;;AACAD,MAAM,CAACE,GAAP,CAAW,GAAX,EAAgB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACvCD,EAAAA,GAAG,CAACE,IAAJ,CAAS,yBAAT;AACD,CAFD;AAIAC,MAAM,CAACC,OAAP,GAAiBR,MAAjB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
      "sourcesContent": [
        "var express = require('express');\nvar router = express.Router();\n\n/* GET users listing. */\nrouter.get('/', function(req, res, next) {\n  res.send('respond with a resource');\n});\n\nmodule.exports = router;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1631534435311
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"filename\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "const cors = require('cors');\n\nconst corsOptions = {\n  origin: '*'\n  /*file:///home/vinah331/Desktop/tdp013/projekt/main.html'*/\n  ,\n  optionsSuccessStatus: 200,\n  methods: ['GET', 'POST', 'PATCH']\n};\nmodule.exports = cors(corsOptions);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImNvcnMiLCJyZXF1aXJlIiwiY29yc09wdGlvbnMiLCJvcmlnaW4iLCJvcHRpb25zU3VjY2Vzc1N0YXR1cyIsIm1ldGhvZHMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQUdBLE1BQU1DLFdBQVcsR0FBRztBQUNoQkMsRUFBQUEsTUFBTSxFQUFFO0FBQUc7QUFESztBQUVoQkMsRUFBQUEsb0JBQW9CLEVBQUUsR0FGTjtBQUdoQkMsRUFBQUEsT0FBTyxFQUFFLENBQUMsS0FBRCxFQUFRLE1BQVIsRUFBZ0IsT0FBaEI7QUFITyxDQUFwQjtBQU1BQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJQLElBQUksQ0FBQ0UsV0FBRCxDQUFyQiIsInNvdXJjZVJvb3QiOiIvaG9tZS92aW5haDMzMS9EZXNrdG9wL3RkcDAxMy9wcm9qZWt0L2JhY2tFbmQvY29ycy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpO1xuXG5cbmNvbnN0IGNvcnNPcHRpb25zID0ge1xuICAgIG9yaWdpbjogJyonLypmaWxlOi8vL2hvbWUvdmluYWgzMzEvRGVza3RvcC90ZHAwMTMvcHJvamVrdC9tYWluLmh0bWwnKi8sXG4gICAgb3B0aW9uc1N1Y2Nlc3NTdGF0dXM6IDIwMCwgXG4gICAgbWV0aG9kczogWydHRVQnLCAnUE9TVCcsICdQQVRDSCddXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNvcnMoY29yc09wdGlvbnMpXG5cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "cors",
        "require",
        "corsOptions",
        "origin",
        "optionsSuccessStatus",
        "methods",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AAGA,MAAMC,WAAW,GAAG;AAChBC,EAAAA,MAAM,EAAE;AAAG;AADK;AAEhBC,EAAAA,oBAAoB,EAAE,GAFN;AAGhBC,EAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,MAAR,EAAgB,OAAhB;AAHO,CAApB;AAMAC,MAAM,CAACC,OAAP,GAAiBP,IAAI,CAACE,WAAD,CAArB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/",
      "sourcesContent": [
        "const cors = require('cors');\n\n\nconst corsOptions = {\n    origin: '*'/*file:///home/vinah331/Desktop/tdp013/projekt/main.html'*/,\n    optionsSuccessStatus: 200, \n    methods: ['GET', 'POST', 'PATCH']\n};\n\nmodule.exports = cors(corsOptions)\n\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1633965359839
  }
}