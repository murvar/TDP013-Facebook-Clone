{
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"filename\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/app.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/projekt/backEnd/app.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "var createError = require('http-errors');\n\nvar express = require('express');\n\nvar path = require('path');\n\nvar cookieParser = require('cookie-parser');\n\nvar logger = require('morgan');\n\nconst {\n  v1: uuidv1,\n  v4: uuidv4\n} = require('uuid');\n\nvar indexRouter = require('./routes/index');\n\nvar usersRouter = require('./routes/users');\n\nvar app = express();\n\nconst corsMiddleware = require('./cors');\n\napp.options('*', corsMiddleware);\napp.use(corsMiddleware); // view engine setup\n\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\napp.use('/', indexRouter);\napp.use('/users', usersRouter); // catch 404 and forward to error handler //använd inte!\n// app.use(function(req, res, next) {\n//   next(createError(404));\n// });\n// error handler\n// app.use(function(err, req, res, next) {\n//   // set locals, only providing error in development\n//   res.locals.message = err.message;\n//   res.locals.error = req.app.get('env') === 'development' ? err : {};\n//   // render the error page\n//   res.status(err.status || 500);\n//   res.render('error');\n// });\n\nconst {\n  MongoClient\n} = require('mongodb');\n\nlet url = \"mongodb://localhost:27017/\";\n\nfunction startServer(port) {\n  let server = app.listen(3000, () => {\n    let host = server.address().address;\n    let port = server.address().port;\n    console.log(`Lyssnar på http://${host}:${port}`);\n  });\n  return server;\n}\n\nfunction clearDatabase() {\n  MongoClient.dropDatabase();\n}\n/*\nlet server = app.listen(8888, () => {\n  let host = server.address().address\n  let port = server.address().port\n  console.log(`Lyssnar på http://${host}:${port}`)\n })*/\n\n\nstartServer();\nmodule.exports = startServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJjcmVhdGVFcnJvciIsInJlcXVpcmUiLCJleHByZXNzIiwicGF0aCIsImNvb2tpZVBhcnNlciIsImxvZ2dlciIsInYxIiwidXVpZHYxIiwidjQiLCJ1dWlkdjQiLCJpbmRleFJvdXRlciIsInVzZXJzUm91dGVyIiwiYXBwIiwiY29yc01pZGRsZXdhcmUiLCJvcHRpb25zIiwidXNlIiwic2V0Iiwiam9pbiIsIl9fZGlybmFtZSIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJzdGF0aWMiLCJNb25nb0NsaWVudCIsInVybCIsInN0YXJ0U2VydmVyIiwicG9ydCIsInNlcnZlciIsImxpc3RlbiIsImhvc3QiLCJhZGRyZXNzIiwiY29uc29sZSIsImxvZyIsImNsZWFyRGF0YWJhc2UiLCJkcm9wRGF0YWJhc2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxhQUFELENBQXpCOztBQUNBLElBQUlDLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFNBQUQsQ0FBckI7O0FBQ0EsSUFBSUUsSUFBSSxHQUFHRixPQUFPLENBQUMsTUFBRCxDQUFsQjs7QUFDQSxJQUFJRyxZQUFZLEdBQUdILE9BQU8sQ0FBQyxlQUFELENBQTFCOztBQUNBLElBQUlJLE1BQU0sR0FBR0osT0FBTyxDQUFDLFFBQUQsQ0FBcEI7O0FBQ0EsTUFBTTtBQUNKSyxFQUFBQSxFQUFFLEVBQUVDLE1BREE7QUFFSkMsRUFBQUEsRUFBRSxFQUFFQztBQUZBLElBR0ZSLE9BQU8sQ0FBQyxNQUFELENBSFg7O0FBS0EsSUFBSVMsV0FBVyxHQUFHVCxPQUFPLENBQUMsZ0JBQUQsQ0FBekI7O0FBQ0EsSUFBSVUsV0FBVyxHQUFHVixPQUFPLENBQUMsZ0JBQUQsQ0FBekI7O0FBRUEsSUFBSVcsR0FBRyxHQUFHVixPQUFPLEVBQWpCOztBQUNBLE1BQU1XLGNBQWMsR0FBR1osT0FBTyxDQUFDLFFBQUQsQ0FBOUI7O0FBQ0FXLEdBQUcsQ0FBQ0UsT0FBSixDQUFZLEdBQVosRUFBaUJELGNBQWpCO0FBQ0FELEdBQUcsQ0FBQ0csR0FBSixDQUFRRixjQUFSLEUsQ0FFQTs7QUFDQUQsR0FBRyxDQUFDSSxHQUFKLENBQVEsT0FBUixFQUFpQmIsSUFBSSxDQUFDYyxJQUFMLENBQVVDLFNBQVYsRUFBcUIsT0FBckIsQ0FBakI7QUFDQU4sR0FBRyxDQUFDSSxHQUFKLENBQVEsYUFBUixFQUF1QixNQUF2QjtBQUVBSixHQUFHLENBQUNHLEdBQUosQ0FBUVYsTUFBTSxDQUFDLEtBQUQsQ0FBZDtBQUNBTyxHQUFHLENBQUNHLEdBQUosQ0FBUWIsT0FBTyxDQUFDaUIsSUFBUixFQUFSO0FBQ0FQLEdBQUcsQ0FBQ0csR0FBSixDQUFRYixPQUFPLENBQUNrQixVQUFSLENBQW1CO0FBQUVDLEVBQUFBLFFBQVEsRUFBRTtBQUFaLENBQW5CLENBQVI7QUFDQVQsR0FBRyxDQUFDRyxHQUFKLENBQVFYLFlBQVksRUFBcEI7QUFDQVEsR0FBRyxDQUFDRyxHQUFKLENBQVFiLE9BQU8sQ0FBQ29CLE1BQVIsQ0FBZW5CLElBQUksQ0FBQ2MsSUFBTCxDQUFVQyxTQUFWLEVBQXFCLFFBQXJCLENBQWYsQ0FBUjtBQUVBTixHQUFHLENBQUNHLEdBQUosQ0FBUSxHQUFSLEVBQWFMLFdBQWI7QUFDQUUsR0FBRyxDQUFDRyxHQUFKLENBQVEsUUFBUixFQUFrQkosV0FBbEIsRSxDQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE1BQU07QUFBQ1ksRUFBQUE7QUFBRCxJQUFnQnRCLE9BQU8sQ0FBQyxTQUFELENBQTdCOztBQUNBLElBQUl1QixHQUFHLEdBQUcsNEJBQVY7O0FBR0EsU0FBU0MsV0FBVCxDQUFxQkMsSUFBckIsRUFBMkI7QUFDekIsTUFBSUMsTUFBTSxHQUFHZixHQUFHLENBQUNnQixNQUFKLENBQVcsSUFBWCxFQUFpQixNQUFNO0FBQ2xDLFFBQUlDLElBQUksR0FBR0YsTUFBTSxDQUFDRyxPQUFQLEdBQWlCQSxPQUE1QjtBQUNBLFFBQUlKLElBQUksR0FBR0MsTUFBTSxDQUFDRyxPQUFQLEdBQWlCSixJQUE1QjtBQUNBSyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBYSxxQkFBb0JILElBQUssSUFBR0gsSUFBSyxFQUE5QztBQUNBLEdBSlcsQ0FBYjtBQUtBLFNBQU9DLE1BQVA7QUFDRDs7QUFFRCxTQUFTTSxhQUFULEdBQXlCO0FBQ3ZCVixFQUFBQSxXQUFXLENBQUNXLFlBQVo7QUFDRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUNULFdBQVc7QUFFWFUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCWCxXQUFqQiIsInNvdXJjZVJvb3QiOiIvaG9tZS92aW5haDMzMS9EZXNrdG9wL3RkcDAxMy9wcm9qZWt0L2JhY2tFbmQvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnaHR0cC1lcnJvcnMnKTtcbnZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgY29va2llUGFyc2VyID0gcmVxdWlyZSgnY29va2llLXBhcnNlcicpO1xudmFyIGxvZ2dlciA9IHJlcXVpcmUoJ21vcmdhbicpO1xuY29uc3QgeyBcbiAgdjE6IHV1aWR2MSxcbiAgdjQ6IHV1aWR2NCxcbn0gPSByZXF1aXJlKCd1dWlkJyk7XG5cbnZhciBpbmRleFJvdXRlciA9IHJlcXVpcmUoJy4vcm91dGVzL2luZGV4Jyk7XG52YXIgdXNlcnNSb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcy91c2VycycpO1xuXG52YXIgYXBwID0gZXhwcmVzcygpO1xuY29uc3QgY29yc01pZGRsZXdhcmUgPSByZXF1aXJlKCcuL2NvcnMnKTtcbmFwcC5vcHRpb25zKCcqJywgY29yc01pZGRsZXdhcmUpO1xuYXBwLnVzZShjb3JzTWlkZGxld2FyZSk7XG5cbi8vIHZpZXcgZW5naW5lIHNldHVwXG5hcHAuc2V0KCd2aWV3cycsIHBhdGguam9pbihfX2Rpcm5hbWUsICd2aWV3cycpKTtcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2phZGUnKTtcblxuYXBwLnVzZShsb2dnZXIoJ2RldicpKTtcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xuYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICdwdWJsaWMnKSkpO1xuXG5hcHAudXNlKCcvJywgaW5kZXhSb3V0ZXIpO1xuYXBwLnVzZSgnL3VzZXJzJywgdXNlcnNSb3V0ZXIpO1xuXG5cbi8vIGNhdGNoIDQwNCBhbmQgZm9yd2FyZCB0byBlcnJvciBoYW5kbGVyIC8vYW52w6RuZCBpbnRlIVxuLy8gYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuLy8gICBuZXh0KGNyZWF0ZUVycm9yKDQwNCkpO1xuLy8gfSk7XG5cbi8vIGVycm9yIGhhbmRsZXJcbi8vIGFwcC51c2UoZnVuY3Rpb24oZXJyLCByZXEsIHJlcywgbmV4dCkge1xuLy8gICAvLyBzZXQgbG9jYWxzLCBvbmx5IHByb3ZpZGluZyBlcnJvciBpbiBkZXZlbG9wbWVudFxuLy8gICByZXMubG9jYWxzLm1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcbi8vICAgcmVzLmxvY2Fscy5lcnJvciA9IHJlcS5hcHAuZ2V0KCdlbnYnKSA9PT0gJ2RldmVsb3BtZW50JyA/IGVyciA6IHt9O1xuXG4vLyAgIC8vIHJlbmRlciB0aGUgZXJyb3IgcGFnZVxuLy8gICByZXMuc3RhdHVzKGVyci5zdGF0dXMgfHwgNTAwKTtcbi8vICAgcmVzLnJlbmRlcignZXJyb3InKTtcbi8vIH0pO1xuXG5cbmNvbnN0IHtNb25nb0NsaWVudH0gPSByZXF1aXJlKCdtb25nb2RiJyk7XG5sZXQgdXJsID0gXCJtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L1wiO1xuXG5cbmZ1bmN0aW9uIHN0YXJ0U2VydmVyKHBvcnQpIHtcbiAgbGV0IHNlcnZlciA9IGFwcC5saXN0ZW4oMzAwMCwgKCkgPT4ge1xuICAgIGxldCBob3N0ID0gc2VydmVyLmFkZHJlc3MoKS5hZGRyZXNzXG4gICAgbGV0IHBvcnQgPSBzZXJ2ZXIuYWRkcmVzcygpLnBvcnRcbiAgICBjb25zb2xlLmxvZyhgTHlzc25hciBww6UgaHR0cDovLyR7aG9zdH06JHtwb3J0fWApXG4gICB9KVxuICByZXR1cm4oc2VydmVyKVxufVxuXG5mdW5jdGlvbiBjbGVhckRhdGFiYXNlKCkge1xuICBNb25nb0NsaWVudC5kcm9wRGF0YWJhc2UoKTtcbn1cbi8qXG5sZXQgc2VydmVyID0gYXBwLmxpc3Rlbig4ODg4LCAoKSA9PiB7XG4gIGxldCBob3N0ID0gc2VydmVyLmFkZHJlc3MoKS5hZGRyZXNzXG4gIGxldCBwb3J0ID0gc2VydmVyLmFkZHJlc3MoKS5wb3J0XG4gIGNvbnNvbGUubG9nKGBMeXNzbmFyIHDDpSBodHRwOi8vJHtob3N0fToke3BvcnR9YClcbiB9KSovXG5cbiBzdGFydFNlcnZlcigpXG5cbiBtb2R1bGUuZXhwb3J0cyA9IHN0YXJ0U2VydmVyOyJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "createError",
        "require",
        "express",
        "path",
        "cookieParser",
        "logger",
        "v1",
        "uuidv1",
        "v4",
        "uuidv4",
        "indexRouter",
        "usersRouter",
        "app",
        "corsMiddleware",
        "options",
        "use",
        "set",
        "join",
        "__dirname",
        "json",
        "urlencoded",
        "extended",
        "static",
        "MongoClient",
        "url",
        "startServer",
        "port",
        "server",
        "listen",
        "host",
        "address",
        "console",
        "log",
        "clearDatabase",
        "dropDatabase",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIG,YAAY,GAAGH,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAII,MAAM,GAAGJ,OAAO,CAAC,QAAD,CAApB;;AACA,MAAM;AACJK,EAAAA,EAAE,EAAEC,MADA;AAEJC,EAAAA,EAAE,EAAEC;AAFA,IAGFR,OAAO,CAAC,MAAD,CAHX;;AAKA,IAAIS,WAAW,GAAGT,OAAO,CAAC,gBAAD,CAAzB;;AACA,IAAIU,WAAW,GAAGV,OAAO,CAAC,gBAAD,CAAzB;;AAEA,IAAIW,GAAG,GAAGV,OAAO,EAAjB;;AACA,MAAMW,cAAc,GAAGZ,OAAO,CAAC,QAAD,CAA9B;;AACAW,GAAG,CAACE,OAAJ,CAAY,GAAZ,EAAiBD,cAAjB;AACAD,GAAG,CAACG,GAAJ,CAAQF,cAAR,E,CAEA;;AACAD,GAAG,CAACI,GAAJ,CAAQ,OAAR,EAAiBb,IAAI,CAACc,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAjB;AACAN,GAAG,CAACI,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;AAEAJ,GAAG,CAACG,GAAJ,CAAQV,MAAM,CAAC,KAAD,CAAd;AACAO,GAAG,CAACG,GAAJ,CAAQb,OAAO,CAACiB,IAAR,EAAR;AACAP,GAAG,CAACG,GAAJ,CAAQb,OAAO,CAACkB,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAT,GAAG,CAACG,GAAJ,CAAQX,YAAY,EAApB;AACAQ,GAAG,CAACG,GAAJ,CAAQb,OAAO,CAACoB,MAAR,CAAenB,IAAI,CAACc,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAR;AAEAN,GAAG,CAACG,GAAJ,CAAQ,GAAR,EAAaL,WAAb;AACAE,GAAG,CAACG,GAAJ,CAAQ,QAAR,EAAkBJ,WAAlB,E,CAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAGA,MAAM;AAACY,EAAAA;AAAD,IAAgBtB,OAAO,CAAC,SAAD,CAA7B;;AACA,IAAIuB,GAAG,GAAG,4BAAV;;AAGA,SAASC,WAAT,CAAqBC,IAArB,EAA2B;AACzB,MAAIC,MAAM,GAAGf,GAAG,CAACgB,MAAJ,CAAW,IAAX,EAAiB,MAAM;AAClC,QAAIC,IAAI,GAAGF,MAAM,CAACG,OAAP,GAAiBA,OAA5B;AACA,QAAIJ,IAAI,GAAGC,MAAM,CAACG,OAAP,GAAiBJ,IAA5B;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAa,qBAAoBH,IAAK,IAAGH,IAAK,EAA9C;AACA,GAJW,CAAb;AAKA,SAAOC,MAAP;AACD;;AAED,SAASM,aAAT,GAAyB;AACvBV,EAAAA,WAAW,CAACW,YAAZ;AACD;AACD;AACA;AACA;AACA;AACA;AACA;;;AAECT,WAAW;AAEXU,MAAM,CAACC,OAAP,GAAiBX,WAAjB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/",
      "sourcesContent": [
        "var createError = require('http-errors');\nvar express = require('express');\nvar path = require('path');\nvar cookieParser = require('cookie-parser');\nvar logger = require('morgan');\nconst { \n  v1: uuidv1,\n  v4: uuidv4,\n} = require('uuid');\n\nvar indexRouter = require('./routes/index');\nvar usersRouter = require('./routes/users');\n\nvar app = express();\nconst corsMiddleware = require('./cors');\napp.options('*', corsMiddleware);\napp.use(corsMiddleware);\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\n\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.use('/', indexRouter);\napp.use('/users', usersRouter);\n\n\n// catch 404 and forward to error handler //använd inte!\n// app.use(function(req, res, next) {\n//   next(createError(404));\n// });\n\n// error handler\n// app.use(function(err, req, res, next) {\n//   // set locals, only providing error in development\n//   res.locals.message = err.message;\n//   res.locals.error = req.app.get('env') === 'development' ? err : {};\n\n//   // render the error page\n//   res.status(err.status || 500);\n//   res.render('error');\n// });\n\n\nconst {MongoClient} = require('mongodb');\nlet url = \"mongodb://localhost:27017/\";\n\n\nfunction startServer(port) {\n  let server = app.listen(3000, () => {\n    let host = server.address().address\n    let port = server.address().port\n    console.log(`Lyssnar på http://${host}:${port}`)\n   })\n  return(server)\n}\n\nfunction clearDatabase() {\n  MongoClient.dropDatabase();\n}\n/*\nlet server = app.listen(8888, () => {\n  let host = server.address().address\n  let port = server.address().port\n  console.log(`Lyssnar på http://${host}:${port}`)\n })*/\n\n startServer()\n\n module.exports = startServer;"
      ]
    },
    "sourceType": "module",
    "mtime": 1633524780772
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"filename\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nconst app = express();\nvar router = express.Router();\n\nconst {\n  MongoClient\n} = require('mongodb');\n\nlet sanitize = require('mongo-sanitize');\n\nconst {\n  v1: uuidv1,\n  v4: uuidv4\n} = require('uuid');\n\nlet url = \"mongodb://localhost:27017/\";\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n})); // Om användaren loggar in,\n// params = användarnamn, hashat lösenord\n// kolla om användarnamn finns, om det finns, kolla om hashat lösenord matchar\n// om det matchar, returnera ett nytt sessionID, lägg även till nytt sessionID\n// i databasen.\n// om inte finns returnera status, baserat på status skriv felmeddelane. \n// returnerna en session ID/Token\n\nrouter.post(\"/login\", (req, res) => {\n  let username = req.body.username;\n  let pw = req.body.password;\n  let myquery = {\n    userID: username,\n    password: pw\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        //Skapar sessionID\n        let sessionIDvalue = uuidv4();\n        let newSessionID = {\n          $set: {\n            sessionID: sessionIDvalue\n          }\n        };\n        dbo.collection(\"users\").updateOne(myquery, newSessionID, function (err, result2) {\n          if (err) {\n            db.close();\n            res.sendStatus(500);\n          } else {\n            db.close();\n            res.status(200).send(sessionIDvalue);\n          }\n        });\n      } else {\n        //If we dont find a result\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om användaren registerar sig,\n// params = användarnamn, hasht lösenord\n// kolla om användarnamn finns, om det finns returna fel, annnars lägg till\n// användare.\n// returnear status (ok)\n\nrouter.post(\"/register\", (req, res) => {\n  let username = req.body.username;\n  let pw = req.body.password;\n  let myquery = {\n    userID: username\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        //Det finns redan en användare med namnet\n        res.sendStatus(500);\n        db.close();\n      } else {\n        //skapa användarobjekt\n        let id = uuidv4();\n        let newUser = {\n          userID: username,\n          password: pw,\n          wall: [],\n          friends: [],\n          requests: [],\n          sessionID: id\n        };\n        dbo.collection('users').insertOne(newUser, function (err, result) {\n          if (err) {\n            throw err;\n          } else {\n            db.close();\n            res.sendStatus(200);\n          }\n        });\n      }\n    });\n  });\n}) / // Om användare loggar ut\n// params = session ID\n// ta bort session ID, returna status\n// returnarar status (ok)\nrouter.patch(\"/logout\", (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = {\n    sessionID: id\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        console.log(\"1\");\n        res.sendStatus(500);\n      } else if (result != null) {\n        console.log(\"2\");\n        let sessionIDvalue = uuidv4();\n        let newSessionID = {\n          $set: {\n            sessionID: sessionIDvalue\n          }\n        };\n        dbo.collection(\"users\").updateOne(myquery, newSessionID, function (err, result2) {\n          if (err) {\n            console.log(\"3\");\n            db.close();\n            res.sendStatus(500);\n          } else {\n            console.log(\"we here\");\n            db.close();\n            res.sendStatus(200);\n          }\n        });\n      } else {\n        //If we dont find a result\n        console.log(result);\n        res.status(500).send(\"nothing found!\");\n        db.close();\n      }\n    });\n  });\n}); // Om inloggad, vill vi ha en friendlist på sidan\n// params = session ID\n// hämtar alla vänner baserat på session ID\n// returnerar en lista på alla vänner\n\nrouter.post('/friends', (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = {\n    sessionID: id\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        res.send(result.friends);\n        db.close();\n      } else {\n        console.log(\"no result found!\");\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om inloggad vill vi ha åtkomst till vänner profil\n// params = session ID och användarID(användar Id för vän)\n// identifierar användarID för sessionID, kollar om användarID(för vän) har \n// användarID (från sessionID) som vän. \n// Om inte vän, returnera status\n// annars returna följande\n// returnerar namn OCH alla meddelanden som skall vara på väggen för vän\n\nrouter.post('/friends/:userID', (req, res) => {\n  let user = req.params.userID;\n  let id = req.body.sessionID;\n  let myquery = {\n    sessionID: id\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        //kolla om användarIDet finns i results.friends array\n        //om det finns hämta väggen för användarIDet\n        if (result.friends.find(element => element == user)) {\n          let userquery = {\n            userID: user\n          };\n          dbo.collection(\"users\").findOne(userquery, function (err, result) {\n            if (err) {\n              res.sendStatus(500);\n            } else if (result != null) {\n              res.send({\n                \"wall\": result.wall,\n                \"userID\": result.userID\n              });\n            } else {\n              console.log(\"no result found!\");\n              res.sendStatus(500);\n              db.close();\n            }\n          });\n        }\n      } else {\n        console.log(\"no result found!\");\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om inloggad och är på egen profil\n// params = session ID\n// om sessionID inte matchar, returna status\n// annars returnera följande:\n// returnerar namn OCH alla meddelanden som skall vara på väggen för en själv\n\nrouter.post('/', (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = {\n    sessionID: id\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        res.send({\n          \"wall\": result.wall,\n          \"userID\": result.userID\n        });\n      } else {\n        console.log(\"no result found!\");\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om sökning sker med specifikt namn\n// params = sträng\n// matcha mot strängen + regex som tillåter sökningen att var inkomplett (t.ex. \n// Ro ska matcha mot Robin). Matchning baseras på användarID\n// retunerar alla användare som matchar strängen + regex\n\nrouter.get('/search/:id', (req, res) => {\n  let id = req.params.id;\n  let myquery = {\n    userID: {\n      $regex: id\n    }\n  }; //behöver mer specifikt uttryck\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").find(myquery).toArray(function (err, result) {\n      console.log(result);\n\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        let userList = [];\n\n        for (let i = 0; i < result.length; i++) {\n          userList.push(result[i].userID);\n        }\n\n        res.send(userList);\n      } else {\n        console.log(\"no result found!\");\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om inloggad och vill toggla en vänförfrågning via knapptryck\n// params = session ID, användarID\n// Om ej togglad, bli togglad, lägg till användarID (för sessionID) som pending invite\n// till användarID (för vn). \n// Om togglad ta bort användar ID (från sessionID) som pending invite för användarID \n// returnar status (om ok kan knappen bli icheckad/avcheckad)\n//Kolla om redan vänner\n//Kolla om \n\nrouter.patch('/request/:userID', (req, res) => {\n  let user = req.params.userID;\n  let requester = req.body.sessionID;\n  let myquery = {\n    sessionID: requester\n  };\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\"); //HITTAR REQUESTER, \n\n    dbo.collection(\"users\").findOne(myquery, function (err, result) {\n      if (err) {\n        res.sendStatus(500);\n      } else if (result != null) {\n        //Kollar om requester redan är vän med user\n        if (result.friends.find(element => element == user)) {\n          db.close();\n          res.sendStatus(500);\n        } else {\n          let myquery = {\n            userID: user\n          };\n          let requesterUserID = result.userID;\n          dbo.collection(\"users\").findOne(myquery, function (err, result) {\n            if (err) {\n              res.sendStatus(500);\n            } else if (result != null) {\n              if (result.requests.find(element => element == requesterUserID)) {\n                //uppdatera requests och kör updateOne på user\n                result.requests; //TA BORT requestUserID från denna\n                //sen ska vi uppdatera användaren i databasen\n              } else {//lägg till i requests och kör updateOne på user\n              }\n            } else {\n              console.log(\"no result found!\");\n              res.sendStatus(500);\n              db.close();\n            }\n          });\n        }\n      } else {\n        console.log(\"no result found!\");\n        res.sendStatus(500);\n        db.close();\n      }\n    });\n  });\n}); // Om inloggad och vill acceptera/neka vänförfrågan\n// params = sessionID, användarID (person som skickad förfrågan), bool\n// om true acceptera vänförfrågan och lägg till användarID i friends\n// om false neka vänförfrågan\n// ta bort pending invite från sessionID. \n// return status (ok t.ex.)\n//--------------------------------------------------------------------\n//Logged in and posting msg\n\nrouter.post('/friends/:userID/msg', (req, res) => {\n  console.log(req.body);\n\n  if (validateMsg(req.body)) {\n    msg = sanitize(req.body);\n    const regex = new RegExp(/<script>/); //injection?\n\n    if (!regex.test(msg)) {\n      let user = req.params.userID;\n      let id = req.body.sessionID;\n      let myquery = {\n        sessionID: id\n      };\n      MongoClient.connect(url, (err, db) => {\n        let dbo = db.db(\"tvitter\");\n        dbo.collection(\"users\").findOne(myquery, function (err, result) {\n          if (err) {\n            res.sendStatus(500);\n          } else if (result != null) {\n            if (result.friends.find(element => element == user)) {\n              let userquery = {\n                userID: user\n              };\n              dbo.collection(\"users\").findOne(userquery, function (err, result) {\n                if (err) {\n                  res.sendStatus(500);\n                } else if (result != null) {\n                  //add msg to friends wall\n                  dbo.collection('wall').insertOne(msg, function (err, result) {\n                    if (err) {\n                      throw err;\n                    } else {\n                      db.close();\n                      res.sendStatus(200);\n                    }\n                  });\n                } else {\n                  console.log(\"no result found!\");\n                  res.sendStatus(500);\n                  db.close();\n                }\n              });\n            }\n          }\n        });\n      });\n    }\n  }\n\n  res.sendStatus(500);\n});\n\nfunction validateMsg(body) {\n  if (body.msg.length === 0 || body.msg.length > 140) {\n    return false;\n  } // if (!(typeof(body.id) === \"string\"))                        { return false }\n  // if (typeof(body.state) !== \"boolean\")                 { return false }\n\n\n  return true;\n} // params = sessionID, användarID/sessionID, msg\n// om har tillåtelse att posta, lägg till meddelande på vägg med tid\n// och sender. Meddelanden är objekt i databsen som består av msg, time och sender\n// returnerar en status (och kanske relaod på page)\n\n\napp.use(function (req, res) {\n  //console.log(\"found it\")\n  res.send(\"Sorry can't find that!\", 404);\n});\nmodule.exports = router;\n/*använd asynkrona anrop för att hämta och lagra data. \nKan ta in en resolve och reject funktion. \nMed detta kan vi skicka rätt felmeddelanden.\nen backend fil som hanterar logik\nen testfil som representerar klient-logiken \n(alltså om vi klickar på en knapp kommer meddelande x\nskickas t.ex)*/\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwiYXBwIiwicm91dGVyIiwiUm91dGVyIiwiTW9uZ29DbGllbnQiLCJzYW5pdGl6ZSIsInYxIiwidXVpZHYxIiwidjQiLCJ1dWlkdjQiLCJ1cmwiLCJ1c2UiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwicG9zdCIsInJlcSIsInJlcyIsInVzZXJuYW1lIiwiYm9keSIsInB3IiwicGFzc3dvcmQiLCJteXF1ZXJ5IiwidXNlcklEIiwiY29ubmVjdCIsImVyciIsImRiIiwiZGJvIiwiY29sbGVjdGlvbiIsImZpbmRPbmUiLCJyZXN1bHQiLCJzZW5kU3RhdHVzIiwic2Vzc2lvbklEdmFsdWUiLCJuZXdTZXNzaW9uSUQiLCIkc2V0Iiwic2Vzc2lvbklEIiwidXBkYXRlT25lIiwicmVzdWx0MiIsImNsb3NlIiwic3RhdHVzIiwic2VuZCIsImlkIiwibmV3VXNlciIsIndhbGwiLCJmcmllbmRzIiwicmVxdWVzdHMiLCJpbnNlcnRPbmUiLCJwYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJ1c2VyIiwicGFyYW1zIiwiZmluZCIsImVsZW1lbnQiLCJ1c2VycXVlcnkiLCJnZXQiLCIkcmVnZXgiLCJ0b0FycmF5IiwidXNlckxpc3QiLCJpIiwibGVuZ3RoIiwicHVzaCIsInJlcXVlc3RlciIsInJlcXVlc3RlclVzZXJJRCIsInZhbGlkYXRlTXNnIiwibXNnIiwicmVnZXgiLCJSZWdFeHAiLCJ0ZXN0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFDQSxNQUFNQyxHQUFHLEdBQUdGLE9BQU8sRUFBbkI7QUFDQSxJQUFJRyxNQUFNLEdBQUdILE9BQU8sQ0FBQ0ksTUFBUixFQUFiOztBQUNBLE1BQU07QUFBQ0MsRUFBQUE7QUFBRCxJQUFnQkosT0FBTyxDQUFDLFNBQUQsQ0FBN0I7O0FBQ0EsSUFBSUss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dGVzLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgYXBwID0gZXhwcmVzcygpO1xudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5jb25zdCB7TW9uZ29DbGllbnR9ID0gcmVxdWlyZSgnbW9uZ29kYicpO1xubGV0IHNhbml0aXplID0gcmVxdWlyZSgnbW9uZ28tc2FuaXRpemUnKTtcbmNvbnN0IHsgXG4gIHYxOiB1dWlkdjEsXG4gIHY0OiB1dWlkdjQsXG59ID0gcmVxdWlyZSgndXVpZCcpO1xubGV0IHVybCA9IFwibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9cIjtcblxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiBmYWxzZSB9KSk7XG5cblxuLy8gT20gYW52w6RuZGFyZW4gbG9nZ2FyIGluLFxuLy8gcGFyYW1zID0gYW52w6RuZGFybmFtbiwgaGFzaGF0IGzDtnNlbm9yZFxuLy8ga29sbGEgb20gYW52w6RuZGFybmFtbiBmaW5ucywgb20gZGV0IGZpbm5zLCBrb2xsYSBvbSBoYXNoYXQgbMO2c2Vub3JkIG1hdGNoYXJcbi8vIG9tIGRldCBtYXRjaGFyLCByZXR1cm5lcmEgZXR0IG55dHQgc2Vzc2lvbklELCBsw6RnZyDDpHZlbiB0aWxsIG55dHQgc2Vzc2lvbklEXG4vLyBpIGRhdGFiYXNlbi5cbi8vIG9tIGludGUgZmlubnMgcmV0dXJuZXJhIHN0YXR1cywgYmFzZXJhdCBww6Ugc3RhdHVzIHNrcml2IGZlbG1lZGRlbGFuZS4gXG4vLyByZXR1cm5lcm5hIGVuIHNlc3Npb24gSUQvVG9rZW5cblxucm91dGVyLnBvc3QoXCIvbG9naW5cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGxldCB1c2VybmFtZSA9IHJlcS5ib2R5LnVzZXJuYW1lO1xuICBsZXQgcHcgPSByZXEuYm9keS5wYXNzd29yZDtcbiAgbGV0IG15cXVlcnkgPSB7IHVzZXJJRDogdXNlcm5hbWUsIHBhc3N3b3JkOiBwd31cblxuICBNb25nb0NsaWVudC5jb25uZWN0KHVybCwgKGVyciwgZGIpID0+IHtcbiAgICBsZXQgZGJvID0gZGIuZGIoXCJ0dml0dGVyXCIpO1xuICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICB9IFxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgXG4gICAgICAgIC8vU2thcGFyIHNlc3Npb25JRFxuICAgICAgICBsZXQgc2Vzc2lvbklEdmFsdWUgPSB1dWlkdjQoKTtcbiAgICAgICAgbGV0IG5ld1Nlc3Npb25JRCA9IHsgJHNldDoge3Nlc3Npb25JRDogc2Vzc2lvbklEdmFsdWV9IH07XG4gICAgICAgIFxuICAgICAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLnVwZGF0ZU9uZShteXF1ZXJ5LCBuZXdTZXNzaW9uSUQsIGZ1bmN0aW9uKGVyciwgcmVzdWx0Mikge1xuICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGIuY2xvc2UoKVxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoc2Vzc2lvbklEdmFsdWUpXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gXG4gICAgICBlbHNlIHtcbiAgICAgICAgLy9JZiB3ZSBkb250IGZpbmQgYSByZXN1bHRcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIH0pXG59KVxuXG5cbi8vIE9tIGFudsOkbmRhcmVuIHJlZ2lzdGVyYXIgc2lnLFxuLy8gcGFyYW1zID0gYW52w6RuZGFybmFtbiwgaGFzaHQgbMO2c2Vub3JkXG4vLyBrb2xsYSBvbSBhbnbDpG5kYXJuYW1uIGZpbm5zLCBvbSBkZXQgZmlubnMgcmV0dXJuYSBmZWwsIGFubm5hcnMgbMOkZ2cgdGlsbFxuLy8gYW52w6RuZGFyZS5cbi8vIHJldHVybmVhciBzdGF0dXMgKG9rKVxucm91dGVyLnBvc3QoXCIvcmVnaXN0ZXJcIiwgKHJlcSwgcmVzKSA9PiB7XG5cbiAgbGV0IHVzZXJuYW1lID0gcmVxLmJvZHkudXNlcm5hbWU7XG4gIGxldCBwdyA9IHJlcS5ib2R5LnBhc3N3b3JkO1xuICBsZXQgbXlxdWVyeSA9IHsgdXNlcklEOiB1c2VybmFtZX1cblxuICBNb25nb0NsaWVudC5jb25uZWN0KHVybCwgKGVyciwgZGIpID0+IHtcbiAgICBsZXQgZGJvID0gZGIuZGIoXCJ0dml0dGVyXCIpO1xuICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICB9IFxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgLy9EZXQgZmlubnMgcmVkYW4gZW4gYW52w6RuZGFyZSBtZWQgbmFtbmV0XG4gICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgIH0gXG4gICAgICBlbHNlIHtcbiAgICAgICAgLy9za2FwYSBhbnbDpG5kYXJvYmpla3RcbiAgICAgICAgbGV0IGlkID0gdXVpZHY0KCk7XG4gICAgICAgIGxldCBuZXdVc2VyID0ge3VzZXJJRDogdXNlcm5hbWUsIHBhc3N3b3JkOiBwdywgd2FsbDogW10sIGZyaWVuZHM6IFtdLCByZXF1ZXN0czogW10sIHNlc3Npb25JRDogaWR9XG4gICAgICAgIGRiby5jb2xsZWN0aW9uKCd1c2VycycpLmluc2VydE9uZShuZXdVc2VyLCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgICAgIGlmIChlcnIpIHt0aHJvdyBlcnJ9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoMjAwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn0pXG4vXG4vLyBPbSBhbnbDpG5kYXJlIGxvZ2dhciB1dFxuLy8gcGFyYW1zID0gc2Vzc2lvbiBJRFxuLy8gdGEgYm9ydCBzZXNzaW9uIElELCByZXR1cm5hIHN0YXR1c1xuLy8gcmV0dXJuYXJhciBzdGF0dXMgKG9rKVxucm91dGVyLnBhdGNoKFwiL2xvZ291dFwiLCAocmVxLCByZXMpID0+IHtcbiAgbGV0IGlkID0gcmVxLmJvZHkuc2Vzc2lvbklEO1xuICBsZXQgbXlxdWVyeSA9IHsgc2Vzc2lvbklEOiBpZH1cblxuICBNb25nb0NsaWVudC5jb25uZWN0KHVybCwgKGVyciwgZGIpID0+IHtcbiAgICBsZXQgZGJvID0gZGIuZGIoXCJ0dml0dGVyXCIpO1xuICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhcIjFcIilcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgfSBcbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiMlwiKVxuICAgICAgICBsZXQgc2Vzc2lvbklEdmFsdWUgPSB1dWlkdjQoKTtcbiAgICAgICAgbGV0IG5ld1Nlc3Npb25JRCA9IHsgJHNldDoge3Nlc3Npb25JRDogc2Vzc2lvbklEdmFsdWV9IH07XG4gICAgICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikudXBkYXRlT25lKG15cXVlcnksIG5ld1Nlc3Npb25JRCwgZnVuY3Rpb24oZXJyLCByZXN1bHQyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCIzXCIpXG4gICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwid2UgaGVyZVwiKVxuICAgICAgICAgICAgZGIuY2xvc2UoKVxuICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoMjAwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgIH0gXG4gICAgICBlbHNlIHtcbiAgICAgICAgLy9JZiB3ZSBkb250IGZpbmQgYSByZXN1bHRcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZChcIm5vdGhpbmcgZm91bmQhXCIpXG4gICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn0pXG5cblxuLy8gT20gaW5sb2dnYWQsIHZpbGwgdmkgaGEgZW4gZnJpZW5kbGlzdCBww6Ugc2lkYW5cbi8vIHBhcmFtcyA9IHNlc3Npb24gSURcbi8vIGjDpG10YXIgYWxsYSB2w6RubmVyIGJhc2VyYXQgcMOlIHNlc3Npb24gSURcbi8vIHJldHVybmVyYXIgZW4gbGlzdGEgcMOlIGFsbGEgdsOkbm5lclxuXG5yb3V0ZXIucG9zdCgoJy9mcmllbmRzJyksIChyZXEsIHJlcykgPT4ge1xuICBsZXQgaWQgPSByZXEuYm9keS5zZXNzaW9uSUQ7XG4gIGxldCBteXF1ZXJ5ID0geyBzZXNzaW9uSUQ6IGlkfVxuICBNb25nb0NsaWVudC5jb25uZWN0KHVybCwgKGVyciwgZGIpID0+IHtcbiAgICBsZXQgZGJvID0gZGIuZGIoXCJ0dml0dGVyXCIpO1xuICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICB9IFxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgcmVzLnNlbmQocmVzdWx0LmZyaWVuZHMpXG4gICAgICAgIGRiLmNsb3NlKCk7XG5cbiAgICAgIH0gXG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJubyByZXN1bHQgZm91bmQhXCIpXG4gICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICB9KVxufSlcblxuXG4vLyBPbSBpbmxvZ2dhZCB2aWxsIHZpIGhhIMOldGtvbXN0IHRpbGwgdsOkbm5lciBwcm9maWxcbi8vIHBhcmFtcyA9IHNlc3Npb24gSUQgb2NoIGFudsOkbmRhcklEKGFudsOkbmRhciBJZCBmw7ZyIHbDpG4pXG4vLyBpZGVudGlmaWVyYXIgYW52w6RuZGFySUQgZsO2ciBzZXNzaW9uSUQsIGtvbGxhciBvbSBhbnbDpG5kYXJJRChmw7ZyIHbDpG4pIGhhciBcbi8vIGFudsOkbmRhcklEIChmcsOlbiBzZXNzaW9uSUQpIHNvbSB2w6RuLiBcbi8vIE9tIGludGUgdsOkbiwgcmV0dXJuZXJhIHN0YXR1c1xuLy8gYW5uYXJzIHJldHVybmEgZsO2bGphbmRlXG4vLyByZXR1cm5lcmFyIG5hbW4gT0NIIGFsbGEgbWVkZGVsYW5kZW4gc29tIHNrYWxsIHZhcmEgcMOlIHbDpGdnZW4gZsO2ciB2w6RuXG5cbnJvdXRlci5wb3N0KCgnL2ZyaWVuZHMvOnVzZXJJRCcpLCAocmVxLCByZXMpID0+IHtcblxuICBsZXQgdXNlciA9IHJlcS5wYXJhbXMudXNlcklEO1xuICBsZXQgaWQgPSByZXEuYm9keS5zZXNzaW9uSUQ7XG4gIGxldCBteXF1ZXJ5ID0geyBzZXNzaW9uSUQ6IGlkfVxuXG4gIE1vbmdvQ2xpZW50LmNvbm5lY3QodXJsLCAoZXJyLCBkYikgPT4ge1xuICAgIGxldCBkYm8gPSBkYi5kYihcInR2aXR0ZXJcIik7XG4gICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKG15cXVlcnksIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgIH0gXG4gICAgICBlbHNlIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICAvL2tvbGxhIG9tIGFudsOkbmRhcklEZXQgZmlubnMgaSByZXN1bHRzLmZyaWVuZHMgYXJyYXlcbiAgICAgICAgLy9vbSBkZXQgZmlubnMgaMOkbXRhIHbDpGdnZW4gZsO2ciBhbnbDpG5kYXJJRGV0XG5cbiAgICAgICAgaWYocmVzdWx0LmZyaWVuZHMuZmluZChlbGVtZW50ID0+IGVsZW1lbnQgPT0gdXNlcikpIHtcbiAgICAgICAgICBsZXQgdXNlcnF1ZXJ5ID0geyB1c2VySUQ6IHVzZXJ9XG4gICAgICAgICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKHVzZXJxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIHJlcy5zZW5kKHsgXCJ3YWxsXCIgOiByZXN1bHQud2FsbCwgXCJ1c2VySURcIiA6IHJlc3VsdC51c2VySUR9KVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vIHJlc3VsdCBmb3VuZCFcIilcbiAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gXG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJubyByZXN1bHQgZm91bmQhXCIpXG4gICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICB9KVxufSlcblxuXG4vLyBPbSBpbmxvZ2dhZCBvY2ggw6RyIHDDpSBlZ2VuIHByb2ZpbFxuLy8gcGFyYW1zID0gc2Vzc2lvbiBJRFxuLy8gb20gc2Vzc2lvbklEIGludGUgbWF0Y2hhciwgcmV0dXJuYSBzdGF0dXNcbi8vIGFubmFycyByZXR1cm5lcmEgZsO2bGphbmRlOlxuLy8gcmV0dXJuZXJhciBuYW1uIE9DSCBhbGxhIG1lZGRlbGFuZGVuIHNvbSBza2FsbCB2YXJhIHDDpSB2w6RnZ2VuIGbDtnIgZW4gc2rDpGx2XG5yb3V0ZXIucG9zdCgoJy8nKSwgKHJlcSwgcmVzKSA9PiB7XG5cbiAgbGV0IGlkID0gcmVxLmJvZHkuc2Vzc2lvbklEO1xuICBsZXQgbXlxdWVyeSA9IHsgc2Vzc2lvbklEOiBpZH1cblxuICBNb25nb0NsaWVudC5jb25uZWN0KHVybCwgKGVyciwgZGIpID0+IHtcbiAgICBsZXQgZGJvID0gZGIuZGIoXCJ0dml0dGVyXCIpO1xuICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZShteXF1ZXJ5LCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICB9IFxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgcmVzLnNlbmQoeyBcIndhbGxcIiA6IHJlc3VsdC53YWxsLCBcInVzZXJJRFwiIDogcmVzdWx0LnVzZXJJRH0pXG4gICAgICB9IFxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibm8gcmVzdWx0IGZvdW5kIVwiKVxuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn0pXG5cbi8vIE9tIHPDtmtuaW5nIHNrZXIgbWVkIHNwZWNpZmlrdCBuYW1uXG4vLyBwYXJhbXMgPSBzdHLDpG5nXG4vLyBtYXRjaGEgbW90IHN0csOkbmdlbiArIHJlZ2V4IHNvbSB0aWxsw6V0ZXIgc8O2a25pbmdlbiBhdHQgdmFyIGlua29tcGxldHQgKHQuZXguIFxuLy8gUm8gc2thIG1hdGNoYSBtb3QgUm9iaW4pLiBNYXRjaG5pbmcgYmFzZXJhcyBww6UgYW52w6RuZGFySURcbi8vIHJldHVuZXJhciBhbGxhIGFudsOkbmRhcmUgc29tIG1hdGNoYXIgc3Ryw6RuZ2VuICsgcmVnZXhcbnJvdXRlci5nZXQoKCcvc2VhcmNoLzppZCcpLCAocmVxLCByZXMpID0+IHtcblxuICBsZXQgaWQgPSByZXEucGFyYW1zLmlkO1xuICBsZXQgbXlxdWVyeSA9IHsgdXNlcklEOiB7JHJlZ2V4OiBpZH19IC8vYmVow7Z2ZXIgbWVyIHNwZWNpZmlrdCB1dHRyeWNrXG5cbiAgTW9uZ29DbGllbnQuY29ubmVjdCh1cmwsIChlcnIsIGRiKSA9PiB7XG4gICAgbGV0IGRibyA9IGRiLmRiKFwidHZpdHRlclwiKTtcbiAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmQobXlxdWVyeSkudG9BcnJheShmdW5jdGlvbiAoZXJyLCByZXN1bHQpIHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdClcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgfSBcbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIGxldCB1c2VyTGlzdCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHVzZXJMaXN0LnB1c2gocmVzdWx0W2ldLnVzZXJJRClcbiAgICAgICAgfVxuICAgICAgICByZXMuc2VuZCh1c2VyTGlzdCk7XG4gICAgICB9IFxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwibm8gcmVzdWx0IGZvdW5kIVwiKVxuICAgICAgICByZXMuc2VuZFN0YXR1cyg1MDApXG4gICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSlcbiAgfSlcbn0pXG5cblxuXG4vLyBPbSBpbmxvZ2dhZCBvY2ggdmlsbCB0b2dnbGEgZW4gdsOkbmbDtnJmcsOlZ25pbmcgdmlhIGtuYXBwdHJ5Y2tcbi8vIHBhcmFtcyA9IHNlc3Npb24gSUQsIGFudsOkbmRhcklEXG4vLyBPbSBlaiB0b2dnbGFkLCBibGkgdG9nZ2xhZCwgbMOkZ2cgdGlsbCBhbnbDpG5kYXJJRCAoZsO2ciBzZXNzaW9uSUQpIHNvbSBwZW5kaW5nIGludml0ZVxuLy8gdGlsbCBhbnbDpG5kYXJJRCAoZsO2ciB2bikuIFxuLy8gT20gdG9nZ2xhZCB0YSBib3J0IGFudsOkbmRhciBJRCAoZnLDpW4gc2Vzc2lvbklEKSBzb20gcGVuZGluZyBpbnZpdGUgZsO2ciBhbnbDpG5kYXJJRCBcbi8vIHJldHVybmFyIHN0YXR1cyAob20gb2sga2FuIGtuYXBwZW4gYmxpIGljaGVja2FkL2F2Y2hlY2thZClcblxuLy9Lb2xsYSBvbSByZWRhbiB2w6RubmVyXG4vL0tvbGxhIG9tIFxuXG5yb3V0ZXIucGF0Y2goKCcvcmVxdWVzdC86dXNlcklEJyksIChyZXEsIHJlcykgPT4ge1xuXG4gIGxldCB1c2VyID0gcmVxLnBhcmFtcy51c2VySUQ7XG4gIGxldCByZXF1ZXN0ZXIgPSByZXEuYm9keS5zZXNzaW9uSUQ7XG4gIGxldCBteXF1ZXJ5ID0geyBzZXNzaW9uSUQ6IHJlcXVlc3RlciB9O1xuXG4gIE1vbmdvQ2xpZW50LmNvbm5lY3QodXJsLCAoZXJyLCBkYikgPT4ge1xuICAgIGxldCBkYm8gPSBkYi5kYihcInR2aXR0ZXJcIik7XG4gICAgXG4gICAgLy9ISVRUQVIgUkVRVUVTVEVSLCBcbiAgICBkYm8uY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmRPbmUobXlxdWVyeSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgfSBcbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIC8vS29sbGFyIG9tIHJlcXVlc3RlciByZWRhbiDDpHIgdsOkbiBtZWQgdXNlclxuICAgICAgICBpZihyZXN1bHQuZnJpZW5kcy5maW5kKGVsZW1lbnQgPT4gZWxlbWVudCA9PSB1c2VyKSkge1xuICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBsZXQgbXlxdWVyeSA9IHsgdXNlcklEOiB1c2VyIH07XG4gICAgICAgICAgbGV0IHJlcXVlc3RlclVzZXJJRCA9IHJlc3VsdC51c2VySUQ7XG4gICAgICAgICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKG15cXVlcnksIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZihyZXN1bHQucmVxdWVzdHMuZmluZChlbGVtZW50ID0+IGVsZW1lbnQgPT0gcmVxdWVzdGVyVXNlcklEKSkge1xuICAgICAgICAgICAgICAgIC8vdXBwZGF0ZXJhIHJlcXVlc3RzIG9jaCBrw7ZyIHVwZGF0ZU9uZSBww6UgdXNlclxuICAgICAgICAgICAgICAgIHJlc3VsdC5yZXF1ZXN0cyAvL1RBIEJPUlQgcmVxdWVzdFVzZXJJRCBmcsOlbiBkZW5uYVxuICAgICAgICAgICAgICAgIC8vc2VuIHNrYSB2aSB1cHBkYXRlcmEgYW52w6RuZGFyZW4gaSBkYXRhYmFzZW5cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vbMOkZ2cgdGlsbCBpIHJlcXVlc3RzIG9jaCBrw7ZyIHVwZGF0ZU9uZSBww6UgdXNlclxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vIHJlc3VsdCBmb3VuZCFcIilcbiAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJubyByZXN1bHQgZm91bmQhXCIpXG4gICAgICAgIHJlcy5zZW5kU3RhdHVzKDUwMClcbiAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgIH1cblxuICAgIH0pO1xuICAgIFxuICB9KVxuXG59KVxuLy8gT20gaW5sb2dnYWQgb2NoIHZpbGwgYWNjZXB0ZXJhL25la2EgdsOkbmbDtnJmcsOlZ2FuXG4vLyBwYXJhbXMgPSBzZXNzaW9uSUQsIGFudsOkbmRhcklEIChwZXJzb24gc29tIHNraWNrYWQgZsO2cmZyw6VnYW4pLCBib29sXG4vLyBvbSB0cnVlIGFjY2VwdGVyYSB2w6RuZsO2cmZyw6VnYW4gb2NoIGzDpGdnIHRpbGwgYW52w6RuZGFySUQgaSBmcmllbmRzXG4vLyBvbSBmYWxzZSBuZWthIHbDpG5mw7ZyZnLDpWdhblxuLy8gdGEgYm9ydCBwZW5kaW5nIGludml0ZSBmcsOlbiBzZXNzaW9uSUQuIFxuLy8gcmV0dXJuIHN0YXR1cyAob2sgdC5leC4pXG5cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vTG9nZ2VkIGluIGFuZCBwb3N0aW5nIG1zZ1xucm91dGVyLnBvc3QoJy9mcmllbmRzLzp1c2VySUQvbXNnJywgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKHJlcS5ib2R5KVxuICBpZiAodmFsaWRhdGVNc2cocmVxLmJvZHkpKSB7XG4gICAgbXNnID0gc2FuaXRpemUocmVxLmJvZHkpXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKC88c2NyaXB0Pi8pICAvL2luamVjdGlvbj9cbiAgICBpZiAoIXJlZ2V4LnRlc3QobXNnKSkge1xuICAgICAgbGV0IHVzZXIgPSByZXEucGFyYW1zLnVzZXJJRDtcbiAgICAgIGxldCBpZCA9IHJlcS5ib2R5LnNlc3Npb25JRDtcbiAgICAgIGxldCBteXF1ZXJ5ID0geyBzZXNzaW9uSUQ6IGlkfVxuXG4gICAgICBNb25nb0NsaWVudC5jb25uZWN0KHVybCwgKGVyciwgZGIpID0+IHtcbiAgICAgICAgbGV0IGRibyA9IGRiLmRiKFwidHZpdHRlclwiKTtcbiAgICAgICAgZGJvLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKG15cXVlcnksIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgIH0gXG4gICAgICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHsgXG4gICAgICAgICAgICBpZihyZXN1bHQuZnJpZW5kcy5maW5kKGVsZW1lbnQgPT4gZWxlbWVudCA9PSB1c2VyKSkge1xuICAgICAgICAgICAgICBsZXQgdXNlcnF1ZXJ5ID0geyB1c2VySUQ6IHVzZXJ9XG4gICAgICAgICAgICAgIGRiby5jb2xsZWN0aW9uKFwidXNlcnNcIikuZmluZE9uZSh1c2VycXVlcnksIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIC8vYWRkIG1zZyB0byBmcmllbmRzIHdhbGxcbiAgICAgICAgICAgICAgICAgIGRiby5jb2xsZWN0aW9uKCd3YWxsJykuaW5zZXJ0T25lKG1zZywgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge3Rocm93IGVycn1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICByZXMuc2VuZFN0YXR1cygyMDApXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibm8gcmVzdWx0IGZvdW5kIVwiKVxuICAgICAgICAgICAgICAgICAgcmVzLnNlbmRTdGF0dXMoNTAwKVxuICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG4gIH1cbiAgcmVzLnNlbmRTdGF0dXMoNTAwKVxufSlcblxuZnVuY3Rpb24gdmFsaWRhdGVNc2coYm9keSkge1xuICBpZiAoYm9keS5tc2cubGVuZ3RoID09PSAwIHx8IGJvZHkubXNnLmxlbmd0aCA+IDE0MCkgeyByZXR1cm4gZmFsc2UgfVxuICAvLyBpZiAoISh0eXBlb2YoYm9keS5pZCkgPT09IFwic3RyaW5nXCIpKSAgICAgICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIGZhbHNlIH1cbiAgLy8gaWYgKHR5cGVvZihib2R5LnN0YXRlKSAhPT0gXCJib29sZWFuXCIpICAgICAgICAgICAgICAgICB7IHJldHVybiBmYWxzZSB9XG4gIHJldHVybiB0cnVlXG59XG4vLyBwYXJhbXMgPSBzZXNzaW9uSUQsIGFudsOkbmRhcklEL3Nlc3Npb25JRCwgbXNnXG4vLyBvbSBoYXIgdGlsbMOldGVsc2UgYXR0IHBvc3RhLCBsw6RnZyB0aWxsIG1lZGRlbGFuZGUgcMOlIHbDpGdnIG1lZCB0aWRcbi8vIG9jaCBzZW5kZXIuIE1lZGRlbGFuZGVuIMOkciBvYmpla3QgaSBkYXRhYnNlbiBzb20gYmVzdMOlciBhdiBtc2csIHRpbWUgb2NoIHNlbmRlclxuLy8gcmV0dXJuZXJhciBlbiBzdGF0dXMgKG9jaCBrYW5za2UgcmVsYW9kIHDDpSBwYWdlKVxuXG5cblxuXG5hcHAudXNlKGZ1bmN0aW9uIChyZXEsIHJlcykge1xuICAvL2NvbnNvbGUubG9nKFwiZm91bmQgaXRcIilcbiAgcmVzLnNlbmQoXCJTb3JyeSBjYW4ndCBmaW5kIHRoYXQhXCIsIDQwNClcbn0pXG5cblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG5cblxuLyphbnbDpG5kIGFzeW5rcm9uYSBhbnJvcCBmw7ZyIGF0dCBow6RtdGEgb2NoIGxhZ3JhIGRhdGEuIFxuS2FuIHRhIGluIGVuIHJlc29sdmUgb2NoIHJlamVjdCBmdW5rdGlvbi4gXG5NZWQgZGV0dGEga2FuIHZpIHNraWNrYSByw6R0dCBmZWxtZWRkZWxhbmRlbi5cbmVuIGJhY2tlbmQgZmlsIHNvbSBoYW50ZXJhciBsb2dpa1xuZW4gdGVzdGZpbCBzb20gcmVwcmVzZW50ZXJhciBrbGllbnQtbG9naWtlbiBcbihhbGx0c8OlIG9tIHZpIGtsaWNrYXIgcMOlIGVuIGtuYXBwIGtvbW1lciBtZWRkZWxhbmRlIHhcbnNraWNrYXMgdC5leCkqL1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "express",
        "require",
        "app",
        "router",
        "Router",
        "MongoClient",
        "sanitize",
        "v1",
        "uuidv1",
        "v4",
        "uuidv4",
        "url",
        "use",
        "json",
        "urlencoded",
        "extended",
        "post",
        "req",
        "res",
        "username",
        "body",
        "pw",
        "password",
        "myquery",
        "userID",
        "connect",
        "err",
        "db",
        "dbo",
        "collection",
        "findOne",
        "result",
        "sendStatus",
        "sessionIDvalue",
        "newSessionID",
        "$set",
        "sessionID",
        "updateOne",
        "result2",
        "close",
        "status",
        "send",
        "id",
        "newUser",
        "wall",
        "friends",
        "requests",
        "insertOne",
        "patch",
        "console",
        "log",
        "user",
        "params",
        "find",
        "element",
        "userquery",
        "get",
        "$regex",
        "toArray",
        "userList",
        "i",
        "length",
        "push",
        "requester",
        "requesterUserID",
        "validateMsg",
        "msg",
        "regex",
        "RegExp",
        "test",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
      "sourcesContent": [
        "var express = require('express');\nconst app = express();\nvar router = express.Router();\nconst {MongoClient} = require('mongodb');\nlet sanitize = require('mongo-sanitize');\nconst { \n  v1: uuidv1,\n  v4: uuidv4,\n} = require('uuid');\nlet url = \"mongodb://localhost:27017/\";\n\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\n\n// Om användaren loggar in,\n// params = användarnamn, hashat lösenord\n// kolla om användarnamn finns, om det finns, kolla om hashat lösenord matchar\n// om det matchar, returnera ett nytt sessionID, lägg även till nytt sessionID\n// i databasen.\n// om inte finns returnera status, baserat på status skriv felmeddelane. \n// returnerna en session ID/Token\n\nrouter.post(\"/login\", (req, res) => {\n  let username = req.body.username;\n  let pw = req.body.password;\n  let myquery = { userID: username, password: pw}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        \n        //Skapar sessionID\n        let sessionIDvalue = uuidv4();\n        let newSessionID = { $set: {sessionID: sessionIDvalue} };\n        \n        dbo.collection(\"users\").updateOne(myquery, newSessionID, function(err, result2) {\n          if (err) {\n            db.close();\n            res.sendStatus(500)\n          }\n          else {\n            db.close()\n            res.status(200).send(sessionIDvalue)\n          }\n        });\n      } \n      else {\n        //If we dont find a result\n        res.sendStatus(500)\n        db.close();\n      }\n    })\n  })\n})\n\n\n// Om användaren registerar sig,\n// params = användarnamn, hasht lösenord\n// kolla om användarnamn finns, om det finns returna fel, annnars lägg till\n// användare.\n// returnear status (ok)\nrouter.post(\"/register\", (req, res) => {\n\n  let username = req.body.username;\n  let pw = req.body.password;\n  let myquery = { userID: username}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        //Det finns redan en användare med namnet\n        res.sendStatus(500)\n        db.close();\n      } \n      else {\n        //skapa användarobjekt\n        let id = uuidv4();\n        let newUser = {userID: username, password: pw, wall: [], friends: [], requests: [], sessionID: id}\n        dbo.collection('users').insertOne(newUser, function(err, result) {\n          if (err) {throw err}\n          else {\n            db.close();\n            res.sendStatus(200)\n          }\n        });\n      }\n    })\n  })\n})\n/\n// Om användare loggar ut\n// params = session ID\n// ta bort session ID, returna status\n// returnarar status (ok)\nrouter.patch(\"/logout\", (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = { sessionID: id}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        console.log(\"1\")\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        console.log(\"2\")\n        let sessionIDvalue = uuidv4();\n        let newSessionID = { $set: {sessionID: sessionIDvalue} };\n        dbo.collection(\"users\").updateOne(myquery, newSessionID, function(err, result2) {\n          if (err) {\n            console.log(\"3\")\n            db.close();\n            res.sendStatus(500)\n          }\n          else {\n            console.log(\"we here\")\n            db.close()\n            res.sendStatus(200)\n          }\n        });\n\n      } \n      else {\n        //If we dont find a result\n        console.log(result)\n        res.status(500).send(\"nothing found!\")\n        db.close();\n      }\n    })\n  })\n})\n\n\n// Om inloggad, vill vi ha en friendlist på sidan\n// params = session ID\n// hämtar alla vänner baserat på session ID\n// returnerar en lista på alla vänner\n\nrouter.post(('/friends'), (req, res) => {\n  let id = req.body.sessionID;\n  let myquery = { sessionID: id}\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        res.send(result.friends)\n        db.close();\n\n      } \n      else {\n        console.log(\"no result found!\")\n        res.sendStatus(500)\n        db.close();\n      }\n    })\n    \n  })\n})\n\n\n// Om inloggad vill vi ha åtkomst till vänner profil\n// params = session ID och användarID(användar Id för vän)\n// identifierar användarID för sessionID, kollar om användarID(för vän) har \n// användarID (från sessionID) som vän. \n// Om inte vän, returnera status\n// annars returna följande\n// returnerar namn OCH alla meddelanden som skall vara på väggen för vän\n\nrouter.post(('/friends/:userID'), (req, res) => {\n\n  let user = req.params.userID;\n  let id = req.body.sessionID;\n  let myquery = { sessionID: id}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        //kolla om användarIDet finns i results.friends array\n        //om det finns hämta väggen för användarIDet\n\n        if(result.friends.find(element => element == user)) {\n          let userquery = { userID: user}\n          dbo.collection(\"users\").findOne(userquery, function(err, result) {\n            if (err) {\n              res.sendStatus(500)\n            } \n            else if (result != null) {\n              res.send({ \"wall\" : result.wall, \"userID\" : result.userID})\n            } \n            else {\n              console.log(\"no result found!\")\n              res.sendStatus(500)\n              db.close();\n            }\n          })\n        }\n      } \n      else {\n        console.log(\"no result found!\")\n        res.sendStatus(500)\n        db.close();\n      }\n    })\n    \n  })\n})\n\n\n// Om inloggad och är på egen profil\n// params = session ID\n// om sessionID inte matchar, returna status\n// annars returnera följande:\n// returnerar namn OCH alla meddelanden som skall vara på väggen för en själv\nrouter.post(('/'), (req, res) => {\n\n  let id = req.body.sessionID;\n  let myquery = { sessionID: id}\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        res.send({ \"wall\" : result.wall, \"userID\" : result.userID})\n      } \n      else {\n        console.log(\"no result found!\")\n        res.sendStatus(500)\n        db.close();\n      }\n    })\n  })\n})\n\n// Om sökning sker med specifikt namn\n// params = sträng\n// matcha mot strängen + regex som tillåter sökningen att var inkomplett (t.ex. \n// Ro ska matcha mot Robin). Matchning baseras på användarID\n// retunerar alla användare som matchar strängen + regex\nrouter.get(('/search/:id'), (req, res) => {\n\n  let id = req.params.id;\n  let myquery = { userID: {$regex: id}} //behöver mer specifikt uttryck\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    dbo.collection(\"users\").find(myquery).toArray(function (err, result) {\n      console.log(result)\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        let userList = [];\n        for (let i = 0; i < result.length; i++) {\n          userList.push(result[i].userID)\n        }\n        res.send(userList);\n      } \n      else {\n        console.log(\"no result found!\")\n        res.sendStatus(500)\n        db.close();\n      }\n    })\n  })\n})\n\n\n\n// Om inloggad och vill toggla en vänförfrågning via knapptryck\n// params = session ID, användarID\n// Om ej togglad, bli togglad, lägg till användarID (för sessionID) som pending invite\n// till användarID (för vn). \n// Om togglad ta bort användar ID (från sessionID) som pending invite för användarID \n// returnar status (om ok kan knappen bli icheckad/avcheckad)\n\n//Kolla om redan vänner\n//Kolla om \n\nrouter.patch(('/request/:userID'), (req, res) => {\n\n  let user = req.params.userID;\n  let requester = req.body.sessionID;\n  let myquery = { sessionID: requester };\n\n  MongoClient.connect(url, (err, db) => {\n    let dbo = db.db(\"tvitter\");\n    \n    //HITTAR REQUESTER, \n    dbo.collection(\"users\").findOne(myquery, function(err, result) {\n      if (err) {\n        res.sendStatus(500)\n      } \n      else if (result != null) {\n        //Kollar om requester redan är vän med user\n        if(result.friends.find(element => element == user)) {\n          db.close();\n          res.sendStatus(500);\n        }\n        else {\n          let myquery = { userID: user };\n          let requesterUserID = result.userID;\n          dbo.collection(\"users\").findOne(myquery, function(err, result) {\n            if (err) {\n              res.sendStatus(500)\n            } \n            else if (result != null) {\n              if(result.requests.find(element => element == requesterUserID)) {\n                //uppdatera requests och kör updateOne på user\n                result.requests //TA BORT requestUserID från denna\n                //sen ska vi uppdatera användaren i databasen\n              }\n\n              else {\n                //lägg till i requests och kör updateOne på user\n              }\n\n            }\n            else {\n              console.log(\"no result found!\")\n              res.sendStatus(500)\n              db.close();\n            }\n          });\n        }\n      }\n      else {\n        console.log(\"no result found!\")\n        res.sendStatus(500)\n        db.close();\n      }\n\n    });\n    \n  })\n\n})\n// Om inloggad och vill acceptera/neka vänförfrågan\n// params = sessionID, användarID (person som skickad förfrågan), bool\n// om true acceptera vänförfrågan och lägg till användarID i friends\n// om false neka vänförfrågan\n// ta bort pending invite från sessionID. \n// return status (ok t.ex.)\n\n//--------------------------------------------------------------------\n//Logged in and posting msg\nrouter.post('/friends/:userID/msg', (req, res) => {\n  console.log(req.body)\n  if (validateMsg(req.body)) {\n    msg = sanitize(req.body)\n    const regex = new RegExp(/<script>/)  //injection?\n    if (!regex.test(msg)) {\n      let user = req.params.userID;\n      let id = req.body.sessionID;\n      let myquery = { sessionID: id}\n\n      MongoClient.connect(url, (err, db) => {\n        let dbo = db.db(\"tvitter\");\n        dbo.collection(\"users\").findOne(myquery, function(err, result) {\n          if (err) {\n            res.sendStatus(500)\n          } \n          else if (result != null) { \n            if(result.friends.find(element => element == user)) {\n              let userquery = { userID: user}\n              dbo.collection(\"users\").findOne(userquery, function(err, result) {\n                if (err) {\n                  res.sendStatus(500)\n                } \n                else if (result != null) {\n                  //add msg to friends wall\n                  dbo.collection('wall').insertOne(msg, function(err, result) {\n                    if (err) {throw err}\n                    else {\n                      db.close();\n                      res.sendStatus(200)\n                    }\n                  })\n                } \n                else {\n                  console.log(\"no result found!\")\n                  res.sendStatus(500)\n                  db.close();\n                }\n              })\n            }\n          }\n        })\n      })\n    }\n  }\n  res.sendStatus(500)\n})\n\nfunction validateMsg(body) {\n  if (body.msg.length === 0 || body.msg.length > 140) { return false }\n  // if (!(typeof(body.id) === \"string\"))                        { return false }\n  // if (typeof(body.state) !== \"boolean\")                 { return false }\n  return true\n}\n// params = sessionID, användarID/sessionID, msg\n// om har tillåtelse att posta, lägg till meddelande på vägg med tid\n// och sender. Meddelanden är objekt i databsen som består av msg, time och sender\n// returnerar en status (och kanske relaod på page)\n\n\n\n\napp.use(function (req, res) {\n  //console.log(\"found it\")\n  res.send(\"Sorry can't find that!\", 404)\n})\n\n\nmodule.exports = router;\n\n\n/*använd asynkrona anrop för att hämta och lagra data. \nKan ta in en resolve och reject funktion. \nMed detta kan vi skicka rätt felmeddelanden.\nen backend fil som hanterar logik\nen testfil som representerar klient-logiken \n(alltså om vi klickar på en knapp kommer meddelande x\nskickas t.ex)*/\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1633605868238
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"filename\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/users.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/users.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/users.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nvar router = express.Router();\n/* GET users listing. */\n\nrouter.get('/', function (req, res, next) {\n  res.send('respond with a resource');\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInNlbmQiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUNBLElBQUlDLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFSLEVBQWI7QUFFQTs7QUFDQUQsTUFBTSxDQUFDRSxHQUFQLENBQVcsR0FBWCxFQUFnQixVQUFTQyxHQUFULEVBQWNDLEdBQWQsRUFBbUJDLElBQW5CLEVBQXlCO0FBQ3ZDRCxFQUFBQSxHQUFHLENBQUNFLElBQUosQ0FBUyx5QkFBVDtBQUNELENBRkQ7QUFJQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCUixNQUFqQiIsInNvdXJjZVJvb3QiOiIvaG9tZS92aW5haDMzMS9EZXNrdG9wL3RkcDAxMy9wcm9qZWt0L2JhY2tFbmQvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8qIEdFVCB1c2VycyBsaXN0aW5nLiAqL1xucm91dGVyLmdldCgnLycsIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIHJlcy5zZW5kKCdyZXNwb25kIHdpdGggYSByZXNvdXJjZScpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "express",
        "require",
        "router",
        "Router",
        "get",
        "req",
        "res",
        "next",
        "send",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb;AAEA;;AACAD,MAAM,CAACE,GAAP,CAAW,GAAX,EAAgB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACvCD,EAAAA,GAAG,CAACE,IAAJ,CAAS,yBAAT;AACD,CAFD;AAIAC,MAAM,CAACC,OAAP,GAAiBR,MAAjB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/routes/",
      "sourcesContent": [
        "var express = require('express');\nvar router = express.Router();\n\n/* GET users listing. */\nrouter.get('/', function(req, res, next) {\n  res.send('respond with a resource');\n});\n\nmodule.exports = router;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1631534435311
  },
  "{\"assumptions\":{},\"sourceRoot\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"filename\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/vinah331/Desktop/tdp013/projekt/backEnd\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.15.5": {
    "metadata": {},
    "options": {
      "assumptions": {},
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/index.js",
      "targets": {},
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "browserslistConfigFile": false,
      "envName": "development",
      "root": "/home/vinah331/Desktop/tdp013/projekt/backEnd",
      "rootMode": "root",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "const cors = require('cors');\n\nconst corsOptions = {\n  origin: '*'\n  /*file:///home/vinah331/Desktop/tdp013/lab3/main.html'*/\n  ,\n  optionsSuccessStatus: 200,\n  methods: ['GET', 'POST', 'PATCH']\n};\nmodule.exports = cors(corsOptions);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImNvcnMiLCJyZXF1aXJlIiwiY29yc09wdGlvbnMiLCJvcmlnaW4iLCJvcHRpb25zU3VjY2Vzc1N0YXR1cyIsIm1ldGhvZHMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQUdBLE1BQU1DLFdBQVcsR0FBRztBQUNoQkMsRUFBQUEsTUFBTSxFQUFFO0FBQUc7QUFESztBQUVoQkMsRUFBQUEsb0JBQW9CLEVBQUUsR0FGTjtBQUdoQkMsRUFBQUEsT0FBTyxFQUFFLENBQUMsS0FBRCxFQUFRLE1BQVIsRUFBZ0IsT0FBaEI7QUFITyxDQUFwQjtBQU1BQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJQLElBQUksQ0FBQ0UsV0FBRCxDQUFyQiIsInNvdXJjZVJvb3QiOiIvaG9tZS92aW5haDMzMS9EZXNrdG9wL3RkcDAxMy9wcm9qZWt0L2JhY2tFbmQvY29ycy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb3JzID0gcmVxdWlyZSgnY29ycycpO1xuXG5cbmNvbnN0IGNvcnNPcHRpb25zID0ge1xuICAgIG9yaWdpbjogJyonLypmaWxlOi8vL2hvbWUvdmluYWgzMzEvRGVza3RvcC90ZHAwMTMvbGFiMy9tYWluLmh0bWwnKi8sXG4gICAgb3B0aW9uc1N1Y2Nlc3NTdGF0dXM6IDIwMCwgXG4gICAgbWV0aG9kczogWydHRVQnLCAnUE9TVCcsICdQQVRDSCddXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNvcnMoY29yc09wdGlvbnMpXG5cbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "cors",
        "require",
        "corsOptions",
        "origin",
        "optionsSuccessStatus",
        "methods",
        "module",
        "exports"
      ],
      "mappings": "AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AAGA,MAAMC,WAAW,GAAG;AAChBC,EAAAA,MAAM,EAAE;AAAG;AADK;AAEhBC,EAAAA,oBAAoB,EAAE,GAFN;AAGhBC,EAAAA,OAAO,EAAE,CAAC,KAAD,EAAQ,MAAR,EAAgB,OAAhB;AAHO,CAApB;AAMAC,MAAM,CAACC,OAAP,GAAiBP,IAAI,CAACE,WAAD,CAArB",
      "sourceRoot": "/home/vinah331/Desktop/tdp013/projekt/backEnd/cors/",
      "sourcesContent": [
        "const cors = require('cors');\n\n\nconst corsOptions = {\n    origin: '*'/*file:///home/vinah331/Desktop/tdp013/lab3/main.html'*/,\n    optionsSuccessStatus: 200, \n    methods: ['GET', 'POST', 'PATCH']\n};\n\nmodule.exports = cors(corsOptions)\n\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1632659863106
  }
}